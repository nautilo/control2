"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3658],{3658:(co,hn,_r)=>{_r.r(hn),_r.d(hn,{jeep_sqlite:()=>Kn});var O=_r(5861),Mt=_r(408);const or=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function dn(){throw new Error("setTimeout has not been defined")}function mn(){throw new Error("clearTimeout has not been defined")}var Bt=dn,Ft=mn;function pn(s){if(Bt===setTimeout)return setTimeout(s,0);if((Bt===dn||!Bt)&&setTimeout)return Bt=setTimeout,setTimeout(s,0);try{return Bt(s,0)}catch{try{return Bt.call(null,s,0)}catch{return Bt.call(this,s,0)}}}"function"==typeof or.setTimeout&&(Bt=setTimeout),"function"==typeof or.clearTimeout&&(Ft=clearTimeout);var qt,Pt=[],Jt=!1,wr=-1;function oi(){!Jt||!qt||(Jt=!1,qt.length?Pt=qt.concat(Pt):wr=-1,Pt.length&&yn())}function yn(){if(!Jt){var s=pn(oi);Jt=!0;for(var t=Pt.length;t;){for(qt=Pt,Pt=[];++wr<t;)qt&&qt[wr].run();wr=-1,t=Pt.length}qt=null,Jt=!1,function si(s){if(Ft===clearTimeout)return clearTimeout(s);if((Ft===mn||!Ft)&&clearTimeout)return Ft=clearTimeout,clearTimeout(s);try{return Ft(s)}catch{try{return Ft.call(null,s)}catch{return Ft.call(this,s)}}}(s)}}function gn(s,t){this.fun=s,this.array=t}function Zt(){}gn.prototype.run=function(){this.fun.apply(null,this.array)};var gi=Zt,vi=Zt,bi=Zt,_i=Zt,wi=Zt,Ei=Zt,ki=Zt,er=or.performance||{},Di=er.now||er.mozNow||er.msNow||er.oNow||er.webkitNow||function(){return(new Date).getTime()},Ii=new Date,St={nextTick:function ai(s){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];Pt.push(new gn(s,t)),1===Pt.length&&!Jt&&pn(yn)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:gi,addListener:vi,once:bi,off:_i,removeListener:wi,removeAllListeners:Ei,emit:ki,binding:function Ti(s){throw new Error("process.binding is not supported")},cwd:function xi(){return"/"},chdir:function Pi(s){throw new Error("process.chdir is not supported")},umask:function Si(){return 0},hrtime:function Ai(s){var t=.001*Di.call(er),e=Math.floor(t),r=Math.floor(t%1*1e9);return s&&(e-=s[0],(r-=s[1])<0&&(e--,r+=1e9)),[e,r]},platform:"browser",release:{},config:{},uptime:function ji(){return(new Date-Ii)/1e3}},_t=[],ht=[],Oi=typeof Uint8Array<"u"?Uint8Array:Array,Vr=!1;function vn(){Vr=!0;for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)_t[t]=s[t],ht[s.charCodeAt(t)]=t;ht["-".charCodeAt(0)]=62,ht["_".charCodeAt(0)]=63}function Ci(s){return _t[s>>18&63]+_t[s>>12&63]+_t[s>>6&63]+_t[63&s]}function Bi(s,t,e){for(var n=[],i=t;i<e;i+=3)n.push(Ci((s[i]<<16)+(s[i+1]<<8)+s[i+2]));return n.join("")}function Er(s,t,e,r,n){var i,o,u=8*n-r-1,f=(1<<u)-1,c=f>>1,y=-7,m=e?n-1:0,v=e?-1:1,p=s[t+m];for(m+=v,i=p&(1<<-y)-1,p>>=-y,y+=u;y>0;i=256*i+s[t+m],m+=v,y-=8);for(o=i&(1<<-y)-1,i>>=-y,y+=r;y>0;o=256*o+s[t+m],m+=v,y-=8);if(0===i)i=1-c;else{if(i===f)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),i-=c}return(p?-1:1)*o*Math.pow(2,i-r)}function _n(s,t,e,r,n,i){var o,u,f,c=8*i-n-1,y=(1<<c)-1,m=y>>1,v=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,E=r?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=y):(o=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-o))<1&&(o--,f*=2),(t+=o+m>=1?v/f:v*Math.pow(2,1-m))*f>=2&&(o++,f/=2),o+m>=y?(u=0,o=y):o+m>=1?(u=(t*f-1)*Math.pow(2,n),o+=m):(u=t*Math.pow(2,m-1)*Math.pow(2,n),o=0));n>=8;s[e+p]=255&u,p+=E,u/=256,n-=8);for(o=o<<n|u,c+=n;c>0;s[e+p]=255&o,p+=E,o/=256,c-=8);s[e+p-E]|=128*_}var Fi={}.toString,wn=Array.isArray||function(s){return"[object Array]"==Fi.call(s)};function Hr(){return ie.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Dt(s,t){if(Hr()<t)throw new RangeError("Invalid typed array length");return ie.TYPED_ARRAY_SUPPORT?(s=new Uint8Array(t)).__proto__=ie.prototype:(null===s&&(s=new ie(t)),s.length=t),s}function ie(s,t,e){if(!(ie.TYPED_ARRAY_SUPPORT||this instanceof ie))return new ie(s,t,e);if("number"==typeof s){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Kr(this,s)}return En(this,s,t,e)}function En(s,t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?function Mi(s,t,e,r){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),ie.TYPED_ARRAY_SUPPORT?(s=t).__proto__=ie.prototype:s=Yr(s,t),s}(s,t,e,r):"string"==typeof t?function zi(s,t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!ie.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Tn(t,e),n=(s=Dt(s,r)).write(t,e);return n!==r&&(s=s.slice(0,n)),s}(s,t,e):function qi(s,t){if(wt(t)){var e=0|Qr(t.length);return 0===(s=Dt(s,e)).length||t.copy(s,0,0,e),s}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function as(s){return s!=s}(t.length)?Dt(s,0):Yr(s,t);if("Buffer"===t.type&&wn(t.data))return Yr(s,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(s,t)}function kn(s){if("number"!=typeof s)throw new TypeError('"size" argument must be a number');if(s<0)throw new RangeError('"size" argument must not be negative')}function Kr(s,t){if(kn(t),s=Dt(s,t<0?0:0|Qr(t)),!ie.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)s[e]=0;return s}function Yr(s,t){var e=t.length<0?0:0|Qr(t.length);s=Dt(s,e);for(var r=0;r<e;r+=1)s[r]=255&t[r];return s}function Qr(s){if(s>=Hr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Hr().toString(16)+" bytes");return 0|s}function wt(s){return!(null==s||!s._isBuffer)}function Tn(s,t){if(wt(s))return s.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(s)||s instanceof ArrayBuffer))return s.byteLength;"string"!=typeof s&&(s=""+s);var e=s.length;if(0===e)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return xr(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return On(s).length;default:if(r)return xr(s).length;t=(""+t).toLowerCase(),r=!0}}function Zi(s,t,e){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(t>>>=0))return"";for(s||(s="utf8");;)switch(s){case"hex":return Ji(this,t,e);case"utf8":case"utf-8":return Dn(this,t,e);case"ascii":return Qi(this,t,e);case"latin1":case"binary":return Xi(this,t,e);case"base64":return Ki(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return es(this,t,e);default:if(r)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),r=!0}}function Ut(s,t,e){var r=s[t];s[t]=s[e],s[e]=r}function xn(s,t,e,r,n){if(0===s.length)return-1;if("string"==typeof e?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=n?0:s.length-1),e<0&&(e=s.length+e),e>=s.length){if(n)return-1;e=s.length-1}else if(e<0){if(!n)return-1;e=0}if("string"==typeof t&&(t=ie.from(t,r)),wt(t))return 0===t.length?-1:Pn(s,t,e,r,n);if("number"==typeof t)return t&=255,ie.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(s,t,e):Uint8Array.prototype.lastIndexOf.call(s,t,e):Pn(s,[t],e,r,n);throw new TypeError("val must be string, number or Buffer")}function Pn(s,t,e,r,n){var c,i=1,o=s.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(s.length<2||t.length<2)return-1;i=2,o/=2,u/=2,e/=2}function f(p,E){return 1===i?p[E]:p.readUInt16BE(E*i)}if(n){var y=-1;for(c=e;c<o;c++)if(f(s,c)===f(t,-1===y?0:c-y)){if(-1===y&&(y=c),c-y+1===u)return y*i}else-1!==y&&(c-=c-y),y=-1}else for(e+u>o&&(e=o-u),c=e;c>=0;c--){for(var m=!0,v=0;v<u;v++)if(f(s,c+v)!==f(t,v)){m=!1;break}if(m)return c}return-1}function Ui(s,t,e,r){e=Number(e)||0;var n=s.length-e;r?(r=Number(r))>n&&(r=n):r=n;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var o=0;o<r;++o){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))return o;s[e+o]=u}return o}function Wi(s,t,e,r){return Pr(xr(t,s.length-e),s,e,r)}function Sn(s,t,e,r){return Pr(function ss(s){for(var t=[],e=0;e<s.length;++e)t.push(255&s.charCodeAt(e));return t}(t),s,e,r)}function Gi(s,t,e,r){return Sn(s,t,e,r)}function Vi(s,t,e,r){return Pr(On(t),s,e,r)}function Hi(s,t,e,r){return Pr(function os(s,t){for(var e,r,i=[],o=0;o<s.length&&!((t-=2)<0);++o)r=(e=s.charCodeAt(o))>>8,i.push(e%256),i.push(r);return i}(t,s.length-e),s,e,r)}function Ki(s,t,e){return function bn(s){Vr||vn();for(var t,e=s.length,r=e%3,n="",i=[],o=16383,u=0,f=e-r;u<f;u+=o)i.push(Bi(s,u,u+o>f?f:u+o));return 1===r?(n+=_t[(t=s[e-1])>>2],n+=_t[t<<4&63],n+="=="):2===r&&(n+=_t[(t=(s[e-2]<<8)+s[e-1])>>10],n+=_t[t>>4&63],n+=_t[t<<2&63],n+="="),i.push(n),i.join("")}(0===t&&e===s.length?s:s.slice(t,e))}function Dn(s,t,e){e=Math.min(s.length,e);for(var r=[],n=t;n<e;){var f,c,y,m,i=s[n],o=null,u=i>239?4:i>223?3:i>191?2:1;if(n+u<=e)switch(u){case 1:i<128&&(o=i);break;case 2:128==(192&(f=s[n+1]))&&(m=(31&i)<<6|63&f)>127&&(o=m);break;case 3:c=s[n+2],128==(192&(f=s[n+1]))&&128==(192&c)&&(m=(15&i)<<12|(63&f)<<6|63&c)>2047&&(m<55296||m>57343)&&(o=m);break;case 4:c=s[n+2],y=s[n+3],128==(192&(f=s[n+1]))&&128==(192&c)&&128==(192&y)&&(m=(15&i)<<18|(63&f)<<12|(63&c)<<6|63&y)>65535&&m<1114112&&(o=m)}null===o?(o=65533,u=1):o>65535&&(r.push((o-=65536)>>>10&1023|55296),o=56320|1023&o),r.push(o),n+=u}return function Yi(s){var t=s.length;if(t<=An)return String.fromCharCode.apply(String,s);for(var e="",r=0;r<t;)e+=String.fromCharCode.apply(String,s.slice(r,r+=An));return e}(r)}ie.TYPED_ARRAY_SUPPORT=void 0===or.TYPED_ARRAY_SUPPORT||or.TYPED_ARRAY_SUPPORT,ie.poolSize=8192,ie._augment=function(s){return s.__proto__=ie.prototype,s},ie.from=function(s,t,e){return En(null,s,t,e)},ie.TYPED_ARRAY_SUPPORT&&(ie.prototype.__proto__=Uint8Array.prototype,ie.__proto__=Uint8Array),ie.alloc=function(s,t,e){return function Li(s,t,e,r){return kn(t),t<=0?Dt(s,t):void 0!==e?"string"==typeof r?Dt(s,t).fill(e,r):Dt(s,t).fill(e):Dt(s,t)}(null,s,t,e)},ie.allocUnsafe=function(s){return Kr(null,s)},ie.allocUnsafeSlow=function(s){return Kr(null,s)},ie.isBuffer=function us(s){return null!=s&&(!!s._isBuffer||Nn(s)||function cs(s){return"function"==typeof s.readFloatLE&&"function"==typeof s.slice&&Nn(s.slice(0,0))}(s))},ie.compare=function(t,e){if(!wt(t)||!wt(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},ie.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ie.concat=function(t,e){if(!wn(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return ie.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=ie.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!wt(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},ie.byteLength=Tn,ie.prototype._isBuffer=!0,ie.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ut(this,e,e+1);return this},ie.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ut(this,e,e+3),Ut(this,e+1,e+2);return this},ie.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ut(this,e,e+7),Ut(this,e+1,e+6),Ut(this,e+2,e+5),Ut(this,e+3,e+4);return this},ie.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Dn(this,0,t):Zi.apply(this,arguments)},ie.prototype.equals=function(t){if(!wt(t))throw new TypeError("Argument must be a Buffer");return this===t||0===ie.compare(this,t)},ie.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ie.prototype.compare=function(t,e,r,n,i){if(!wt(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(r>>>=0)-(e>>>=0),f=Math.min(o,u),c=this.slice(n,i),y=t.slice(e,r),m=0;m<f;++m)if(c[m]!==y[m]){o=c[m],u=y[m];break}return o<u?-1:u<o?1:0},ie.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},ie.prototype.indexOf=function(t,e,r){return xn(this,t,e,r,!0)},ie.prototype.lastIndexOf=function(t,e,r){return xn(this,t,e,r,!1)},ie.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return Ui(this,t,e,r);case"utf8":case"utf-8":return Wi(this,t,e,r);case"ascii":return Sn(this,t,e,r);case"latin1":case"binary":return Gi(this,t,e,r);case"base64":return Vi(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Hi(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},ie.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var An=4096;function Qi(s,t,e){var r="";e=Math.min(s.length,e);for(var n=t;n<e;++n)r+=String.fromCharCode(127&s[n]);return r}function Xi(s,t,e){var r="";e=Math.min(s.length,e);for(var n=t;n<e;++n)r+=String.fromCharCode(s[n]);return r}function Ji(s,t,e){var r=s.length;(!t||t<0)&&(t=0),(!e||e<0||e>r)&&(e=r);for(var n="",i=t;i<e;++i)n+=is(s[i]);return n}function es(s,t,e){for(var r=s.slice(t,e),n="",i=0;i<r.length;i+=2)n+=String.fromCharCode(r[i]+256*r[i+1]);return n}function tt(s,t,e){if(s%1!=0||s<0)throw new RangeError("offset is not uint");if(s+t>e)throw new RangeError("Trying to access beyond buffer length")}function ut(s,t,e,r,n,i){if(!wt(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<i)throw new RangeError('"value" argument is out of bounds');if(e+r>s.length)throw new RangeError("Index out of range")}function kr(s,t,e,r){t<0&&(t=65535+t+1);for(var n=0,i=Math.min(s.length-e,2);n<i;++n)s[e+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function Tr(s,t,e,r){t<0&&(t=4294967295+t+1);for(var n=0,i=Math.min(s.length-e,4);n<i;++n)s[e+n]=t>>>8*(r?n:3-n)&255}function In(s,t,e,r,n,i){if(e+r>s.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function jn(s,t,e,r,n){return n||In(s,0,e,4),_n(s,t,e,r,23,4),e+4}function Rn(s,t,e,r,n){return n||In(s,0,e,8),_n(s,t,e,r,52,8),e+8}ie.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),ie.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=ie.prototype;else{var i=e-t;n=new ie(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},ie.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||tt(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},ie.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||tt(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},ie.prototype.readUInt8=function(t,e){return e||tt(t,1,this.length),this[t]},ie.prototype.readUInt16LE=function(t,e){return e||tt(t,2,this.length),this[t]|this[t+1]<<8},ie.prototype.readUInt16BE=function(t,e){return e||tt(t,2,this.length),this[t]<<8|this[t+1]},ie.prototype.readUInt32LE=function(t,e){return e||tt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ie.prototype.readUInt32BE=function(t,e){return e||tt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ie.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||tt(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},ie.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||tt(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},ie.prototype.readInt8=function(t,e){return e||tt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ie.prototype.readInt16LE=function(t,e){e||tt(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},ie.prototype.readInt16BE=function(t,e){e||tt(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},ie.prototype.readInt32LE=function(t,e){return e||tt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ie.prototype.readInt32BE=function(t,e){return e||tt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ie.prototype.readFloatLE=function(t,e){return e||tt(t,4,this.length),Er(this,t,!0,23,4)},ie.prototype.readFloatBE=function(t,e){return e||tt(t,4,this.length),Er(this,t,!1,23,4)},ie.prototype.readDoubleLE=function(t,e){return e||tt(t,8,this.length),Er(this,t,!0,52,8)},ie.prototype.readDoubleBE=function(t,e){return e||tt(t,8,this.length),Er(this,t,!1,52,8)},ie.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||ut(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,u=0;for(this[e]=255&t;++u<r&&(o*=256);)this[e+u]=t/o&255;return e+r},ie.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||ut(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,u=1;for(this[e+o]=255&t;--o>=0&&(u*=256);)this[e+o]=t/u&255;return e+r},ie.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||ut(this,t,e,1,255,0),ie.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ie.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||ut(this,t,e,2,65535,0),ie.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):kr(this,t,e,!0),e+2},ie.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||ut(this,t,e,2,65535,0),ie.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):kr(this,t,e,!1),e+2},ie.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||ut(this,t,e,4,4294967295,0),ie.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Tr(this,t,e,!0),e+4},ie.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||ut(this,t,e,4,4294967295,0),ie.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Tr(this,t,e,!1),e+4},ie.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);ut(this,t,e,r,i-1,-i)}var o=0,u=1,f=0;for(this[e]=255&t;++o<r&&(u*=256);)t<0&&0===f&&0!==this[e+o-1]&&(f=1),this[e+o]=(t/u>>0)-f&255;return e+r},ie.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);ut(this,t,e,r,i-1,-i)}var o=r-1,u=1,f=0;for(this[e+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[e+o+1]&&(f=1),this[e+o]=(t/u>>0)-f&255;return e+r},ie.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||ut(this,t,e,1,127,-128),ie.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ie.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||ut(this,t,e,2,32767,-32768),ie.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):kr(this,t,e,!0),e+2},ie.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||ut(this,t,e,2,32767,-32768),ie.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):kr(this,t,e,!1),e+2},ie.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||ut(this,t,e,4,2147483647,-2147483648),ie.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Tr(this,t,e,!0),e+4},ie.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||ut(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ie.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Tr(this,t,e,!1),e+4},ie.prototype.writeFloatLE=function(t,e,r){return jn(this,t,e,!0,r)},ie.prototype.writeFloatBE=function(t,e,r){return jn(this,t,e,!1,r)},ie.prototype.writeDoubleLE=function(t,e,r){return Rn(this,t,e,!0,r)},ie.prototype.writeDoubleBE=function(t,e,r){return Rn(this,t,e,!1,r)},ie.prototype.copy=function(t,e,r,n){if(r||(r=0),!n&&0!==n&&(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!ie.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},ie.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!ie.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var u=wt(t)?t:xr(new ie(t,n).toString()),f=u.length;for(o=0;o<r-e;++o)this[o+e]=u[o%f]}return this};var ts=/[^+\/0-9A-Za-z-_]/g;function is(s){return s<16?"0"+s.toString(16):s.toString(16)}function xr(s,t){t=t||1/0;for(var e,r=s.length,n=null,i=[],o=0;o<r;++o){if((e=s.charCodeAt(o))>55295&&e<57344){if(!n){if(e>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}n=e;continue}if(e<56320){(t-=3)>-1&&i.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&(t-=3)>-1&&i.push(239,191,189);if(n=null,e<128){if((t-=1)<0)break;i.push(e)}else if(e<2048){if((t-=2)<0)break;i.push(e>>6|192,63&e|128)}else if(e<65536){if((t-=3)<0)break;i.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return i}function On(s){return function Ni(s){Vr||vn();var t,e,r,n,i,o,u=s.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=new Oi(3*u/4-(i="="===s[u-2]?2:"="===s[u-1]?1:0)),r=i>0?u-4:u;var f=0;for(t=0,e=0;t<r;t+=4,e+=3)n=ht[s.charCodeAt(t)]<<18|ht[s.charCodeAt(t+1)]<<12|ht[s.charCodeAt(t+2)]<<6|ht[s.charCodeAt(t+3)],o[f++]=n>>16&255,o[f++]=n>>8&255,o[f++]=255&n;return 2===i?(n=ht[s.charCodeAt(t)]<<2|ht[s.charCodeAt(t+1)]>>4,o[f++]=255&n):1===i&&(n=ht[s.charCodeAt(t)]<<10|ht[s.charCodeAt(t+1)]<<4|ht[s.charCodeAt(t+2)]>>2,o[f++]=n>>8&255,o[f++]=255&n),o}(function rs(s){if((s=function ns(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}(s).replace(ts,"")).length<2)return"";for(;s.length%4!=0;)s+="=";return s}(s))}function Pr(s,t,e,r){for(var n=0;n<r&&!(n+e>=t.length||n>=s.length);++n)t[n+e]=s[n];return n}function Nn(s){return!!s.constructor&&"function"==typeof s.constructor.isBuffer&&s.constructor.isBuffer(s)}var $t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xr(s,t,e){return s(e={path:t,exports:{},require:function(r,n){return At()}},e.exports),e.exports}function Cn(s){if(s.__esModule)return s;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(s).forEach(function(e){var r=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,r.get?r:{enumerable:!0,get:function(){return s[e]}})}),t}function At(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function Bn(s,t){for(var e=0,r=s.length-1;r>=0;r--){var n=s[r];"."===n?s.splice(r,1):".."===n?(s.splice(r,1),e++):e&&(s.splice(r,1),e--)}if(t)for(;e--;e)s.unshift("..");return s}var ls=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Jr=function(s){return ls.exec(s).slice(1)};function Sr(){for(var s="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var r=e>=0?arguments[e]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(s=r+"/"+s,t="/"===r.charAt(0))}return(t?"/":"")+(s=Bn(rn(s.split("/"),function(n){return!!n}),!t).join("/"))||"."}function en(s){var t=tn(s),e="/"===hs(s,-1);return!(s=Bn(rn(s.split("/"),function(r){return!!r}),!t).join("/"))&&!t&&(s="."),s&&e&&(s+="/"),(t?"/":"")+s}function tn(s){return"/"===s.charAt(0)}function Fn(){return en(rn(Array.prototype.slice.call(arguments,0),function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function $n(s,t){function e(c){for(var y=0;y<c.length&&""===c[y];y++);for(var m=c.length-1;m>=0&&""===c[m];m--);return y>m?[]:c.slice(y,m-y+1)}s=Sr(s).substr(1),t=Sr(t).substr(1);for(var r=e(s.split("/")),n=e(t.split("/")),i=Math.min(r.length,n.length),o=i,u=0;u<i;u++)if(r[u]!==n[u]){o=u;break}var f=[];for(u=o;u<r.length;u++)f.push("..");return(f=f.concat(n.slice(o))).join("/")}function Mn(s){var t=Jr(s),e=t[0],r=t[1];return e||r?(r&&(r=r.substr(0,r.length-1)),e+r):"."}function qn(s,t){var e=Jr(s)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e}function Zn(s){return Jr(s)[3]}function rn(s,t){if(s.filter)return s.filter(t);for(var e=[],r=0;r<s.length;r++)t(s[r],r,s)&&e.push(s[r]);return e}var hs=function(s,t,e){return s.substr(t,e)};const ds=Object.freeze({__proto__:null,resolve:Sr,normalize:en,isAbsolute:tn,join:Fn,relative:$n,sep:"/",delimiter:":",dirname:Mn,basename:qn,extname:Zn,default:{extname:Zn,basename:qn,dirname:Mn,sep:"/",delimiter:":",relative:$n,join:Fn,isAbsolute:tn,normalize:en,resolve:Sr}}),ms=Object.freeze({__proto__:null,default:{}}),Un=Cn(ds),Wn=Cn(ms);var ps=Xr(function(s,t){var e=void 0,r=function(n){return e||(e=new Promise(function(i,o){var c,u=typeof n<"u"?n:{},f=u.onAbort;u.onAbort=function(a){o(new Error(a)),f&&f(a)},u.postRun=u.postRun||[],u.postRun.push(function(){i(u)}),s=void 0,c||(c=typeof u<"u"?u:{}),c.onRuntimeInitialized=function(){function a(q,ue){switch(typeof ue){case"boolean":oo(q,ue?1:0);break;case"number":no(q,ue);break;case"string":io(q,ue,-1,-1);break;case"object":if(null===ue)ni(q);else if(null!=ue.length){var ke=pr(ue);so(q,ke,ue.length,-1),Ur(ke)}else Gr(q,"Wrong API use : tried to return a value of an unknown type ("+ue+").",-1);break;default:ni(q)}}function l(q,ue){for(var ke=[],De=0;De<q;De+=1){var Oe=ne(ue+4*De,"i32"),qe=Xs(Oe);if(1===qe||2===qe)Oe=ro(Oe);else if(3===qe)Oe=eo(Oe);else if(4===qe){Oe=Js(qe=Oe),qe=to(qe);for(var xt=new Uint8Array(Oe),ft=0;ft<Oe;ft+=1)xt[ft]=te[qe+ft];Oe=xt}else Oe=null;ke.push(Oe)}return ke}function d(q,ue){this.La=q,this.db=ue,this.Ja=1,this.fb=[]}function x(q,ue){if(this.db=ue,ue=J(q)+1,this.Ya=Qt(ue),null===this.Ya)throw Error("Unable to allocate memory for the SQL string");g(q,xe,this.Ya,ue),this.eb=this.Ya,this.Ua=this.ib=null}function j(q){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=q){var ue=this.filename,ke="/",De=ue;if(ke&&(ke="string"==typeof ke?ke:Vt(ke),De=ue?ve(ke+"/"+ue):ke),ue=sr(!0,!0),De=tr(De,4095&(void 0!==ue?ue:438)|32768,0),q){if("string"==typeof q){ke=Array(q.length);for(var Oe=0,qe=q.length;Oe<qe;++Oe)ke[Oe]=q.charCodeAt(Oe);q=ke}nr(De,146|ue),ke=mt(De,577),Kt(ke,q,0,q.length,0),ir(ke),nr(De,ue)}}this.handleError(Ae(this.filename,K)),this.db=ne(K,"i32"),ao(this.db),this.Za={},this.Na={}}var K=zt(4),re=c.cwrap,Ae=re("sqlite3_open","number",["string","number"]),ze=re("sqlite3_close_v2","number",["number"]),Fe=re("sqlite3_exec","number",["number","string","number","number","number"]),Je=re("sqlite3_changes","number",["number"]),Ct=re("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Xn=re("sqlite3_sql","string",["number"]),Cs=re("sqlite3_normalized_sql","string",["number"]),Jn=re("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Bs=re("sqlite3_bind_text","number",["number","number","number","number","number"]),ei=re("sqlite3_bind_blob","number",["number","number","number","number","number"]),Fs=re("sqlite3_bind_double","number",["number","number","number"]),$s=re("sqlite3_bind_int","number",["number","number","number"]),Ls=re("sqlite3_bind_parameter_index","number",["number","string"]),zs=re("sqlite3_step","number",["number"]),Ms=re("sqlite3_errmsg","string",["number"]),qs=re("sqlite3_column_count","number",["number"]),Zs=re("sqlite3_data_count","number",["number"]),Us=re("sqlite3_column_double","number",["number","number"]),ti=re("sqlite3_column_text","string",["number","number"]),Ws=re("sqlite3_column_blob","number",["number","number"]),Gs=re("sqlite3_column_bytes","number",["number","number"]),Vs=re("sqlite3_column_type","number",["number","number"]),Hs=re("sqlite3_column_name","string",["number","number"]),Ks=re("sqlite3_reset","number",["number"]),Ys=re("sqlite3_clear_bindings","number",["number"]),Qs=re("sqlite3_finalize","number",["number"]),ri=re("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Xs=re("sqlite3_value_type","number",["number"]),Js=re("sqlite3_value_bytes","number",["number"]),eo=re("sqlite3_value_text","string",["number"]),to=re("sqlite3_value_blob","number",["number"]),ro=re("sqlite3_value_double","number",["number"]),no=re("sqlite3_result_double","",["number","number"]),ni=re("sqlite3_result_null","",["number"]),io=re("sqlite3_result_text","",["number","string","number","number"]),so=re("sqlite3_result_blob","",["number","number","number","number"]),oo=re("sqlite3_result_int","",["number","number"]),Gr=re("sqlite3_result_error","",["number","string","number"]),ii=re("sqlite3_aggregate_context","number",["number","number"]),ao=re("RegisterExtensionFunctions","number",["number"]);d.prototype.bind=function(q){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(q)?this.xb(q):null==q||"object"!=typeof q||this.yb(q)},d.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var q=zs(this.La);switch(q){case 100:return!0;case 101:return!1;default:throw this.db.handleError(q)}},d.prototype.sb=function(q){return null==q&&(q=this.Ja,this.Ja+=1),Us(this.La,q)},d.prototype.Cb=function(q){if(null==q&&(q=this.Ja,this.Ja+=1),q=ti(this.La,q),"function"!=typeof BigInt)throw Error("BigInt is not supported");return BigInt(q)},d.prototype.Db=function(q){return null==q&&(q=this.Ja,this.Ja+=1),ti(this.La,q)},d.prototype.getBlob=function(q){null==q&&(q=this.Ja,this.Ja+=1);var ue=Gs(this.La,q);q=Ws(this.La,q);for(var ke=new Uint8Array(ue),De=0;De<ue;De+=1)ke[De]=te[q+De];return ke},d.prototype.get=function(q,ue){ue=ue||{},null!=q&&this.bind(q)&&this.step(),q=[];for(var ke=Zs(this.La),De=0;De<ke;De+=1)switch(Vs(this.La,De)){case 1:var Oe=ue.useBigInt?this.Cb(De):this.sb(De);q.push(Oe);break;case 2:q.push(this.sb(De));break;case 3:q.push(this.Db(De));break;case 4:q.push(this.getBlob(De));break;default:q.push(null)}return q},d.prototype.getColumnNames=function(){for(var q=[],ue=qs(this.La),ke=0;ke<ue;ke+=1)q.push(Hs(this.La,ke));return q},d.prototype.getAsObject=function(q,ue){q=this.get(q,ue),ue=this.getColumnNames();for(var ke={},De=0;De<ue.length;De+=1)ke[ue[De]]=q[De];return ke},d.prototype.getSQL=function(){return Xn(this.La)},d.prototype.getNormalizedSQL=function(){return Cs(this.La)},d.prototype.run=function(q){return null!=q&&this.bind(q),this.step(),this.reset()},d.prototype.nb=function(q,ue){null==ue&&(ue=this.Ja,this.Ja+=1);var ke=pr(q=rt(q));this.fb.push(ke),this.db.handleError(Bs(this.La,ue,ke,q.length-1,0))},d.prototype.wb=function(q,ue){null==ue&&(ue=this.Ja,this.Ja+=1);var ke=pr(q);this.fb.push(ke),this.db.handleError(ei(this.La,ue,ke,q.length,0))},d.prototype.mb=function(q,ue){null==ue&&(ue=this.Ja,this.Ja+=1),this.db.handleError((q===(0|q)?$s:Fs)(this.La,ue,q))},d.prototype.zb=function(q){null==q&&(q=this.Ja,this.Ja+=1),ei(this.La,q,0,0,0)},d.prototype.ob=function(q,ue){switch(null==ue&&(ue=this.Ja,this.Ja+=1),typeof q){case"string":return void this.nb(q,ue);case"number":return void this.mb(q,ue);case"bigint":return void this.nb(q.toString(),ue);case"boolean":return void this.mb(q+0,ue);case"object":if(null===q)return void this.zb(ue);if(null!=q.length)return void this.wb(q,ue)}throw"Wrong API use : tried to bind a value of an unknown type ("+q+")."},d.prototype.yb=function(q){var ue=this;return Object.keys(q).forEach(function(ke){var De=Ls(ue.La,ke);0!==De&&ue.ob(q[ke],De)}),!0},d.prototype.xb=function(q){for(var ue=0;ue<q.length;ue+=1)this.ob(q[ue],ue+1);return!0},d.prototype.reset=function(){return this.freemem(),0===Ys(this.La)&&0===Ks(this.La)},d.prototype.freemem=function(){for(var q;void 0!==(q=this.fb.pop());)Ur(q)},d.prototype.free=function(){this.freemem();var q=0===Qs(this.La);return delete this.db.Za[this.La],this.La=0,q},x.prototype.next=function(){if(null===this.Ya)return{done:!0};if(null!==this.Ua&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var q=gr(),ue=zt(4);Z(K),Z(ue);try{this.db.handleError(Jn(this.db.db,this.eb,-1,K,ue)),this.eb=ne(ue,"i32");var ke=ne(K,"i32");return 0===ke?(this.gb(),{done:!0}):(this.Ua=new d(ke,this.db),this.db.Za[ke]=this.Ua,{value:this.Ua,done:!1})}catch(De){throw this.ib=W(this.eb),this.gb(),De}finally{vr(q)}},x.prototype.gb=function(){Ur(this.Ya),this.Ya=null},x.prototype.getRemainingSQL=function(){return null!==this.ib?this.ib:W(this.eb)},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(x.prototype[Symbol.iterator]=function(){return this}),j.prototype.run=function(q,ue){if(!this.db)throw"Database closed";if(ue){q=this.prepare(q,ue);try{q.step()}finally{q.free()}}else this.handleError(Fe(this.db,q,0,0,K));return this},j.prototype.exec=function(q,ue,ke){if(!this.db)throw"Database closed";var De=gr(),Oe=null;try{var qe=J(q)+1,xt=zt(qe);g(q,te,xt,qe);var ft=xt,pt=zt(4);for(q=[];0!==ne(ft,"i8");){Z(K),Z(pt),this.handleError(Jn(this.db,ft,-1,K,pt));var yt=ne(K,"i32");if(ft=ne(pt,"i32"),0!==yt){for(qe=null,Oe=new d(yt,this),null!=ue&&Oe.bind(ue);Oe.step();)null===qe&&(qe={columns:Oe.getColumnNames(),values:[]},q.push(qe)),qe.values.push(Oe.get(null,ke));Oe.free()}}return q}catch(br){throw Oe&&Oe.free(),br}finally{vr(De)}},j.prototype.each=function(q,ue,ke,De,Oe){"function"==typeof ue&&(De=ke,ke=ue,ue=void 0),q=this.prepare(q,ue);try{for(;q.step();)ke(q.getAsObject(null,Oe))}finally{q.free()}if("function"==typeof De)return De()},j.prototype.prepare=function(q,ue){if(Z(K),this.handleError(Ct(this.db,q,-1,K,0)),0===(q=ne(K,"i32")))throw"Nothing to prepare";var ke=new d(q,this);return null!=ue&&ke.bind(ue),this.Za[q]=ke},j.prototype.iterateStatements=function(q){return new x(q,this)},j.prototype.export=function(){Object.values(this.Za).forEach(function(ue){ue.free()}),Object.values(this.Na).forEach(Nt),this.Na={},this.handleError(ze(this.db));var q=dr(this.filename);return this.handleError(Ae(this.filename,K)),this.db=ne(K,"i32"),q},j.prototype.close=function(){null!==this.db&&(Object.values(this.Za).forEach(function(q){q.free()}),Object.values(this.Na).forEach(Nt),this.Na={},this.handleError(ze(this.db)),Fr("/"+this.filename),this.db=null)},j.prototype.handleError=function(q){if(0===q)return null;throw q=Ms(this.db),Error(q)},j.prototype.getRowsModified=function(){return Je(this.db)},j.prototype.create_function=function(q,ue){Object.prototype.hasOwnProperty.call(this.Na,q)&&(Nt(this.Na[q]),delete this.Na[q]);var ke=Ot(function(De,Oe,qe){Oe=l(Oe,qe);try{var xt=ue.apply(null,Oe)}catch(ft){return void Gr(De,ft,-1)}a(De,xt)},"viii");return this.Na[q]=ke,this.handleError(ri(this.db,q,ue.length,1,0,ke,0,0,0)),this},j.prototype.create_aggregate=function(q,ue){var ke=ue.init||function(){return null},De=ue.finalize||function(pt){return pt},Oe=ue.step;if(!Oe)throw"An aggregate function must have a step function in "+q;var qe={};Object.hasOwnProperty.call(this.Na,q)&&(Nt(this.Na[q]),delete this.Na[q]),ue=q+"__finalize",Object.hasOwnProperty.call(this.Na,ue)&&(Nt(this.Na[ue]),delete this.Na[ue]);var xt=Ot(function(pt,yt,br){var Xt=ii(pt,1);Object.hasOwnProperty.call(qe,Xt)||(qe[Xt]=ke()),yt=l(yt,br),yt=[qe[Xt]].concat(yt);try{qe[Xt]=Oe.apply(null,yt)}catch(uo){delete qe[Xt],Gr(pt,uo,-1)}},"viii"),ft=Ot(function(pt){var yt=ii(pt,1);try{var br=De(qe[yt])}catch(Xt){return delete qe[yt],void Gr(pt,Xt,-1)}a(pt,br),delete qe[yt]},"vi");return this.Na[q]=xt,this.Na[ue]=ft,this.handleError(ri(this.db,q,Oe.length-1,1,0,0,xt,ft,0)),this},c.Database=j};var T,k,S,N,L,A,y=Object.assign({},c),m="./this.program",v="object"==typeof window,p="function"==typeof importScripts,E="object"==typeof St&&"object"==typeof St.versions&&"string"==typeof St.versions.node,_="";E?(_=p?Un.dirname(_)+"/":"/Volumes/Development_Lacie/Development/new/jeep-sqlite/node_modules/sql.js/dist/",A=()=>{L||(N=Wn,L=Un)},T=function(a,l){return A(),a=L.normalize(a),N.readFileSync(a,l?void 0:"utf8")},S=a=>((a=T(a,!0)).buffer||(a=new Uint8Array(a)),a),k=(a,l,d)=>{A(),a=L.normalize(a),N.readFile(a,function(x,j){x?d(x):l(j.buffer)})},1<St.argv.length&&(m=St.argv[1].replace(/\\/g,"/")),St.argv.slice(2),s.exports=c,c.inspect=function(){return"[Emscripten Module object]"}):(v||p)&&(p?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),_=0!==_.indexOf("blob:")?_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1):"",T=a=>{var l=new XMLHttpRequest;return l.open("GET",a,!1),l.send(null),l.responseText},p&&(S=a=>{var l=new XMLHttpRequest;return l.open("GET",a,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),k=(a,l,d)=>{var x=new XMLHttpRequest;x.open("GET",a,!0),x.responseType="arraybuffer",x.onload=()=>{200==x.status||0==x.status&&x.response?l(x.response):d()},x.onerror=d,x.send(null)});var Q,V=c.print||console.log.bind(console),M=c.printErr||console.warn.bind(console);Object.assign(c,y),y=null,c.thisProgram&&(m=c.thisProgram),c.wasmBinary&&(Q=c.wasmBinary),"object"!=typeof WebAssembly&&Xe("no native wasm support detected");var G,Pe,te,xe,le,he,z,U,Te,ce=!1,_e=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function I(a,l,d){var x=l+d;for(d=l;a[d]&&!(d>=x);)++d;if(16<d-l&&a.buffer&&_e)return _e.decode(a.subarray(l,d));for(x="";l<d;){var j=a[l++];if(128&j){var K=63&a[l++];if(192==(224&j))x+=String.fromCharCode((31&j)<<6|K);else{var re=63&a[l++];65536>(j=224==(240&j)?(15&j)<<12|K<<6|re:(7&j)<<18|K<<12|re<<6|63&a[l++])?x+=String.fromCharCode(j):(j-=65536,x+=String.fromCharCode(55296|j>>10,56320|1023&j))}}else x+=String.fromCharCode(j)}return x}function W(a,l){return a?I(xe,a,l):""}function g(a,l,d,x){if(!(0<x))return 0;var j=d;x=d+x-1;for(var K=0;K<a.length;++K){var re=a.charCodeAt(K);if(55296<=re&&57343>=re&&(re=65536+((1023&re)<<10)|1023&a.charCodeAt(++K)),127>=re){if(d>=x)break;l[d++]=re}else{if(2047>=re){if(d+1>=x)break;l[d++]=192|re>>6}else{if(65535>=re){if(d+2>=x)break;l[d++]=224|re>>12}else{if(d+3>=x)break;l[d++]=240|re>>18,l[d++]=128|re>>12&63}l[d++]=128|re>>6&63}l[d++]=128|63&re}}return l[d]=0,d-j}function J(a){for(var l=0,d=0;d<a.length;++d){var x=a.charCodeAt(d);127>=x?l++:2047>=x?l+=2:55296<=x&&57343>=x?(l+=4,++d):l+=3}return l}function be(){var a=G.buffer;Pe=a,c.HEAP8=te=new Int8Array(a),c.HEAP16=le=new Int16Array(a),c.HEAP32=he=new Int32Array(a),c.HEAPU8=xe=new Uint8Array(a),c.HEAPU16=new Uint16Array(a),c.HEAPU32=z=new Uint32Array(a),c.HEAPF32=U=new Float32Array(a),c.HEAPF64=Te=new Float64Array(a)}var ye,Ge=[],Qe=[],Re=[];function Ce(){var a=c.preRun.shift();Ge.unshift(a)}var h,w,C,Ue=0,Ze=null;function Xe(a){throw c.onAbort&&c.onAbort(a),M(a="Aborted("+a+")"),ce=!0,new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info.")}function nt(){return h.startsWith("data:application/octet-stream;base64,")}if(h="sql-wasm.wasm",!nt()){var Y=h;h=c.locateFile?c.locateFile(Y,_):_+Y}function H(){var a=h;try{if(a==h&&Q)return new Uint8Array(Q);if(S)return S(a);throw"both async and sync fetching of the wasm failed"}catch(l){Xe(l)}}function oe(a){for(;0<a.length;)a.shift()(c)}function ne(a,l="i8"){switch(l.endsWith("*")&&(l="*"),l){case"i1":case"i8":return te[a>>0];case"i16":return le[a>>1];case"i32":case"i64":return he[a>>2];case"float":return U[a>>2];case"double":return Te[a>>3];case"*":return z[a>>2];default:Xe("invalid type for getValue: "+l)}return null}function Z(a){var l="i32";switch(l.endsWith("*")&&(l="*"),l){case"i1":case"i8":te[a>>0]=0;break;case"i16":le[a>>1]=0;break;case"i32":he[a>>2]=0;break;case"i64":C=[0,(w=0,1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],he[a>>2]=C[0],he[a+4>>2]=C[1];break;case"float":U[a>>2]=0;break;case"double":Te[a>>3]=0;break;case"*":z[a>>2]=0;break;default:Xe("invalid type for setValue: "+l)}}var de=(a,l)=>{for(var d=0,x=a.length-1;0<=x;x--){var j=a[x];"."===j?a.splice(x,1):".."===j?(a.splice(x,1),d++):d&&(a.splice(x,1),d--)}if(l)for(;d;d--)a.unshift("..");return a},ve=a=>{var l="/"===a.charAt(0),d="/"===a.substr(-1);return(a=de(a.split("/").filter(x=>!!x),!l).join("/"))||l||(a="."),a&&d&&(a+="/"),(l?"/":"")+a},pe=a=>{var l=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(a).slice(1);return a=l[0],l=l[1],a||l?(l&&(l=l.substr(0,l.length-1)),a+l):"."},Ee=a=>{if("/"===a)return"/";var l=(a=(a=ve(a)).replace(/\/$/,"")).lastIndexOf("/");return-1===l?a:a.substr(l+1)};function Ie(){for(var a="",l=!1,d=arguments.length-1;-1<=d&&!l;d--){if("string"!=typeof(l=0<=d?arguments[d]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";a=l+"/"+a,l="/"===l.charAt(0)}return(l?"/":"")+(a=de(a.split("/").filter(x=>!!x),!l).join("/"))||"."}function rt(a,l){var d=Array(J(a)+1);return a=g(a,d,0,d.length),l&&(d.length=a),d}var vt=[];function it(a,l){vt[a]={input:[],output:[],Xa:l},lr(a,kt)}var qr,mr,R,P,kt={open:function(a){var l=vt[a.node.rdev];if(!l)throw new ee(43);a.tty=l,a.seekable=!1},close:function(a){a.tty.Xa.fsync(a.tty)},fsync:function(a){a.tty.Xa.fsync(a.tty)},read:function(a,l,d,x){if(!a.tty||!a.tty.Xa.tb)throw new ee(60);for(var j=0,K=0;K<x;K++){try{var re=a.tty.Xa.tb(a.tty)}catch{throw new ee(29)}if(void 0===re&&0===j)throw new ee(6);if(null==re)break;j++,l[d+K]=re}return j&&(a.node.timestamp=Date.now()),j},write:function(a,l,d,x){if(!a.tty||!a.tty.Xa.jb)throw new ee(60);try{for(var j=0;j<x;j++)a.tty.Xa.jb(a.tty,l[d+j])}catch{throw new ee(29)}return x&&(a.node.timestamp=Date.now()),j}},Ve={tb:function(a){if(!a.input.length){var l=null;if(E){var d=ie.alloc(256),x=0;try{x=N.readSync(St.stdin.fd,d,0,256,-1)}catch(j){if(!j.toString().includes("EOF"))throw j;x=0}l=0<x?d.slice(0,x).toString("utf-8"):null}else typeof window<"u"&&"function"==typeof window.prompt?null!==(l=window.prompt("Input: "))&&(l+="\n"):"function"==typeof readline&&null!==(l=readline())&&(l+="\n");if(!l)return null;a.input=rt(l,!0)}return a.input.shift()},jb:function(a,l){null===l||10===l?(V(I(a.output,0)),a.output=[]):0!=l&&a.output.push(l)},fsync:function(a){a.output&&0<a.output.length&&(V(I(a.output,0)),a.output=[])}},Tt={jb:function(a,l){null===l||10===l?(M(I(a.output,0)),a.output=[]):0!=l&&a.output.push(l)},fsync:function(a){a.output&&0<a.output.length&&(M(I(a.output,0)),a.output=[])}},Se={Qa:null,Ra:function(){return Se.createNode(null,"/",16895,0)},createNode:function(a,l,d,x){if(24576==(61440&d)||4096==(61440&d))throw new ee(63);return Se.Qa||(Se.Qa={dir:{node:{Pa:Se.Ga.Pa,Oa:Se.Ga.Oa,lookup:Se.Ga.lookup,ab:Se.Ga.ab,rename:Se.Ga.rename,unlink:Se.Ga.unlink,rmdir:Se.Ga.rmdir,readdir:Se.Ga.readdir,symlink:Se.Ga.symlink},stream:{Ta:Se.Ha.Ta}},file:{node:{Pa:Se.Ga.Pa,Oa:Se.Ga.Oa},stream:{Ta:Se.Ha.Ta,read:Se.Ha.read,write:Se.Ha.write,lb:Se.Ha.lb,bb:Se.Ha.bb,cb:Se.Ha.cb}},link:{node:{Pa:Se.Ga.Pa,Oa:Se.Ga.Oa,readlink:Se.Ga.readlink},stream:{}},pb:{node:{Pa:Se.Ga.Pa,Oa:Se.Ga.Oa},stream:cn}}),16384==(61440&(d=jr(a,l,d,x)).mode)?(d.Ga=Se.Qa.dir.node,d.Ha=Se.Qa.dir.stream,d.Ia={}):32768==(61440&d.mode)?(d.Ga=Se.Qa.file.node,d.Ha=Se.Qa.file.stream,d.Ma=0,d.Ia=null):40960==(61440&d.mode)?(d.Ga=Se.Qa.link.node,d.Ha=Se.Qa.link.stream):8192==(61440&d.mode)&&(d.Ga=Se.Qa.pb.node,d.Ha=Se.Qa.pb.stream),d.timestamp=Date.now(),a&&(a.Ia[l]=d,a.timestamp=d.timestamp),d},Jb:function(a){return a.Ia?a.Ia.subarray?a.Ia.subarray(0,a.Ma):new Uint8Array(a.Ia):new Uint8Array(0)},qb:function(a,l){var d=a.Ia?a.Ia.length:0;d>=l||(l=Math.max(l,d*(1048576>d?2:1.125)>>>0),0!=d&&(l=Math.max(l,256)),d=a.Ia,a.Ia=new Uint8Array(l),0<a.Ma&&a.Ia.set(d.subarray(0,a.Ma),0))},Gb:function(a,l){if(a.Ma!=l)if(0==l)a.Ia=null,a.Ma=0;else{var d=a.Ia;a.Ia=new Uint8Array(l),d&&a.Ia.set(d.subarray(0,Math.min(l,a.Ma))),a.Ma=l}},Ga:{Pa:function(a){var l={};return l.dev=8192==(61440&a.mode)?a.id:1,l.ino=a.id,l.mode=a.mode,l.nlink=1,l.uid=0,l.gid=0,l.rdev=a.rdev,l.size=16384==(61440&a.mode)?4096:32768==(61440&a.mode)?a.Ma:40960==(61440&a.mode)?a.link.length:0,l.atime=new Date(a.timestamp),l.mtime=new Date(a.timestamp),l.ctime=new Date(a.timestamp),l.Ab=4096,l.blocks=Math.ceil(l.size/l.Ab),l},Oa:function(a,l){void 0!==l.mode&&(a.mode=l.mode),void 0!==l.timestamp&&(a.timestamp=l.timestamp),void 0!==l.size&&Se.Gb(a,l.size)},lookup:function(){throw bt[44]},ab:function(a,l,d,x){return Se.createNode(a,l,d,x)},rename:function(a,l,d){if(16384==(61440&a.mode)){try{var x=jt(l,d)}catch{}if(x)for(var j in x.Ia)throw new ee(55)}delete a.parent.Ia[a.name],a.parent.timestamp=Date.now(),a.name=d,l.Ia[d]=a,l.timestamp=a.parent.timestamp,a.parent=l},unlink:function(a,l){delete a.Ia[l],a.timestamp=Date.now()},rmdir:function(a,l){var x,d=jt(a,l);for(x in d.Ia)throw new ee(55);delete a.Ia[l],a.timestamp=Date.now()},readdir:function(a){var d,l=[".",".."];for(d in a.Ia)a.Ia.hasOwnProperty(d)&&l.push(d);return l},symlink:function(a,l,d){return(a=Se.createNode(a,l,41471,0)).link=d,a},readlink:function(a){if(40960!=(61440&a.mode))throw new ee(28);return a.link}},Ha:{read:function(a,l,d,x,j){var K=a.node.Ia;if(j>=a.node.Ma)return 0;if(8<(a=Math.min(a.node.Ma-j,x))&&K.subarray)l.set(K.subarray(j,j+a),d);else for(x=0;x<a;x++)l[d+x]=K[j+x];return a},write:function(a,l,d,x,j,K){if(l.buffer===te.buffer&&(K=!1),!x)return 0;if((a=a.node).timestamp=Date.now(),l.subarray&&(!a.Ia||a.Ia.subarray)){if(K)return a.Ia=l.subarray(d,d+x),a.Ma=x;if(0===a.Ma&&0===j)return a.Ia=l.slice(d,d+x),a.Ma=x;if(j+x<=a.Ma)return a.Ia.set(l.subarray(d,d+x),j),x}if(Se.qb(a,j+x),a.Ia.subarray&&l.subarray)a.Ia.set(l.subarray(d,d+x),j);else for(K=0;K<x;K++)a.Ia[j+K]=l[d+K];return a.Ma=Math.max(a.Ma,j+x),x},Ta:function(a,l,d){if(1===d?l+=a.position:2===d&&32768==(61440&a.node.mode)&&(l+=a.node.Ma),0>l)throw new ee(28);return l},lb:function(a,l,d){Se.qb(a.node,l+d),a.node.Ma=Math.max(a.node.Ma,l+d)},bb:function(a,l,d,x,j){if(32768!=(61440&a.node.mode))throw new ee(43);if(a=a.node.Ia,2&j||a.buffer!==Pe){if((0<d||d+l<a.length)&&(a=a.subarray?a.subarray(d,d+l):Array.prototype.slice.call(a,d,d+l)),d=!0,l=65536*Math.ceil(l/65536),(j=Yn(65536,l))?(xe.fill(0,j,j+l),l=j):l=0,!l)throw new ee(48);te.set(a,l)}else d=!1,l=a.byteOffset;return{Fb:l,vb:d}},cb:function(a,l,d,x,j){if(32768!=(61440&a.node.mode))throw new ee(43);return 2&j||Se.Ha.write(a,l,0,x,d,!1),0}}},at=null,It={},lt=[],ar=1,et=null,Gt=!0,ee=null,bt={},st=(a,l={})=>{if(!(a=Ie("/",a)))return{path:"",node:null};if(8<(l=Object.assign({rb:!0,kb:0},l)).kb)throw new ee(32);a=de(a.split("/").filter(re=>!!re),!1);for(var d=at,x="/",j=0;j<a.length;j++){var K=j===a.length-1;if(K&&l.parent)break;if(d=jt(d,a[j]),x=ve(x+"/"+a[j]),d.Va&&(!K||K&&l.rb)&&(d=d.Va.root),!K||l.Sa)for(K=0;40960==(61440&d.mode);)if(d=$r(x),x=Ie(pe(x),d),d=st(x,{kb:l.kb+1}).node,40<K++)throw new ee(32)}return{path:x,node:d}},Vt=a=>{for(var l;;){if(a===a.parent)return a=a.Ra.ub,l?"/"!==a[a.length-1]?a+"/"+l:a+l:a;l=l?a.name+"/"+l:a.name,a=a.parent}},ur=(a,l)=>{for(var d=0,x=0;x<l.length;x++)d=(d<<5)-d+l.charCodeAt(x)|0;return(a+d>>>0)%et.length},Ir=a=>{var l=ur(a.parent.id,a.name);if(et[l]===a)et[l]=a.Wa;else for(l=et[l];l;){if(l.Wa===a){l.Wa=a.Wa;break}l=l.Wa}},jt=(a,l)=>{var d;if(d=(d=Lt(a,"x"))?d:a.Ga.lookup?0:2)throw new ee(d,a);for(d=et[ur(a.id,l)];d;d=d.Wa)if(d.parent.id===a.id&&d.name===l)return d;return a.Ga.lookup(a,l)},jr=(a,l,d,x)=>(a=new ln(a,l,d,x),l=ur(a.parent.id,a.name),a.Wa=et[l],et[l]=a),an={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Rr=a=>{var l=["r","w","rw"][3&a];return 512&a&&(l+="w"),l},Lt=(a,l)=>Gt?0:!l.includes("r")||292&a.mode?l.includes("w")&&!(146&a.mode)||l.includes("x")&&!(73&a.mode)?2:0:2,Or=(a,l)=>{try{return jt(a,l),20}catch{}return Lt(a,"wx")},cr=(a,l,d)=>{try{var x=jt(a,l)}catch(j){return j.Ka}if(a=Lt(a,"wx"))return a;if(d){if(16384!=(61440&x.mode))return 54;if(x===x.parent||"/"===Vt(x))return 10}else if(16384==(61440&x.mode))return 31;return 0},Nr=(a,l)=>(R||((R=function(){this.$a={}}).prototype={},Object.defineProperties(R.prototype,{object:{get:function(){return this.node},set:function(d){this.node=d}},flags:{get:function(){return this.$a.flags},set:function(d){this.$a.flags=d}},position:{get:function(){return this.$a.position},set:function(d){this.$a.position=d}}})),a=Object.assign(new R,a),l=((a=0)=>{for(;4096>=a;a++)if(!lt[a])return a;throw new ee(33)})(l),a.fd=l,lt[l]=a),cn={open:a=>{a.Ha=It[a.node.rdev].Ha,a.Ha.open&&a.Ha.open(a)},Ta:()=>{throw new ee(70)}},lr=(a,l)=>{It[a]={Ha:l}},Cr=(a,l)=>{var d="/"===l,x=!l;if(d&&at)throw new ee(10);if(!d&&!x){var j=st(l,{rb:!1});if(l=j.path,(j=j.node).Va)throw new ee(10);if(16384!=(61440&j.mode))throw new ee(54)}(a=a.Ra(l={type:a,Kb:{},ub:l,Eb:[]})).Ra=l,l.root=a,d?at=a:j&&(j.Va=l,j.Ra&&j.Ra.Eb.push(l))},tr=(a,l,d)=>{var x=st(a,{parent:!0}).node;if(!(a=Ee(a))||"."===a||".."===a)throw new ee(28);var j=Or(x,a);if(j)throw new ee(j);if(!x.Ga.ab)throw new ee(63);return x.Ga.ab(x,a,l,d)},dt=(a,l)=>tr(a,1023&(void 0!==l?l:511)|16384,0),rr=(a,l,d)=>{typeof d>"u"&&(d=l,l=438),tr(a,8192|l,d)},fr=(a,l)=>{if(!Ie(a))throw new ee(44);var d=st(l,{parent:!0}).node;if(!d)throw new ee(44);l=Ee(l);var x=Or(d,l);if(x)throw new ee(x);if(!d.Ga.symlink)throw new ee(63);d.Ga.symlink(d,l,a)},Br=a=>{var l=st(a,{parent:!0}).node;a=Ee(a);var d=jt(l,a),x=cr(l,a,!0);if(x)throw new ee(x);if(!l.Ga.rmdir)throw new ee(63);if(d.Va)throw new ee(10);l.Ga.rmdir(l,a),Ir(d)},Fr=a=>{var l=st(a,{parent:!0}).node;if(!l)throw new ee(44);a=Ee(a);var d=jt(l,a),x=cr(l,a,!1);if(x)throw new ee(x);if(!l.Ga.unlink)throw new ee(63);if(d.Va)throw new ee(10);l.Ga.unlink(l,a),Ir(d)},$r=a=>{if(!(a=st(a).node))throw new ee(44);if(!a.Ga.readlink)throw new ee(28);return Ie(Vt(a.parent),a.Ga.readlink(a))},Ht=(a,l)=>{if(!(a=st(a,{Sa:!l}).node))throw new ee(44);if(!a.Ga.Pa)throw new ee(63);return a.Ga.Pa(a)},Lr=a=>Ht(a,!0),nr=(a,l)=>{if(!(a="string"==typeof a?st(a,{Sa:!0}).node:a).Ga.Oa)throw new ee(63);a.Ga.Oa(a,{mode:4095&l|-4096&a.mode,timestamp:Date.now()})},hr=(a,l)=>{if(0>l)throw new ee(28);if(!(a="string"==typeof a?st(a,{Sa:!0}).node:a).Ga.Oa)throw new ee(63);if(16384==(61440&a.mode))throw new ee(31);if(32768!=(61440&a.mode))throw new ee(28);var d=Lt(a,"w");if(d)throw new ee(d);a.Ga.Oa(a,{size:l,timestamp:Date.now()})},mt=(a,l,d)=>{if(""===a)throw new ee(44);if("string"==typeof l){var x=an[l];if(typeof x>"u")throw Error("Unknown file open mode: "+l);l=x}if(d=64&l?4095&(typeof d>"u"?438:d)|32768:0,"object"==typeof a)var j=a;else{a=ve(a);try{j=st(a,{Sa:!(131072&l)}).node}catch{}}if(x=!1,64&l)if(j){if(128&l)throw new ee(20)}else j=tr(a,d,0),x=!0;if(!j)throw new ee(44);if(8192==(61440&j.mode)&&(l&=-513),65536&l&&16384!=(61440&j.mode))throw new ee(54);if(!x&&(d=j?40960==(61440&j.mode)?32:16384==(61440&j.mode)&&("r"!==Rr(l)||512&l)?31:Lt(j,Rr(l)):44))throw new ee(d);return 512&l&&!x&&hr(j,0),l&=-131713,(j=Nr({node:j,path:Vt(j),flags:l,seekable:!0,position:0,Ha:j.Ha,Ib:[],error:!1})).Ha.open&&j.Ha.open(j),!c.logReadFiles||1&l||(P||(P={}),a in P||(P[a]=1)),j},ir=a=>{if(null===a.fd)throw new ee(8);a.hb&&(a.hb=null);try{a.Ha.close&&a.Ha.close(a)}catch(l){throw l}finally{lt[a.fd]=null}a.fd=null},Rt=(a,l,d)=>{if(null===a.fd)throw new ee(8);if(!a.seekable||!a.Ha.Ta)throw new ee(70);if(0!=d&&1!=d&&2!=d)throw new ee(28);a.position=a.Ha.Ta(a,l,d),a.Ib=[]},zr=(a,l,d,x,j)=>{if(0>x||0>j)throw new ee(28);if(null===a.fd)throw new ee(8);if(1==(2097155&a.flags))throw new ee(8);if(16384==(61440&a.node.mode))throw new ee(31);if(!a.Ha.read)throw new ee(28);var K=typeof j<"u";if(K){if(!a.seekable)throw new ee(70)}else j=a.position;return l=a.Ha.read(a,l,d,x,j),K||(a.position+=l),l},Kt=(a,l,d,x,j)=>{if(0>x||0>j)throw new ee(28);if(null===a.fd)throw new ee(8);if(!(2097155&a.flags))throw new ee(8);if(16384==(61440&a.node.mode))throw new ee(31);if(!a.Ha.write)throw new ee(28);a.seekable&&1024&a.flags&&Rt(a,0,2);var K=typeof j<"u";if(K){if(!a.seekable)throw new ee(70)}else j=a.position;return l=a.Ha.write(a,l,d,x,j,void 0),K||(a.position+=l),l},dr=a=>{var l,d=mt(a,d||0);a=Ht(a).size;var x=new Uint8Array(a);return zr(d,x,0,a,0),l=x,ir(d),l},Mr=()=>{ee||((ee=function(a,l){this.node=l,this.Hb=function(d){this.Ka=d},this.Hb(a),this.message="FS error"}).prototype=Error(),ee.prototype.constructor=ee,[44].forEach(a=>{bt[a]=new ee(a),bt[a].stack="<generic error, no stack>"}))},sr=(a,l)=>{var d=0;return a&&(d|=365),l&&(d|=146),d},Yt=(a,l,d)=>{a=ve("/dev/"+a);var x=sr(!!l,!!d);mr||(mr=64);var j=mr++<<8|0;lr(j,{open:K=>{K.seekable=!1},close:()=>{d&&d.buffer&&d.buffer.length&&d(10)},read:(K,re,Ae,ze)=>{for(var Fe=0,Je=0;Je<ze;Je++){try{var Ct=l()}catch{throw new ee(29)}if(void 0===Ct&&0===Fe)throw new ee(6);if(null==Ct)break;Fe++,re[Ae+Je]=Ct}return Fe&&(K.node.timestamp=Date.now()),Fe},write:(K,re,Ae,ze)=>{for(var Fe=0;Fe<ze;Fe++)try{d(re[Ae+Fe])}catch{throw new ee(29)}return ze&&(K.node.timestamp=Date.now()),Fe}}),rr(a,x,j)},b={};function F(a,l,d){if("/"===l.charAt(0))return l;if(a=-100===a?"/":ae(a).path,0==l.length){if(!d)throw new ee(44);return a}return ve(a+"/"+l)}function $(a,l,d){try{var x=a(l)}catch(j){if(j&&j.node&&ve(l)!==ve(Vt(j.node)))return-54;throw j}return he[d>>2]=x.dev,he[d+8>>2]=x.ino,he[d+12>>2]=x.mode,z[d+16>>2]=x.nlink,he[d+20>>2]=x.uid,he[d+24>>2]=x.gid,he[d+28>>2]=x.rdev,C=[x.size>>>0,(w=x.size,1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],he[d+40>>2]=C[0],he[d+44>>2]=C[1],he[d+48>>2]=4096,he[d+52>>2]=x.blocks,C=[Math.floor(x.atime.getTime()/1e3)>>>0,(w=Math.floor(x.atime.getTime()/1e3),1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],he[d+56>>2]=C[0],he[d+60>>2]=C[1],z[d+64>>2]=0,C=[Math.floor(x.mtime.getTime()/1e3)>>>0,(w=Math.floor(x.mtime.getTime()/1e3),1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],he[d+72>>2]=C[0],he[d+76>>2]=C[1],z[d+80>>2]=0,C=[Math.floor(x.ctime.getTime()/1e3)>>>0,(w=Math.floor(x.ctime.getTime()/1e3),1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],he[d+88>>2]=C[0],he[d+92>>2]=C[1],z[d+96>>2]=0,C=[x.ino>>>0,(w=x.ino,1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],he[d+104>>2]=C[0],he[d+108>>2]=C[1],0}var je,B=void 0;function X(){return he[(B+=4)-4>>2]}function ae(a){if(!(a=lt[a]))throw new ee(8);return a}function fe(a){return z[a>>2]+4294967296*he[a+4>>2]}function me(a){var l=J(a)+1,d=Qt(l);return d&&g(a,te,d,l),d}je=E?()=>{var a=St.hrtime();return 1e3*a[0]+a[1]/1e6}:()=>performance.now();var Be={};function $e(){if(!He){var l,a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(l in Be)void 0===Be[l]?delete a[l]:a[l]=Be[l];var d=[];for(l in a)d.push(l+"="+a[l]);He=d}return He}var He,Me=void 0,ot=[];function Ot(a,l){if(!Me){var d=ye.length;if(Me=new WeakMap)for(var x=0;x<0+d;x++){var j=ye.get(x);j&&Me.set(j,x)}}if(Me.has(a))return Me.get(a);if(ot.length)d=ot.pop();else{try{ye.grow(1)}catch(Ae){throw Ae instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Ae}d=ye.length-1}try{ye.set(d,a)}catch(Ae){if(!(Ae instanceof TypeError))throw Ae;if("function"==typeof WebAssembly.Function){x=WebAssembly.Function,j={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var K={parameters:[],results:"v"==l[0]?[]:[j[l[0]]]},re=1;re<l.length;++re)K.parameters.push(j[l[re]]);l=new x(K,a)}else{for(x=[1,96],j=l.slice(0,1),K={i:127,p:127,j:126,f:125,d:124},128>(re=(l=l.slice(1)).length)?x.push(re):x.push(re%128|128,re>>7),re=0;re<l.length;++re)x.push(K[l[re]]);"v"==j?x.push(0):x.push(1,K[j]),l=[0,97,115,109,1,0,0,0,1],128>(j=x.length)?l.push(j):l.push(j%128|128,j>>7),l.push.apply(l,x),l.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),l=new WebAssembly.Module(new Uint8Array(l)),l=new WebAssembly.Instance(l,{e:{f:a}}).exports.f}ye.set(d,l)}return Me.set(a,d),d}function Nt(a){Me.delete(ye.get(a)),ot.push(a)}function pr(a){var l=Qt(a.length);return a.subarray||a.slice||(a=new Uint8Array(a)),xe.set(a,l),l}function ln(a,l,d,x){a||(a=this),this.parent=a,this.Ra=a.Ra,this.Va=null,this.id=ar++,this.name=l,this.mode=d,this.Ga={},this.Ha={},this.rdev=x}Object.defineProperties(ln.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(a){a?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(a){a?this.mode|=146:this.mode&=-147}}}),Mr(),et=Array(4096),Cr(Se,"/"),dt("/tmp"),dt("/home"),dt("/home/web_user"),(()=>{dt("/dev"),lr(259,{read:()=>0,write:(l,d,x,j)=>j}),rr("/dev/null",259),it(1280,Ve),it(1536,Tt),rr("/dev/tty",1280),rr("/dev/tty1",1536);var a=function Le(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var a=new Uint8Array(1);return()=>(crypto.getRandomValues(a),a[0])}if(E)try{var l=Wn;return()=>l.randomBytes(1)[0]}catch{}return()=>Xe("randomDevice")}();Yt("random",a),Yt("urandom",a),dt("/dev/shm"),dt("/dev/shm/tmp")})(),(()=>{dt("/proc");var a=dt("/proc/self");dt("/proc/self/fd"),Cr({Ra:()=>{var l=jr(a,"fd",16895,73);return l.Ga={lookup:(d,x)=>{var j=lt[+x];if(!j)throw new ee(8);return(d={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>j.path}}).parent=d}},l}},"/proc/self/fd")})();var fn={a:function(a,l,d,x){Xe("Assertion failed: "+W(a)+", at: "+[l?W(l):"unknown filename",d,x?W(x):"unknown function"])},h:function(a,l){try{return a=W(a),nr(a,l),0}catch(d){if(typeof b>"u"||!(d instanceof ee))throw d;return-d.Ka}},H:function(a,l,d){try{if(l=F(a,l=W(l)),-8&d)return-28;var x=st(l,{Sa:!0}).node;return x?(a="",4&d&&(a+="r"),2&d&&(a+="w"),1&d&&(a+="x"),a&&Lt(x,a)?-2:0):-44}catch(j){if(typeof b>"u"||!(j instanceof ee))throw j;return-j.Ka}},i:function(a,l){try{var d=lt[a];if(!d)throw new ee(8);return nr(d.node,l),0}catch(x){if(typeof b>"u"||!(x instanceof ee))throw x;return-x.Ka}},g:function(a){try{var l=lt[a];if(!l)throw new ee(8);var d=l.node,x="string"==typeof d?st(d,{Sa:!0}).node:d;if(!x.Ga.Oa)throw new ee(63);return x.Ga.Oa(x,{timestamp:Date.now()}),0}catch(j){if(typeof b>"u"||!(j instanceof ee))throw j;return-j.Ka}},b:function(a,l,d){B=d;try{var x=ae(a);switch(l){case 0:var j=X();return 0>j?-28:Nr(x,j).fd;case 1:case 2:case 6:case 7:return 0;case 3:return x.flags;case 4:return j=X(),x.flags|=j,0;case 5:return j=X(),le[j+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return he[Zr()>>2]=28,-1}}catch(K){if(typeof b>"u"||!(K instanceof ee))throw K;return-K.Ka}},G:function(a,l){try{var d=ae(a);return $(Ht,d.path,l)}catch(x){if(typeof b>"u"||!(x instanceof ee))throw x;return-x.Ka}},l:function(a,l,d){try{if(l=d+2097152>>>0<4194305-!!l?(l>>>0)+4294967296*d:NaN,isNaN(l))return-61;var x=lt[a];if(!x)throw new ee(8);if(!(2097155&x.flags))throw new ee(28);return hr(x.node,l),0}catch(j){if(typeof b>"u"||!(j instanceof ee))throw j;return-j.Ka}},B:function(a,l){try{if(0===l)return-28;var d=J("/")+1;return l<d?-68:(g("/",xe,a,l),d)}catch(x){if(typeof b>"u"||!(x instanceof ee))throw x;return-x.Ka}},E:function(a,l){try{return a=W(a),$(Lr,a,l)}catch(d){if(typeof b>"u"||!(d instanceof ee))throw d;return-d.Ka}},y:function(a,l,d){try{return l=F(a,l=W(l)),"/"===(l=ve(l))[l.length-1]&&(l=l.substr(0,l.length-1)),dt(l,d),0}catch(x){if(typeof b>"u"||!(x instanceof ee))throw x;return-x.Ka}},D:function(a,l,d,x){try{l=W(l);var j=256&x;return l=F(a,l,4096&x),$(j?Lr:Ht,l,d)}catch(K){if(typeof b>"u"||!(K instanceof ee))throw K;return-K.Ka}},v:function(a,l,d,x){B=x;try{l=F(a,l=W(l));var j=x?X():0;return mt(l,d,j).fd}catch(K){if(typeof b>"u"||!(K instanceof ee))throw K;return-K.Ka}},t:function(a,l,d,x){try{if(l=F(a,l=W(l)),0>=x)return-28;var j=$r(l),K=Math.min(x,J(j)),re=te[d+K];return g(j,xe,d,x+1),te[d+K]=re,K}catch(Ae){if(typeof b>"u"||!(Ae instanceof ee))throw Ae;return-Ae.Ka}},s:function(a){try{return a=W(a),Br(a),0}catch(l){if(typeof b>"u"||!(l instanceof ee))throw l;return-l.Ka}},F:function(a,l){try{return a=W(a),$(Ht,a,l)}catch(d){if(typeof b>"u"||!(d instanceof ee))throw d;return-d.Ka}},p:function(a,l,d){try{return l=F(a,l=W(l)),0===d?Fr(l):512===d?Br(l):Xe("Invalid flags passed to unlinkat"),0}catch(x){if(typeof b>"u"||!(x instanceof ee))throw x;return-x.Ka}},o:function(a,l,d){try{if(l=F(a,l=W(l),!0),d){var x=fe(d),j=he[d+8>>2];K=1e3*x+j/1e6,re=1e3*(x=fe(d+=16))+(j=he[d+8>>2])/1e6}else var K=Date.now(),re=K;a=K;var Ae=st(l,{Sa:!0}).node;return Ae.Ga.Oa(Ae,{timestamp:Math.max(a,re)}),0}catch(ze){if(typeof b>"u"||!(ze instanceof ee))throw ze;return-ze.Ka}},e:function(){return Date.now()},j:function(a,l){a=new Date(1e3*fe(a)),he[l>>2]=a.getSeconds(),he[l+4>>2]=a.getMinutes(),he[l+8>>2]=a.getHours(),he[l+12>>2]=a.getDate(),he[l+16>>2]=a.getMonth(),he[l+20>>2]=a.getFullYear()-1900,he[l+24>>2]=a.getDay();var d=new Date(a.getFullYear(),0,1);he[l+28>>2]=(a.getTime()-d.getTime())/864e5|0,he[l+36>>2]=-60*a.getTimezoneOffset();var x=new Date(a.getFullYear(),6,1).getTimezoneOffset();d=d.getTimezoneOffset(),he[l+32>>2]=0|(x!=d&&a.getTimezoneOffset()==Math.min(d,x))},w:function(a,l,d,x,j,K){try{var re=ae(x);if(2&l&&!(2&d)&&2!=(2097155&re.flags))throw new ee(2);if(1==(2097155&re.flags))throw new ee(2);if(!re.Ha.bb)throw new ee(43);var Ae=re.Ha.bb(re,a,j,l,d),ze=Ae.Fb;return he[K>>2]=Ae.vb,ze}catch(Fe){if(typeof b>"u"||!(Fe instanceof ee))throw Fe;return-Fe.Ka}},x:function(a,l,d,x,j,K){try{var re=ae(j);if(2&d){var Ae=xe.slice(a,a+l);re&&re.Ha.cb&&re.Ha.cb(re,Ae,K,l,x)}}catch(ze){if(typeof b>"u"||!(ze instanceof ee))throw ze;return-ze.Ka}},n:function we(a,l,d){we.Bb||(we.Bb=!0,function ge(a,l,d){function x(ze){return(ze=ze.toTimeString().match(/\(([A-Za-z ]+)\)$/))?ze[1]:"GMT"}var j=(new Date).getFullYear(),K=new Date(j,0,1),re=new Date(j,6,1);j=K.getTimezoneOffset();var Ae=re.getTimezoneOffset();he[a>>2]=60*Math.max(j,Ae),he[l>>2]=+(j!=Ae),a=x(K),l=x(re),a=me(a),l=me(l),Ae<j?(z[d>>2]=a,z[d+4>>2]=l):(z[d>>2]=l,z[d+4>>2]=a)}(a,l,d))},q:function(){return 2147483648},d:je,c:function(a){var l=xe.length;if(2147483648<(a>>>=0))return!1;for(var d=1;4>=d;d*=2){var x=l*(1+.2/d);x=Math.min(x,a+100663296);var j=Math;x=Math.max(a,x),j=j.min.call(j,2147483648,x+(65536-x%65536)%65536);e:{try{G.grow(j-Pe.byteLength+65535>>>16),be();var K=1;break e}catch{}K=void 0}if(K)return!0}return!1},z:function(a,l){var d=0;return $e().forEach(function(x,j){var K=l+d;for(j=z[a+4*j>>2]=K,K=0;K<x.length;++K)te[j++>>0]=x.charCodeAt(K);te[j>>0]=0,d+=x.length+1}),0},A:function(a,l){var d=$e();z[a>>2]=d.length;var x=0;return d.forEach(function(j){x+=j.length+1}),z[l>>2]=x,0},f:function(a){try{var l=ae(a);return ir(l),0}catch(d){if(typeof b>"u"||!(d instanceof ee))throw d;return d.Ka}},m:function(a,l){try{var d=ae(a);return te[l>>0]=d.tty?2:16384==(61440&d.mode)?3:40960==(61440&d.mode)?7:4,0}catch(x){if(typeof b>"u"||!(x instanceof ee))throw x;return x.Ka}},u:function(a,l,d,x){try{e:{var j=ae(a);a=l;for(var K=l=0;K<d;K++){var re=z[a>>2],Ae=z[a+4>>2];a+=8;var ze=zr(j,te,re,Ae);if(0>ze){var Fe=-1;break e}if(l+=ze,ze<Ae)break}Fe=l}return z[x>>2]=Fe,0}catch(Je){if(typeof b>"u"||!(Je instanceof ee))throw Je;return Je.Ka}},k:function(a,l,d,x,j){try{if(l=d+2097152>>>0<4194305-!!l?(l>>>0)+4294967296*d:NaN,isNaN(l))return 61;var K=ae(a);return Rt(K,l,x),C=[K.position>>>0,(w=K.position,1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],he[j>>2]=C[0],he[j+4>>2]=C[1],K.hb&&0===l&&0===x&&(K.hb=null),0}catch(re){if(typeof b>"u"||!(re instanceof ee))throw re;return re.Ka}},C:function(a){try{var l=ae(a);return l.Ha&&l.Ha.fsync?l.Ha.fsync(l):0}catch(d){if(typeof b>"u"||!(d instanceof ee))throw d;return d.Ka}},r:function(a,l,d,x){try{e:{var j=ae(a);a=l;for(var K=l=0;K<d;K++){var re=z[a>>2],Ae=z[a+4>>2];a+=8;var ze=Kt(j,te,re,Ae);if(0>ze){var Fe=-1;break e}l+=ze}Fe=l}return z[x>>2]=Fe,0}catch(Je){if(typeof b>"u"||!(Je instanceof ee))throw Je;return Je.Ka}}};(function(){function a(j){c.asm=j.exports,G=c.asm.I,be(),ye=c.asm.Aa,Qe.unshift(c.asm.J),Ue--,c.monitorRunDependencies&&c.monitorRunDependencies(Ue),0==Ue&&Ze&&(j=Ze,Ze=null,j())}function l(j){a(j.instance)}function d(j){return function D(){if(!Q&&(v||p)){if("function"==typeof fetch&&!h.startsWith("file://"))return fetch(h,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+h+"'";return a.arrayBuffer()}).catch(function(){return H()});if(k)return new Promise(function(a,l){k(h,function(d){a(new Uint8Array(d))},l)})}return Promise.resolve().then(function(){return H()})}().then(function(K){return WebAssembly.instantiate(K,x)}).then(function(K){return K}).then(j,function(K){M("failed to asynchronously prepare wasm: "+K),Xe(K)})}var x={a:fn};if(Ue++,c.monitorRunDependencies&&c.monitorRunDependencies(Ue),c.instantiateWasm)try{return c.instantiateWasm(x,a)}catch(j){return M("Module.instantiateWasm callback failed with error: "+j),!1}Q||"function"!=typeof WebAssembly.instantiateStreaming||nt()||h.startsWith("file://")||E||"function"!=typeof fetch?d(l):fetch(h,{credentials:"same-origin"}).then(function(j){return WebAssembly.instantiateStreaming(j,x).then(l,function(K){return M("wasm streaming compile failed: "+K),M("falling back to ArrayBuffer instantiation"),d(l)})})})(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.J).apply(null,arguments)},c._sqlite3_free=function(){return(c._sqlite3_free=c.asm.K).apply(null,arguments)},c._sqlite3_value_double=function(){return(c._sqlite3_value_double=c.asm.L).apply(null,arguments)},c._sqlite3_value_text=function(){return(c._sqlite3_value_text=c.asm.M).apply(null,arguments)};var Zr=c.___errno_location=function(){return(Zr=c.___errno_location=c.asm.N).apply(null,arguments)};c._sqlite3_prepare_v2=function(){return(c._sqlite3_prepare_v2=c.asm.O).apply(null,arguments)},c._sqlite3_step=function(){return(c._sqlite3_step=c.asm.P).apply(null,arguments)},c._sqlite3_finalize=function(){return(c._sqlite3_finalize=c.asm.Q).apply(null,arguments)},c._sqlite3_reset=function(){return(c._sqlite3_reset=c.asm.R).apply(null,arguments)},c._sqlite3_value_int=function(){return(c._sqlite3_value_int=c.asm.S).apply(null,arguments)},c._sqlite3_clear_bindings=function(){return(c._sqlite3_clear_bindings=c.asm.T).apply(null,arguments)},c._sqlite3_value_blob=function(){return(c._sqlite3_value_blob=c.asm.U).apply(null,arguments)},c._sqlite3_value_bytes=function(){return(c._sqlite3_value_bytes=c.asm.V).apply(null,arguments)},c._sqlite3_value_type=function(){return(c._sqlite3_value_type=c.asm.W).apply(null,arguments)},c._sqlite3_result_blob=function(){return(c._sqlite3_result_blob=c.asm.X).apply(null,arguments)},c._sqlite3_result_double=function(){return(c._sqlite3_result_double=c.asm.Y).apply(null,arguments)},c._sqlite3_result_error=function(){return(c._sqlite3_result_error=c.asm.Z).apply(null,arguments)},c._sqlite3_result_int=function(){return(c._sqlite3_result_int=c.asm._).apply(null,arguments)},c._sqlite3_result_int64=function(){return(c._sqlite3_result_int64=c.asm.$).apply(null,arguments)},c._sqlite3_result_null=function(){return(c._sqlite3_result_null=c.asm.aa).apply(null,arguments)},c._sqlite3_result_text=function(){return(c._sqlite3_result_text=c.asm.ba).apply(null,arguments)},c._sqlite3_sql=function(){return(c._sqlite3_sql=c.asm.ca).apply(null,arguments)},c._sqlite3_aggregate_context=function(){return(c._sqlite3_aggregate_context=c.asm.da).apply(null,arguments)},c._sqlite3_column_count=function(){return(c._sqlite3_column_count=c.asm.ea).apply(null,arguments)},c._sqlite3_data_count=function(){return(c._sqlite3_data_count=c.asm.fa).apply(null,arguments)},c._sqlite3_column_blob=function(){return(c._sqlite3_column_blob=c.asm.ga).apply(null,arguments)},c._sqlite3_column_bytes=function(){return(c._sqlite3_column_bytes=c.asm.ha).apply(null,arguments)},c._sqlite3_column_double=function(){return(c._sqlite3_column_double=c.asm.ia).apply(null,arguments)},c._sqlite3_column_text=function(){return(c._sqlite3_column_text=c.asm.ja).apply(null,arguments)},c._sqlite3_column_type=function(){return(c._sqlite3_column_type=c.asm.ka).apply(null,arguments)},c._sqlite3_column_name=function(){return(c._sqlite3_column_name=c.asm.la).apply(null,arguments)},c._sqlite3_bind_blob=function(){return(c._sqlite3_bind_blob=c.asm.ma).apply(null,arguments)},c._sqlite3_bind_double=function(){return(c._sqlite3_bind_double=c.asm.na).apply(null,arguments)},c._sqlite3_bind_int=function(){return(c._sqlite3_bind_int=c.asm.oa).apply(null,arguments)},c._sqlite3_bind_text=function(){return(c._sqlite3_bind_text=c.asm.pa).apply(null,arguments)},c._sqlite3_bind_parameter_index=function(){return(c._sqlite3_bind_parameter_index=c.asm.qa).apply(null,arguments)},c._sqlite3_normalized_sql=function(){return(c._sqlite3_normalized_sql=c.asm.ra).apply(null,arguments)},c._sqlite3_errmsg=function(){return(c._sqlite3_errmsg=c.asm.sa).apply(null,arguments)},c._sqlite3_exec=function(){return(c._sqlite3_exec=c.asm.ta).apply(null,arguments)},c._sqlite3_changes=function(){return(c._sqlite3_changes=c.asm.ua).apply(null,arguments)},c._sqlite3_close_v2=function(){return(c._sqlite3_close_v2=c.asm.va).apply(null,arguments)},c._sqlite3_create_function_v2=function(){return(c._sqlite3_create_function_v2=c.asm.wa).apply(null,arguments)},c._sqlite3_open=function(){return(c._sqlite3_open=c.asm.xa).apply(null,arguments)};var Qt=c._malloc=function(){return(Qt=c._malloc=c.asm.ya).apply(null,arguments)},Ur=c._free=function(){return(Ur=c._free=c.asm.za).apply(null,arguments)};c._RegisterExtensionFunctions=function(){return(c._RegisterExtensionFunctions=c.asm.Ba).apply(null,arguments)};var Wr,Yn=c._emscripten_builtin_memalign=function(){return(Yn=c._emscripten_builtin_memalign=c.asm.Ca).apply(null,arguments)},gr=c.stackSave=function(){return(gr=c.stackSave=c.asm.Da).apply(null,arguments)},vr=c.stackRestore=function(){return(vr=c.stackRestore=c.asm.Ea).apply(null,arguments)},zt=c.stackAlloc=function(){return(zt=c.stackAlloc=c.asm.Fa).apply(null,arguments)};function Qn(){function a(){if(!Wr&&(Wr=!0,c.calledRun=!0,!ce)){if(c.noFSInit||qr||(qr=!0,Mr(),c.stdin=c.stdin,c.stdout=c.stdout,c.stderr=c.stderr,c.stdin?Yt("stdin",c.stdin):fr("/dev/tty","/dev/stdin"),c.stdout?Yt("stdout",null,c.stdout):fr("/dev/tty","/dev/stdout"),c.stderr?Yt("stderr",null,c.stderr):fr("/dev/tty1","/dev/stderr"),mt("/dev/stdin",0),mt("/dev/stdout",1),mt("/dev/stderr",1)),Gt=!1,oe(Qe),c.onRuntimeInitialized&&c.onRuntimeInitialized(),c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var l=c.postRun.shift();Re.unshift(l)}oe(Re)}}if(!(0<Ue)){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)Ce();oe(Ge),0<Ue||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),a()},1)):a())}}if(c.UTF8ToString=W,c.stackAlloc=zt,c.stackSave=gr,c.stackRestore=vr,c.cwrap=function(a,l,d,x){var j=(d=d||[]).every(K=>"number"===K||"boolean"===K);return"string"!==l&&j&&!x?c["_"+a]:function(){return function yr(a,l,d,x){var j={string:Fe=>{var Je=0;if(null!=Fe&&0!==Fe){var Ct=1+(Fe.length<<2);Je=zt(Ct),g(Fe,xe,Je,Ct)}return Je},array:Fe=>{var Je=zt(Fe.length);return te.set(Fe,Je),Je}};a=c["_"+a];var Fe,K=[],re=0;if(x)for(var Ae=0;Ae<x.length;Ae++){var ze=j[d[Ae]];ze?(0===re&&(re=gr()),K[Ae]=ze(x[Ae])):K[Ae]=x[Ae]}return Fe=d=a.apply(null,K),0!==re&&vr(re),"string"===l?W(Fe):"boolean"===l?!!Fe:Fe}(a,l,d,arguments)}},Ze=function a(){Wr||Qn(),Wr||(Ze=a)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return Qn(),u}),e)};s.exports=r,s.exports.default=r});class Ne{static getDBFromStore(t,e){return(0,O.Z)(function*(){try{const r=yield e.getItem(t);return Promise.resolve(r)}catch(r){return Promise.reject(`GetDBFromStore: ${r.message}`)}})()}static setInitialDBToStore(t,e){return(0,O.Z)(function*(){try{return yield e.setItem(t,null),Promise.resolve()}catch(r){return Promise.reject(`SetInitialDBToStore: ${r.message}`)}})()}static setDBToStore(t,e,r){return(0,O.Z)(function*(){try{const n=t.export();return yield Ne.saveDBToStore(e,n,r),Promise.resolve()}catch(n){return Promise.reject(`SetDBToStore: ${n.message}`)}})()}static saveDBToStore(t,e,r){return(0,O.Z)(function*(){try{return yield r.setItem(t,e),Promise.resolve()}catch(n){return Promise.reject(`SaveDBToStore: ${n.message}`)}})()}static removeDBFromStore(t,e){return(0,O.Z)(function*(){try{return yield e.removeItem(t),Promise.resolve()}catch(r){return Promise.reject(`RemoveDBFromStore: ${r.message}`)}})()}static isDBInStore(t,e){return(0,O.Z)(function*(){try{const r=yield e.getItem(t);return Promise.resolve(null!=r&&r.length>0)}catch(r){return Promise.reject(`IsDBInStore: ${r}`)}})()}static restoreDBFromStore(t,e,r){return(0,O.Z)(function*(){const n=`${e}-${t}`;try{if(yield Ne.isDBInStore(n,r)){if(yield Ne.isDBInStore(t,r)){const u=yield Ne.getDBFromStore(n,r);return yield Ne.saveDBToStore(t,u,r),yield Ne.removeDBFromStore(n,r),Promise.resolve()}return Promise.reject(new Error(`RestoreDBFromStore: ${t} does not exist`))}return Promise.reject(new Error(`RestoreDBFromStore: ${n} does not exist`))}catch(i){return Promise.reject(`RestoreDBFromStore: ${i.message}`)}})()}static copyDBToStore(t,e,r){return(0,O.Z)(function*(){try{if(yield Ne.isDBInStore(t,r)){const i=yield Ne.getDBFromStore(t,r);return yield Ne.saveDBToStore(e,i,r),Promise.resolve()}return Promise.reject(new Error(`CopyDBToStore: ${t} does not exist`))}catch(n){return Promise.reject(`CopyDBToStore: ${n.message}`)}})()}static getDBListFromStore(t){return(0,O.Z)(function*(){try{const e=yield t.keys();return Promise.resolve(e)}catch(e){return Promise.reject(`GetDBListFromStore: ${e.message}`)}})()}}class gt{static getTablesNames(t){return(0,O.Z)(function*(){let e="SELECT name FROM sqlite_master WHERE ";e+="type='table' AND name NOT LIKE 'sync_table' ",e+="AND name NOT LIKE '_temp_%' ",e+="AND name NOT LIKE 'sqlite_%' ",e+="ORDER BY rootpage DESC;";const r=[];try{const n=yield se.queryAll(t,"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sync_table' AND name NOT LIKE '_temp_%' AND name NOT LIKE 'sqlite_%' ORDER BY rootpage DESC;",[]);for(const i of n)r.push(i.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTablesNames: ${n.message}`))}})()}static getViewsNames(t){return(0,O.Z)(function*(){let e="SELECT name FROM sqlite_master WHERE ";e+="type='view' AND name NOT LIKE 'sqlite_%' ",e+="ORDER BY rootpage DESC;";const r=[];try{const n=yield se.queryAll(t,"SELECT name FROM sqlite_master WHERE type='view' AND name NOT LIKE 'sqlite_%' ORDER BY rootpage DESC;",[]);for(const i of n)r.push(i.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`getViewsNames: ${n.message}`))}})()}static dropElements(t,e){return(0,O.Z)(function*(){let r="",n="AND name NOT LIKE ('sqlite_%')";switch(e){case"index":r="DropIndexes";break;case"trigger":r="DropTriggers";break;case"table":r="DropTables",n+=" AND name NOT IN ('sync_table')";break;case"view":r="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${e} not found`))}let i="SELECT name FROM sqlite_master WHERE ";i+=`type = '${e}' ${n};`;try{const o=yield se.queryAll(t,i,[]);if(o.length>0){const u=e.toUpperCase(),f=[];for(const c of o){let y=`DROP ${u} IF EXISTS `;y+=`${c.name};`,f.push(y)}for(const c of f)if((yield se.run(t,c,[],!1,"no"))<0)return Promise.reject(new Error(`DropElements: ${r}: lastId < 0`))}return Promise.resolve()}catch(o){return Promise.reject(new Error(`DropElements: ${r}: ${o.message}`))}})()}static dropAll(t){return(0,O.Z)(function*(){try{return yield gt.dropElements(t,"table"),yield gt.dropElements(t,"index"),yield gt.dropElements(t,"trigger"),yield gt.dropElements(t,"view"),yield se.run(t,"VACUUM;",[],!1,"no"),Promise.resolve()}catch(e){return Promise.reject(new Error(`DropAll: ${e.message}`))}})()}static dropTempTables(t,e){return(0,O.Z)(function*(){const r=Object.keys(e),n=[];for(const i of r){let o="DROP TABLE IF EXISTS ";o+=`_temp_${i};`,n.push(o)}try{return(yield se.execute(t,n.join("\n"),!1))<0?Promise.reject(new Error("DropTempTables: changes < 0")):Promise.resolve()}catch(i){return Promise.reject(new Error(`DropTempTables: ${i.message}`))}})()}}class We{static isJsonSQLite(t){return(0,O.Z)(function*(){const e=["database","version","overwrite","encrypted","mode","tables","views"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t)){if(-1===e.indexOf(r)||"database"===r&&"string"!=typeof t[r]||"version"===r&&"number"!=typeof t[r]||"overwrite"===r&&"boolean"!=typeof t[r]||"encrypted"===r&&"boolean"!=typeof t[r]||"mode"===r&&"string"!=typeof t[r]||"tables"===r&&"object"!=typeof t[r])return!1;if("tables"===r)for(const n of t[r])if(!(yield We.isTable(n)))return!1;if("views"===r&&"object"!=typeof t[r])return!1;if("views"===r)for(const n of t[r])if(!(yield We.isView(n)))return!1}return!0})()}static isTable(t){return(0,O.Z)(function*(){const e=["name","schema","indexes","triggers","values"];let r=0;if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const n of Object.keys(t)){if(-1===e.indexOf(n)||"name"===n&&"string"!=typeof t[n]||"schema"===n&&"object"!=typeof t[n]||"indexes"===n&&"object"!=typeof t[n]||"triggers"===n&&"object"!=typeof t[n]||"values"===n&&"object"!=typeof t[n])return!1;if("schema"===n){t.schema.forEach(i=>{i.column&&r++});for(let i=0;i<r;i++)if(!(yield We.isSchema(t[n][i])))return!1}if("indexes"===n)for(const i of t[n])if(!(yield We.isIndexes(i)))return!1;if("triggers"===n)for(const i of t[n])if(!(yield We.isTriggers(i)))return!1;if("values"===n&&r>0)for(const i of t[n])if("object"!=typeof i||i.length!=r)return!1}return!0})()}static isSchema(t){return(0,O.Z)(function*(){const e=["column","value","foreignkey","primarykey","constraint"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"column"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r]||"foreignkey"===r&&"string"!=typeof t[r]||"primarykey"===r&&"string"!=typeof t[r]||"constraint"===r&&"string"!=typeof t[r])return!1;return!0})()}static isIndexes(t){return(0,O.Z)(function*(){const e=["name","value","mode"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r]||"mode"===r&&("string"!=typeof t[r]||"UNIQUE"!=t[r].toUpperCase()))return!1;return!0})()}static isTriggers(t){return(0,O.Z)(function*(){const e=["name","timeevent","condition","logic"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"timeevent"===r&&"string"!=typeof t[r]||"condition"===r&&"string"!=typeof t[r]||"logic"===r&&"string"!=typeof t[r])return!1;return!0})()}static isView(t){return(0,O.Z)(function*(){const e=["name","value"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r])return!1;return!0})()}static checkSchemaValidity(t){return(0,O.Z)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("column")&&(r.column=t[e].column),n.includes("value")&&(r.value=t[e].value),n.includes("foreignkey")&&(r.foreignkey=t[e].foreignkey),n.includes("constraint")&&(r.constraint=t[e].constraint),!(yield We.isSchema(r)))return Promise.reject(new Error(`CheckSchemaValidity: schema[${e}] not valid`))}return Promise.resolve()})()}static checkIndexesValidity(t){return(0,O.Z)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("value")&&(r.value=t[e].value),n.includes("name")&&(r.name=t[e].name),n.includes("mode")&&(r.mode=t[e].mode),!(yield We.isIndexes(r)))return Promise.reject(new Error(`CheckIndexesValidity: indexes[${e}] not valid`))}return Promise.resolve()})()}static checkTriggersValidity(t){return(0,O.Z)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("logic")&&(r.logic=t[e].logic),n.includes("name")&&(r.name=t[e].name),n.includes("timeevent")&&(r.timeevent=t[e].timeevent),n.includes("condition")&&(r.condition=t[e].condition),!(yield We.isTriggers(r)))return Promise.reject(new Error(`CheckTriggersValidity: triggers[${e}] not valid`))}return Promise.resolve()})()}static checkViewsValidity(t){return(0,O.Z)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("value")&&(r.value=t[e].value),n.includes("name")&&(r.name=t[e].name),!(yield We.isView(r)))return Promise.reject(new Error(`CheckViewsValidity: views[${e}] not valid`))}return Promise.resolve()})()}static getTableColumnNamesTypes(t,e){return(0,O.Z)(function*(){let r=[];const n=[],i=[],o=`PRAGMA table_info('${e}');`;try{if(r=yield se.queryAll(t,o,[]),r.length>0)for(const u of r)n.push(u.name),i.push(u.type);return Promise.resolve({names:n,types:i})}catch(u){return Promise.reject(new Error(`GetTableColumnNamesTypes: ${u.message}`))}})()}static getValues(t,e,r){return(0,O.Z)(function*(){const n=[];try{const i=yield We.getTableColumnNamesTypes(t,r);let o=[];if(!Object.keys(i).includes("names"))return Promise.reject(new Error(`GetValues: Table ${r} no names`));o=i.names;const u=yield se.queryAll(t,e,[]);for(const f of u){const c=[];for(const y of o)Object.keys(f).includes(y)?c.push(f[y]):c.push(null);n.push(c)}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`GetValues: ${i.message}`))}})()}}let Wt=(()=>{class s{static extractTableName(e){const n=e.match(/(?:INSERT\s+INTO|UPDATE|DELETE\s+FROM)\s+([^\s]+)/i);return n&&n[1]?n[1]:null}static extractWhereClause(e){const n=e.match(/WHERE(.+?)(?:ORDER\s+BY|LIMIT|$)/i);return n&&n[1]?n[1].trim():null}static addPrefixToWhereClause(e,r,n,i){let o;return o=e.includes("AND")?e.split("AND").map(c=>c.trim()):[e],o.map(f=>{const c=f.match(/(\w+)\s*(=|<|<=|<>|>|>=|IN|BETWEEN|LIKE)\s*(.+)/);if(!c)return f;const y=c[1].trim(),m=c[2].trim();let v=c[3].trim(),p=y;const E=s.findIndexOfStringInArray(y,n);return-1!==E&&(p=s.getStringAtIndex(r,E)),`${i}${p} ${m} ${v}`}).join(" AND ")}static findIndexOfStringInArray(e,r){return r.indexOf(e)}static getStringAtIndex(e,r){if(r>=0&&r<e.length)return e[r]}static extractForeignKeyInfo(e){const n=e.match(/\bFOREIGN\s+KEY\s*\(([^)]+)\)\s+REFERENCES\s+(\w+)\s*\(([^)]+)\)\s+(ON\s+DELETE\s+(RESTRICT|CASCADE|SET\s+NULL|SET\s+DEFAULT|NO\s+ACTION))?/);if(n)return{forKeys:n[1].split(",").map(o=>o.trim()),tableName:n[2],refKeys:n[3].split(",").map(o=>o.trim()),action:n[5]?n[5]:"NO ACTION"};throw new Error("extractForeignKeyInfo: No FOREIGN KEY found")}static extractColumnNames(e){const r=new Set(["AND","OR","IN","VALUES","LIKE","BETWEEN","NOT"]),n=/\b[a-zA-Z]\w*\b(?=\s*(?:<=?|>=?|<>?|=|AND|OR|BETWEEN|NOT|IN|LIKE))|\b[a-zA-Z]\w*\b\s+BETWEEN\s+'[^']+'\s+AND\s+'[^']+'|\(([^)]+)\)\s+IN\s+\(?\s*VALUES\s*\(/g;let i;const o=[];for(;null!==(i=n.exec(e));){const u=i[1];if(u){const f=u.split(",");for(const c of f)o.push(c.trim())}else{const f=i[0];r.has(f.trim().toUpperCase())||o.push(f.trim())}}return o}static flattenMultilineString(e){return e.split(/\r?\n/).join(" ")}static getStmtAndRetColNames(e,r){const i={stmt:e,names:""},o=e.toUpperCase().indexOf("RETURNING");if(-1!==o){const u=e.substring(0,o);if(i.stmt=`${u};`,"wA"===r.substring(0,2)){const c=e.substring(o+9).trim();i.names=c.endsWith(";")?c.substring(0,c.length-1):c}}return i}static extractCombinedPrimaryKey(e){const n=new RegExp(/WHERE\s*\((.+?)\)\s*(?:=|IN)\s*\((.+?)\)/g),i=e.matchAll(n),o=[];for(const u of i){const c=u[1].trim().split(",").map(y=>y.trim());o.push(c)}return 0===o.length?null:o}static getWhereStmtForCombinedPK(e,r,n,i){let o=e;for(const u of i){const f=u.join(",")===r.join(",")?n:r;for(const[c,y]of u.entries())o=s.replaceAllString(o,y,f[c])}return o}static replaceAllString(e,r,n){return e.split(r).join(n)}static indicesOf(e,r,n=0){const i=[];let o=e.indexOf(r,n);for(;-1!==o;)i.push(o),o=e.indexOf(r,o+1);return i}static getWhereStmtForNonCombinedPK(e,r,n){let i="",o=e.substring(6);for(let u=0;u<r.length;u++){let f="withRefsNames",c=s.indicesOf(o,r[u]);if(0===c.length&&(c=s.indicesOf(o,n[u]),f="colNames"),c.length>0){let y="";const m=s.indicesOf(o,"=",c[0]);if(m.length>0){const v=s.indicesOf(o,"AND",m[0]);v.length>0?(y=o.substring(m[0]+1,v[0]-1),o=o.substring(v[0]+3)):y=o.substring(m[0]+1),u>0&&(i+=" AND "),i+="withRefsNames"===f?n[u]+" = "+y:r[u]+" = "+y}}}return i="WHERE "+i,i}static updateWhere(e,r,n){let i="";if(e.length<=0||"WHERE"!==e.toUpperCase().substring(0,5))return i;if(r.length===n.length){const o=s.extractCombinedPrimaryKey(e);i=o?s.getWhereStmtForCombinedPK(e,r,n,o):s.getWhereStmtForNonCombinedPK(e,r,n)}return i}}return s.replaceString=(t,e,r)=>{const n=t.indexOf(e);return-1!==n?t.substring(0,n)+r+t.substring(n+e.length):t},s})();class Ye{static findReferencesAndUpdate(t){return new Ye(t)}static getRefs(t){return new Ye(t)}static getReferences(t){return new Ye(t)}static searchForRelatedItems(t){return new Ye(t)}static upDateWhereForDefault(t){return new Ye(t)}static upDateWhereForRestrict(t){return new Ye(t)}static upDateWhereForCascade(t){return new Ye(t)}static executeUpdateForDelete(t){return new Ye(t)}constructor(t){this.message=t}}class Et{static findReferencesAndUpdate(t,e,r,n,i){return(0,O.Z)(function*(){try{let o=!0;const u=yield Et.getReferences(t,e),f=u.retRefs,c=u.tableWithRefs;if(f.length<=0||e===c)return o;for(const y of f){const m=Wt.extractForeignKeyInfo(y),v=m.tableName;if(""===v||v!==e)continue;const p=m.forKeys,E=m.refKeys;if(E.length!==p.length)throw Ye.findReferencesAndUpdate("findReferencesAndUpdate: mismatch length");const _=m.action;if("NO_ACTION"===_)continue;let T=c,k=p,S={uWhereStmt:"",setStmt:""};if(Et.checkValuesMatch(p,n))throw Ye.findReferencesAndUpdate("Not implemented. Please transfer your example to the maintener");{const N=yield Et.searchForRelatedItems(t,T,e,r,p,E,i);if(0===N.relatedItems.length&&N.key.length<=0)continue;if(T!==e)switch(_){case"RESTRICT":S=yield Et.upDateWhereForRestrict(N);break;case"CASCADE":S=yield Et.upDateWhereForCascade(N);break;default:S=yield Et.upDateWhereForDefault(p,N)}}S.setStmt.length>0&&S.uWhereStmt.length>0&&Et.executeUpdateForDelete(t,T,S.uWhereStmt,S.setStmt,k,i)}return o}catch(o){throw o instanceof Ye?Ye.findReferencesAndUpdate(o.message?o.message:o):o}})()}static getReferences(t,e){return(0,O.Z)(function*(){const r="SELECT sql FROM sqlite_master WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND sql LIKE('%"+e+"%') AND sql LIKE('%ON DELETE%');";try{const n=yield se.queryAll(t,r,[]);let i=[],o="";if(n.length>0){let u=Et.getRefs(n[0].sql);i=u.foreignKeys,o=u.tableName}return Promise.resolve({tableWithRefs:o,retRefs:i})}catch(n){throw Ye.getReferences(`getReferences: ${n.message?n.message:n}`)}})()}static getRefs(t){let e="";const r=[],n=Wt.flattenMultilineString(t);try{const o=n.match(/CREATE\s+TABLE\s+(\w+)\s+\(/);o&&(e=o[1]);const f=n.matchAll(/FOREIGN\s+KEY\s+\([^)]+\)\s+REFERENCES\s+(\w+)\s*\([^)]+\)\s+ON\s+DELETE\s+(CASCADE|RESTRICT|SET\s+DEFAULT|SET\s+NULL|NO\s+ACTION)/g);for(const c of f)r.push(c[0])}catch(i){throw Ye.getRefs(`getRefs: Error creating regular expression: ${i}`)}return{tableName:e,foreignKeys:r}}static getReferencedTableName(t){return(0,O.Z)(function*(){var e="";if(t.length>0){const r=t.split(new RegExp("REFERENCES","i"));if(2===r.length){const n=r[1].indexOf("(");e=r[1].substring(0,n).trim()}}return e})()}static searchForRelatedItems(t,e,r,n,i,o,u){return(0,O.Z)(function*(){const f=[];let c="";const y=i.map(v=>`t1.${v}`),m=o.map(v=>`t2.${v}`);try{let v=Wt.addPrefixToWhereClause(n,o,i,"t2.");v.endsWith(";")&&(v=v.slice(0,-1));const p=y.map((T,k)=>`${T} = ${m[k]}`).join(" AND "),E=`SELECT t1.rowid FROM ${e} t1 JOIN ${r} t2 ON ${p} WHERE ${v} AND t1.sql_deleted = 0;`,_=yield se.queryAll(t,E,u);return _.length>0&&(c=Object.keys(_[0])[0],f.push(..._)),{key:c,relatedItems:f}}catch(v){throw Ye.searchForRelatedItems(v.message?v.message:v)}})()}static upDateWhereForDefault(t,e){return(0,O.Z)(function*(){let r="",n="";try{const i=e.key,o=[];for(const u of e.relatedItems){const f=u[i];void 0!==f&&o.push(f)}for(const u of t)r+=`${u} = NULL, `;r+="sql_deleted = 0",n=`WHERE ${i} IN (`;for(const u of o)n+=`${u},`;n.endsWith(",")&&(n=n.slice(0,-1)),n+=");"}catch(i){throw Ye.upDateWhereForDefault(i.message?i.message:i)}return{setStmt:r,uWhereStmt:n}})()}static upDateWhereForRestrict(t){return(0,O.Z)(function*(){try{const e="",r="";if(t.relatedItems.length>0)throw Ye.upDateWhereForRestrict("Restrict mode related items exist, please delete them first");return{setStmt:e,uWhereStmt:r}}catch(e){throw Ye.upDateWhereForRestrict(e.message?e.message:e)}})()}static upDateWhereForCascade(t){return(0,O.Z)(function*(){let e="",r="";try{const n=t.key,i=[];for(const o of t.relatedItems){const u=o[n];void 0!==u&&i.push(u)}e+="sql_deleted = 1",r=`WHERE ${n} IN (`;for(const o of i)r+=`${o},`;r.endsWith(",")&&(r=r.slice(0,-1)),r+=");"}catch(n){throw Ye.upDateWhereForCascade(n.message?n.message:n)}return{setStmt:e,uWhereStmt:r}})()}static executeUpdateForDelete(t,e,r,n,i,o){try{let u=-1;const f=`UPDATE ${e} SET ${n} ${r}`,c=[];if(o.length>0){const m=r.split("?");";"===m[m.length-1]&&m.pop();for(let v=0;v<m.length;v++)for(const p of i)Wt.indicesOf(m[v],p).length>0&&c.push(o[v])}if(u=se.run(t,f,c,!1,"no").lastId,-1===u)throw Ye.executeUpdateForDelete(`UPDATE sql_deleted failed for table: ${e}`)}catch(u){throw Ye.executeUpdateForDelete(u.message?u.message:u)}}static getCurrentTimeAsInteger(){return Math.floor(Date.now()/1e3)}static checkValuesMatch(t,e){for(const r of t)if(!e.includes(r))return!1;return!0}}class se{static beginTransaction(t,e){return(0,O.Z)(function*(){const r="BeginTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("BEGIN"),Promise.resolve()}catch(n){return Promise.reject(new Error(`${r}${n.message}`))}})()}static rollbackTransaction(t,e){return(0,O.Z)(function*(){const r="RollbackTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("ROLLBACK"),Promise.resolve()}catch(n){return Promise.reject(new Error(`${r}${n.message}`))}})()}static commitTransaction(t,e){const r="CommitTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("COMMIT"),Promise.resolve()}catch(i){return Promise.reject(new Error(`${r}${i.message}`))}}static dbChanges(t){return(0,O.Z)(function*(){let r=0;try{return r=t.exec("SELECT total_changes()")[0].values[0][0],Promise.resolve(r)}catch(n){return Promise.reject(new Error(`DbChanges failed: ${n.message}`))}})()}static getLastId(t){return(0,O.Z)(function*(){let r=-1;try{return r=t.exec("SELECT last_insert_rowid()")[0].values[0][0],Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetLastId failed: ${n.message}`))}})()}static setForeignKeyConstraintsEnabled(t,e){return(0,O.Z)(function*(){let r="PRAGMA foreign_keys=OFF";e&&(r="PRAGMA foreign_keys=ON");try{return t.run(r),Promise.resolve()}catch(n){return Promise.reject(new Error(`SetForeignKey: ${n.message?n.message:n}`))}})()}static getVersion(t){return(0,O.Z)(function*(){let e=0;try{return e=t.exec("PRAGMA user_version;")[0].values[0][0],Promise.resolve(e)}catch(r){return Promise.reject(new Error(`GetVersion: ${r.message}`))}})()}static setVersion(t,e){return(0,O.Z)(function*(){try{return t.exec(`PRAGMA user_version = ${e}`),Promise.resolve()}catch(r){return Promise.reject(new Error(`SetVersion: ${r.message}`))}})()}static execute(t,e,r){return(0,O.Z)(function*(){try{var n=e;if(!r&&e.toLowerCase().includes("DELETE FROM".toLowerCase())){let u=(n=e.replace(/\n/g,"")).split(";");var i=[];for(const f of u)if("DELETE FROM"===f.trim().substring(0,11).toUpperCase()&&f.toLowerCase().includes("WHERE".toLowerCase())){const y=f.trim(),m=yield se.deleteSQL(t,y,[]);i.push(m)}else i.push(f);n=i.join(";")}t.exec(n);const o=yield se.dbChanges(t);return Promise.resolve(o)}catch(o){return Promise.reject(new Error(`Execute: ${o.message}`))}})()}static executeSet(t,e,r,n){return(0,O.Z)(function*(){const i=[];let o=-1,u={};for(let f=0;f<e.length;f++){const c="statement"in e[f]?e[f].statement:null,y="values"in e[f]&&e[f].values.length>0?e[f].values:[];if(null==c){let m="ExecuteSet: Error No statement";return m+=` for index ${f}`,Promise.reject(new Error(m))}try{if(Array.isArray(y[0]))for(const m of y){const v=yield se.replaceUndefinedByNull(m);u=yield se.run(t,c,v,r,n),o=u.lastId,Object.keys(u).includes("values")&&u.values.length>0&&i.push(u.values)}else{const m=yield se.replaceUndefinedByNull(y);u=yield se.run(t,c,m,r,n),o=u.lastId,Object.keys(u).includes("values")&&u.values.length>0&&i.push(u.values)}}catch(m){return Promise.reject(new Error(`ExecuteSet: ${m.message}`))}}return u.lastId=o,u.values="all"===n?i:"one"===n?i[0]:[],Promise.resolve(u)})()}static queryAll(t,e,r){return(0,O.Z)(function*(){try{let n=[];if(n=null!=r&&r.length>0?t.exec(e,r):t.exec(e),0==n.length)return Promise.resolve([]);const i=n[0].values.map(o=>{const u={};return n[0].columns.forEach((f,c)=>{u[f]=o[c]}),u});return Promise.resolve(i)}catch(n){return Promise.reject(new Error(`queryAll: ${n.message}`))}})()}static run(t,e,r,n,i){return(0,O.Z)(function*(){let o=e.replace(/\n/g,"").trim().substring(0,6).toUpperCase(),u=e,f=[],c={};try{!n&&"DELETE"===o&&(u=yield se.deleteSQL(t,e,r));const y=r||[];if(y.length>0){const v=yield se.replaceUndefinedByNull(y),p=t.exec(u,v);if("all"===i||"one"===i){if(!(p&&p.length>0))return Promise.reject(new Error(`run: ${u} does not returned any change`));f=se.getReturnedValues(p[0],i)}}else{const v=t.exec(u);if("all"===i||"one"===i){if(!(v&&v.length>0))return Promise.reject(new Error(`run: ${u} does not returned any change`));f=se.getReturnedValues(v[0],i)}}const m=yield se.getLastId(t);return c.lastId=m,null!=f&&f.length>0&&(c.values=f),Promise.resolve(c)}catch(y){return Promise.reject(new Error(`run: ${y.message}`))}})()}static getReturnedValues(t,e){const r=[];for(let n=0;n<t.values.length;n++){let i={};for(let o=0;o<t.columns.length;o++)i[t.columns[o]]=t.values[n][o];if(r.push(i),"one"===e)break}return r}static deleteSQL(t,e,r){return(0,O.Z)(function*(){let n=e;try{const i=yield se.isLastModified(t,!0),o=yield se.isSqlDeleted(t,!0);if(!i||!o)return n;const u=Wt.extractWhereClause(n);if(!u)return Promise.reject(new Error("deleteSQL: cannot find a WHERE clause"));const f=Wt.extractTableName(n);if(!f)return Promise.reject(new Error("deleteSQL: cannot find a WHERE clause"));const c=Wt.extractColumnNames(u);if(0===c.length)return Promise.reject(new Error("deleteSQL: Did not find column names in the WHERE Statement"));const y="sql_deleted = 1";return n=(yield Et.findReferencesAndUpdate(t,f,u,c,r))?`UPDATE ${f} SET ${y} WHERE ${u.endsWith(";")?u.slice(0,-1):u} AND sql_deleted = 0;`:"",Promise.resolve(n)}catch(i){return Promise.reject(new Error(`deleteSQL: ${i.message?i.message:i}`))}})()}static getTableList(t){return(0,O.Z)(function*(){try{const e=yield gt.getTablesNames(t);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`getTableList: ${e.message}`))}})()}static isTableExists(t,e){return(0,O.Z)(function*(){try{let r="SELECT name FROM sqlite_master WHERE ";r+=`type='table' AND name='${e}';`;const i=(yield se.queryAll(t,r,[])).length>0;return Promise.resolve(i)}catch(r){return Promise.reject(new Error(`isTableExists: ${r.message}`))}})()}static isLastModified(t,e){return(0,O.Z)(function*(){if(!e)return Promise.reject("isLastModified: database not opened");try{const r=yield gt.getTablesNames(t);for(const n of r)if((yield We.getTableColumnNamesTypes(t,n)).names.includes("last_modified"))return Promise.resolve(!0)}catch(r){return Promise.reject(`isLastModified: ${r}`)}})()}static isSqlDeleted(t,e){return(0,O.Z)(function*(){if(!e)return Promise.reject("isSqlDeleted: database not opened");try{const r=yield gt.getTablesNames(t);for(const n of r)if((yield We.getTableColumnNamesTypes(t,n)).names.includes("sql_deleted"))return Promise.resolve(!0)}catch(r){return Promise.reject(`isSqlDeleted: ${r}`)}})()}static replaceUndefinedByNull(t){return(0,O.Z)(function*(){const e=[];for(const r of t){let n=r;typeof r>"u"&&(n=null),e.push(n)}return Promise.resolve(e)})()}static backupTables(t){return(0,O.Z)(function*(){let r={};try{const n=yield gt.getTablesNames(t);for(const i of n)try{const o=yield se.backupTable(t,i);r[`${i}`]=o}catch(o){return Promise.reject(new Error(`BackupTables: table ${i}: ${o.message}`))}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`BackupTables: ${n.message}`))}})()}static backupTable(t,e){return(0,O.Z)(function*(){try{yield se.beginTransaction(t,!0);const r=yield se.getTableColumnNames(t,e),n=`_temp_${e}`,i=`DROP TABLE IF EXISTS ${n};`;yield se.run(t,i,[],!1,"no");let o=`ALTER TABLE ${e} RENAME `;if(o+=`TO ${n};`,(yield se.run(t,o,[],!1,"no"))<0){let f="BackupTable: lastId < 0";try{yield se.rollbackTransaction(t,!0)}catch(c){f+=`: ${c.message}`}return Promise.reject(new Error(`${f}`))}try{return yield se.commitTransaction(t,!0),Promise.resolve(r)}catch(f){return Promise.reject(new Error(`BackupTable: ${f.message}`))}}catch(r){return Promise.reject(new Error(`BackupTable: ${r.message}`))}})()}static getTableColumnNames(t,e){return(0,O.Z)(function*(){let r=[];const n=[],i=`PRAGMA table_info('${e}');`;try{if(r=yield se.queryAll(t,i,[]),r.length>0)for(const o of r)n.push(o.name);return Promise.resolve(n)}catch(o){return Promise.reject(new Error(`GetTableColumnNames: ${o.message}`))}})()}static findCommonColumns(t,e){return(0,O.Z)(function*(){let r={};try{const n=yield gt.getTablesNames(t);if(0===n.length)return Promise.reject(new Error("FindCommonColumns: get table's names failed"));for(const i of n){const o=yield se.getTableColumnNames(t,i);Object.keys(e).includes(i)&&(r[i]=se.arraysIntersection(e[i],o))}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`FindCommonColumns: ${n.message}`))}})()}static arraysIntersection(t,e){if(null!=t&&null!=e){const r=new Set(t),n=new Set(e);return[...r].filter(i=>n.has(i))}return[]}static updateNewTablesData(t,e){return(0,O.Z)(function*(){try{yield se.beginTransaction(t,!0);const r=[];if(Object.keys(e).forEach(o=>{const u=e[o].join(",");let f=`INSERT INTO ${o} `;f+=`(${u}) `,f+=`SELECT ${u} FROM _temp_${o};`,r.push(f)}),(yield se.execute(t,r.join("\n"),!1))<0){let o="updateNewTablesData: changes < 0";try{yield se.rollbackTransaction(t,!0)}catch(u){o+=`: ${u.message}`}return Promise.reject(new Error(`${o}`))}try{return yield se.commitTransaction(t,!0),Promise.resolve()}catch(o){return Promise.reject(new Error(`updateNewTablesData: ${o.message}`))}}catch(r){return Promise.reject(new Error(`updateNewTablesData: ${r.message}`))}})()}}class ct{static createDatabaseSchema(t,e){return(0,O.Z)(function*(){let r=-1;const n=e.version;try{return yield se.setVersion(t.mDb,n),"full"===e.mode&&(yield gt.dropAll(t.mDb)),r=yield ct.createSchema(t,e),Promise.resolve(r)}catch(i){return Promise.reject(new Error(`CreateDatabaseSchema: ${i.message}`))}})()}static createSchema(t,e){return(0,O.Z)(function*(){let r=0;const n=t.mDb;try{yield se.beginTransaction(n,!0),t.setIsTransActive(!0)}catch(o){return Promise.reject(new Error(`CreateSchema: ${o.message}`))}const i=yield ct.createSchemaStatement(e);if(i.length>0){const o=i.join("\n");try{if(r=yield se.execute(n,o,!0),r<0)try{yield se.rollbackTransaction(n,!0),t.setIsTransActive(!1)}catch(u){return Promise.reject(new Error(`CreateSchema: changes < 0 ${u.message}`))}}catch(u){const f=u.message;try{return yield se.rollbackTransaction(n,!0),t.setIsTransActive(!1),Promise.reject(new Error(`CreateSchema: ${f}`))}catch(c){return Promise.reject(new Error(`CreateSchema: changes < 0 ${c.message}: ${f}`))}}}try{return yield se.commitTransaction(n,!0),t.setIsTransActive(!1),Promise.resolve(r)}catch(o){return Promise.reject(new Error(`CreateSchema: commit ${o.message}`))}})()}static createSchemaStatement(t){return(0,O.Z)(function*(){const e=[];let r=!1,n=!1;try{for(const i of t.tables){if(null!=i.schema&&i.schema.length>=1){e.push(`CREATE TABLE IF NOT EXISTS ${i.name} (`);for(let o=0;o<i.schema.length;o++)o===i.schema.length-1?i.schema[o].column?(e.push(`${i.schema[o].column} ${i.schema[o].value}`),"last_modified"===i.schema[o].column&&(r=!0),"sql_deleted"===i.schema[o].column&&(n=!0)):i.schema[o].foreignkey?e.push(`FOREIGN KEY (${i.schema[o].foreignkey}) ${i.schema[o].value}`):i.schema[o].constraint&&e.push(`CONSTRAINT ${i.schema[o].constraint} ${i.schema[o].value}`):i.schema[o].column?e.push(`${i.schema[o].column} ${i.schema[o].value},`):i.schema[o].foreignkey?e.push(`FOREIGN KEY (${i.schema[o].foreignkey}) ${i.schema[o].value},`):i.schema[o].primarykey?e.push(`FOREIGN KEY ${i.schema[o].value},`):i.schema[o].constraint&&e.push(`CONSTRAINT ${i.schema[o].constraint} ${i.schema[o].value},`);if(e.push(");"),r&&n){let o="CREATE TRIGGER IF NOT EXISTS ";o+=`${i.name}`,o+="_trigger_last_modified ",o+=`AFTER UPDATE ON ${i.name} `,o+="FOR EACH ROW WHEN NEW.last_modified < ",o+="OLD.last_modified BEGIN UPDATE ",o+=`${i.name} `,o+="SET last_modified = ",o+="(strftime('%s','now')) WHERE id=OLD.id; END;",e.push(o)}}if(null!=i.indexes&&i.indexes.length>=1)for(const o of i.indexes){const u=i.name;let f=`CREATE ${Object.keys(o).includes("mode")?o.mode+" ":""} INDEX IF NOT EXISTS `;f+=`${o.name} ON ${u} (${o.value});`,e.push(f)}if(null!=i.triggers&&i.triggers.length>=1)for(const o of i.triggers){const u=i.name;o.timeevent.toUpperCase().endsWith(" ON")&&(o.timeevent=o.timeevent.substring(0,o.timeevent.length-3));let f="CREATE TRIGGER IF NOT EXISTS ";f+=`${o.name} ${o.timeevent} ON ${u} `,o.condition&&(f+=`${o.condition} `),f+=`${o.logic};`,e.push(f)}}return Promise.resolve(e)}catch(i){return Promise.reject(i)}})()}static createTablesData(t,e,r){return(0,O.Z)(function*(){let n=0,i=!1,o=-1,u="",f=-1;const c=t.mDb;try{f=yield se.dbChanges(c),yield se.beginTransaction(c,!0),t.setIsTransActive(!0)}catch(y){return Promise.reject(new Error(`createTablesData: ${y.message}`))}for(const y of e.tables)if(null!=y.values&&y.values.length>=1)try{if(o=yield ct.createTableData(c,y,e.mode),r.emit({progress:`create table data ${y.name}`}),o<0)break;i=!0}catch(m){u=m.message,i=!1;break}if(i)try{return yield se.commitTransaction(c,!0),t.setIsTransActive(!1),n=(yield se.dbChanges(c))-f,Promise.resolve(n)}catch(y){return Promise.reject(new Error(`CreateTablesData: ${y.message}`))}else{if(!(u.length>0))return Promise.resolve(0);try{return yield se.rollbackTransaction(c,!0),t.setIsTransActive(!1),Promise.reject(new Error(`CreateTablesData: ${u}`))}catch(y){return Promise.reject(new Error(`CreateTablesData: ${y.message}: ${u}`))}}})()}static createTableData(t,e,r){return(0,O.Z)(function*(){let n=-1;try{if(!(yield se.isTableExists(t,e.name)))return Promise.reject(new Error(`CreateTableData: Table ${e.name} does not exist`));const o=yield We.getTableColumnNamesTypes(t,e.name),f=o.names;if(0===o.types.length)return Promise.reject(new Error(`CreateTableData: Table ${e.name} info does not exist`));for(let c=0;c<e.values.length;c++){let y=e.values[c],m=!0;const v=yield ct.createRowStatement(t,f,y,c,e.name,r);if(m=yield ct.checkUpdate(t,v,y,e.name,f),m){if("DELETE"===v.substring(0,6).toUpperCase()&&(y=[]),n=yield se.run(t,v,y,!0,"no"),n<0)return Promise.reject(new Error("CreateTableData: lastId < 0"))}else n=0}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`CreateTableData: ${i.message}`))}})()}static createRowStatement(t,e,r,n,i,o){return(0,O.Z)(function*(){if(r.length!=e.length||0===r.length||0===e.length)return Promise.reject(new Error(`CreateRowStatement: Table ${i} values row ${n} not correct length`));try{const u=yield ct.isIdExists(t,i,e[0],r[0]);let f;if("full"===o||"partial"===o&&!u){const c=e.join(),y=yield ct.createQuestionMarkString(e.length);f=`INSERT INTO ${i} (${c}) VALUES (`,f+=`${y});`}else{let c=!0;const m=e.findIndex(v=>"sql_deleted"===v);if(m>=0&&1===r[m]&&(c=!1,f=`DELETE FROM ${i} WHERE `,f+="string"==typeof r[0]?`${e[0]} = '${r[0]}';`:`${e[0]} = ${r[0]};`),c){const v=yield ct.setNameForUpdate(e);if(0===v.length)return Promise.reject(new Error(`CreateRowStatement: Table ${i} values row ${n} not set to String`));f=`UPDATE ${i} SET ${v} WHERE `,f+="string"==typeof r[0]?`${e[0]} = '${r[0]}';`:`${e[0]} = ${r[0]};`}}return Promise.resolve(f)}catch(u){return Promise.reject(new Error(`CreateRowStatement: ${u.message}`))}})()}static checkUpdate(t,e,r,n,i){return(0,O.Z)(function*(){if("UPDATE"!==e.substring(0,6))return Promise.resolve(!0);try{let u=`SELECT * FROM ${n} WHERE `;u+="string"==typeof r[0]?`${i[0]} = '${r[0]}';`:`${i[0]} = ${r[0]};`;const f=yield We.getValues(t,u,n);let c=[];if(f.length>0&&(c=f[0]),r.length>0&&c.length>0&&r.length===c.length){for(let y=0;y<r.length;y++)if(r[y]!==c[y])return Promise.resolve(!0);return Promise.resolve(!1)}return Promise.reject(new Error("CheckUpdate: Both arrays not the same length"))}catch(u){return Promise.reject(new Error(`CheckUpdate: ${u.message}`))}})()}static isIdExists(t,e,r,n){return(0,O.Z)(function*(){let i=!1,o=`SELECT ${r} FROM ${e} WHERE ${r} = `;"number"==typeof n&&(o+=`${n};`),"string"==typeof n&&(o+=`'${n}';`);try{return 1===(yield se.queryAll(t,o,[])).length&&(i=!0),Promise.resolve(i)}catch(u){return Promise.reject(new Error(`IsIdExists: ${u.message}`))}})()}static isType(t,e){return(0,O.Z)(function*(){let r=!1;return"NULL"===t&&"object"==typeof e&&(r=!0),"TEXT"===t&&"string"==typeof e&&(r=!0),"INTEGER"===t&&"number"==typeof e&&(r=!0),"REAL"===t&&"number"==typeof e&&(r=!0),"BLOB"===t&&"string"==typeof e&&(r=!0),r?Promise.resolve():Promise.reject(new Error("IsType: not a SQL Type"))})()}static checkColumnTypes(t,e){return(0,O.Z)(function*(){for(let r=0;r<e.length;r++)if(null!=e[r])try{yield ct.isType(t[r],e[r])}catch{return Promise.reject(new Error("CheckColumnTypes: Type not found"))}return Promise.resolve()})()}static createQuestionMarkString(t){return(0,O.Z)(function*(){let e="";for(let r=0;r<t;r++)e+="?,";return e.length>1?(e=e.slice(0,-1),Promise.resolve(e)):Promise.reject(new Error("CreateQuestionMarkString: length = 0"))})()}static setNameForUpdate(t){return(0,O.Z)(function*(){let e="";for(const r of t)e+=`${r} = ? ,`;return e.length>1?(e=e.slice(0,-1),Promise.resolve(e)):Promise.reject(new Error("SetNameForUpdate: length = 0"))})()}static createView(t,e){return(0,O.Z)(function*(){const r=`CREATE VIEW IF NOT EXISTS ${e.name} AS ${e.value};`;try{return(yield se.execute(t,r,!0))<0?Promise.reject(new Error(`CreateView: ${e.name} failed`)):Promise.resolve()}catch(n){return Promise.reject(new Error(`CreateView: ${n.message}`))}})()}static createViews(t,e){return(0,O.Z)(function*(){const r=t.mDb;let n=!1,i="",o=-1,u=-1;try{o=yield se.dbChanges(r),yield se.beginTransaction(r,!0),t.setIsTransActive(!0)}catch(f){return Promise.reject(new Error(`createViews: ${f.message}`))}for(const f of e.views)if(null!=f.value)try{yield ct.createView(r,f),n=!0}catch(c){i=c.message,n=!1;break}if(n)try{return yield se.commitTransaction(r,!0),t.setIsTransActive(!1),u=(yield se.dbChanges(r))-o,Promise.resolve(u)}catch(f){return Promise.reject(new Error(`createViews: ${f.message}`))}else{if(!(i.length>0))return Promise.resolve(0);try{return yield se.rollbackTransaction(r,!0),t.setIsTransActive(!1),Promise.reject(new Error(`createViews: ${i}`))}catch(f){return Promise.reject(new Error(`createViews: ${f.message}: ${i}`))}}})()}}class Ke{static createExportObject(t,e,r){return(0,O.Z)(function*(){const n={};let i=[],o=[],u="";try{o=yield Ke.getViewsName(t);const f=yield Ke.getTablesNameSQL(t);if(0===f.length)return Promise.reject(new Error("createExportObject: table's names failed"));if(!(yield se.isTableExists(t,"sync_table"))&&"partial"===e.mode)return Promise.reject(new Error("No sync_table available"));switch(e.mode){case"partial":i=yield Ke.getTablesPartial(t,f,r);break;case"full":i=yield Ke.getTablesFull(t,f,r);break;default:u="createExportObject: expMode "+e.mode+" not defined"}return u.length>0?Promise.reject(new Error(u)):(i.length>0&&(n.database=e.database,n.version=e.version,n.encrypted=e.encrypted,n.mode=e.mode,n.tables=i,o.length>0&&(n.views=o)),Promise.resolve(n))}catch(f){return Promise.reject(new Error("createExportObject: "+f.message))}})()}static getViewsName(t){return(0,O.Z)(function*(){const e=[];let r="SELECT name,sql FROM sqlite_master WHERE ";r+="type='view' AND name NOT LIKE 'sqlite_%';";let n=[];try{n=yield se.queryAll(t,"SELECT name,sql FROM sqlite_master WHERE type='view' AND name NOT LIKE 'sqlite_%';",[]);for(const i of n){const o={};o.name=i.name,o.value=i.sql.substring(i.sql.indexOf("AS ")+3),e.push(o)}return Promise.resolve(e)}catch(i){return Promise.reject(new Error(`getViewsName: ${i.message}`))}})()}static getTablesFull(t,e,r){return(0,O.Z)(function*(){const n=[];let i="";try{for(const o of e){let u,f;if(!o.name){i="GetTablesFull: no name";break}if(u=o.name,!o.sql){i="GetTablesFull: no sql";break}f=o.sql;const c={},y=yield Ke.getSchema(f);if(0===y.length){i="GetTablesFull: no Schema returned";break}yield We.checkSchemaValidity(y);const m=yield Ke.getIndexes(t,u);m.length>0&&(yield We.checkIndexesValidity(m));const v=yield Ke.getTriggers(t,u);v.length>0&&(yield We.checkTriggersValidity(v));let p=`Full: Table ${u} schema export completed ...`;r.emit({progress:p});const E=`SELECT * FROM ${u};`,_=yield We.getValues(t,E,u);if(c.name=u,!(y.length>0)){i="GetTablesFull: must contain schema";break}if(c.schema=y,m.length>0&&(c.indexes=m),v.length>0&&(c.triggers=v),_.length>0&&(c.values=_),Object.keys(c).length<=1){i=`GetTablesFull: table ${u} is not a jsonTable`;break}p=`Full: Table ${u} table data export completed ...`,r.emit({progress:p}),n.push(c)}return i.length>0?Promise.reject(new Error(i)):Promise.resolve(n)}catch(o){return Promise.reject(new Error(`GetTablesFull: ${o.message}`))}})()}static getSchema(t){return(0,O.Z)(function*(){const e=[],r=t.indexOf("("),n=t.lastIndexOf(")");let i=t.substring(r+1,n);try{i=yield Ke.modEmbeddedParentheses(i);const o=i.split(",");for(let u=0;u<o.length;u++){let f=[];const c=o[u].replace(/\n/g,"").trim();f[0]=c.substring(0,c.indexOf(" ")),f[1]=c.substring(c.indexOf(" ")+1);const y={};if("FOREIGN"===f[0].toUpperCase()){const m=c.indexOf("("),v=c.indexOf(")"),E=c.substring(m+1,v).split("\xa7");f[0]=E.join(","),f[0]=f[0].replace(/, /g,","),f[1]=c.substring(v+2),y.foreignkey=f[0]}else if("PRIMARY"===f[0].toUpperCase()){const m=c.indexOf("("),v=c.indexOf(")"),E=c.substring(m+1,v).split("\xa7");f[0]="CPK_"+E.join("_"),f[0]=f[0].replace(/_ /g,"_"),f[1]=c,y.constraint=f[0]}else if("CONSTRAINT"===f[0].toUpperCase()){let m=[];const v=f[1].trim();m[0]=v.substring(0,v.indexOf(" ")),m[1]=v.substring(v.indexOf(" ")+1),f[0]=m[0],y.constraint=f[0],f[1]=m[1]}else y.column=f[0];y.value=f[1].replace(/\xa7/g,","),e.push(y)}return Promise.resolve(e)}catch(o){return Promise.reject(new Error(o.message))}})()}static getIndexes(t,e){return(0,O.Z)(function*(){const r=[];let n="";try{let i="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";i+=`type = 'index' AND tbl_name = '${e}' `,i+="AND sql NOTNULL;";const o=yield se.queryAll(t,i,[]);if(o.length>0){for(const u of o){if(3!==Object.keys(u).length){n=`GetIndexes: Table ${e} creating indexes`;break}if(u.tbl_name!==e){n=`GetIndexes: Table ${e} doesn't match`;break}{const c=u.sql,y=c.includes("UNIQUE")?"UNIQUE":"",m=c.lastIndexOf("("),v=c.lastIndexOf(")"),p={};p.name=u.name,p.value=c.slice(m+1,v),y.length>0&&(p.mode=y),r.push(p)}}if(n.length>0)return Promise.reject(new Error(n))}return Promise.resolve(r)}catch(i){return Promise.reject(new Error(`GetIndexes: ${i.message}`))}})()}static getTriggers(t,e){return(0,O.Z)(function*(){const r=[];try{let n="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";n+=`type = 'trigger' AND tbl_name = '${e}' `,n+="AND sql NOT NULL;";const i=yield se.queryAll(t,n,[]);if(i.length>0)for(const o of i){if(3!==Object.keys(o).length)return Promise.reject(new Error(`GetTriggers: Table ${e} creating indexes`));if(o.tbl_name!==e)return Promise.reject(new Error(`GetTriggers: Table ${e} doesn't match`));{const c=o.name;let y=o.sql.split(c);if(2!=y.length)return Promise.reject(new Error("GetTriggers: sql split name does not return 2 values"));if(!y[1].includes(e))return Promise.reject(new Error(`GetTriggers: sql split does not contains ${e}`));const m=y[1].split(e,1)[0].trim();if(y=y[1].split(m+" "+e),2!=y.length)return Promise.reject(new Error("GetTriggers: sql split tableName does not return 2 values"));let v="",p="";if("BEGIN"!==y[1].trim().substring(0,5).toUpperCase()){if(y=y[1].trim().split("BEGIN"),2!=y.length)return Promise.reject(new Error("GetTriggers: sql split BEGIN does not return 2 values"));v=y[0].trim(),p="BEGIN"+y[1]}else p=y[1].trim();const E={};E.name=c,E.logic=p,v.length>0&&(E.condition=v),E.timeevent=m,r.push(E)}}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTriggers: ${n.message}`))}})()}static getTablesPartial(t,e,r){return(0,O.Z)(function*(){const n=[];let i={},o=0,u=[],f="";try{const c=yield Ke.getPartialModeData(t,e);Object.keys(c).includes("syncDate")&&(o=c.syncDate),Object.keys(c).includes("modTables")&&(i=c.modTables,u=Object.keys(i));for(const y of e){let m="",v="";if(!y.name){f="GetTablesFull: no name";break}if(m=y.name,!y.sql){f="GetTablesFull: no sql";break}if(v=y.sql,0==u.length||-1===u.indexOf(m)||"No"==i[m])continue;const p={};let E=[],_=[],T=[];p.name=y,"Create"===i[p.name]&&(E=yield Ke.getSchema(v),E.length>0&&(yield We.checkSchemaValidity(E)),_=yield Ke.getIndexes(t,m),_.length>0&&(yield We.checkIndexesValidity(_)),T=yield Ke.getTriggers(t,m),T.length>0&&(yield We.checkTriggersValidity(T)));let k=`Partial: Table ${m} schema export completed ...`;r.emit({progress:k});let S="";S="Create"===i[m]?`SELECT * FROM ${m};`:`SELECT * FROM ${m} WHERE last_modified > ${o};`;const N=yield We.getValues(t,S,m);if(p.name=m,E.length>0&&(p.schema=E),_.length>0&&(p.indexes=_),T.length>0&&(p.triggers=T),N.length>0&&(p.values=N),Object.keys(p).length<=1){f=`GetTablesPartial: table ${m} is not a jsonTable`;break}k=`Partial: Table ${m} table data export completed ...`,r.emit({progress:k}),n.push(p)}return f.length>0?Promise.reject(new Error(f)):Promise.resolve(n)}catch(c){return Promise.reject(new Error(`GetTablesPartial: ${c.message}`))}})()}static getPartialModeData(t,e){return(0,O.Z)(function*(){const r={};try{const n=yield Ke.getSynchroDate(t);if(n<=0)return Promise.reject(new Error("GetPartialModeData: no syncDate"));const i=yield Ke.getTablesModified(t,e,n);return i.length<=0?Promise.reject(new Error("GetPartialModeData: no modTables")):(r.syncDate=n,r.modTables=i,Promise.resolve(r))}catch(n){return Promise.reject(new Error(`GetPartialModeData: ${n.message}`))}})()}static getTablesNameSQL(t){return(0,O.Z)(function*(){let e="SELECT name,sql FROM sqlite_master WHERE ";e+="type='table' AND name NOT LIKE 'sync_table' ",e+="AND name NOT LIKE '_temp_%' ",e+="AND name NOT LIKE 'sqlite_%';";try{const r=yield se.queryAll(t,"SELECT name,sql FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sync_table' AND name NOT LIKE '_temp_%' AND name NOT LIKE 'sqlite_%';",[]);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`getTablesNamesSQL: ${r.message}`))}})()}static getTablesModified(t,e,r){return(0,O.Z)(function*(){let n="";try{const i={};for(const o of e){let u,f="SELECT count(*) AS tcount  ";f+=`FROM ${o.name};`;let c=yield se.queryAll(t,f,[]);if(1!=c.length){n="GetTableModified: total count not returned";break}const y=c[0].tcount;if(f="SELECT count(*) AS mcount FROM ",f+=`${o.name} WHERE last_modified > `,f+=`${r};`,c=yield se.queryAll(t,f,[]),1!=c.length)break;const m=c[0].mcount;u=0===m?"No":y===m?"Create":"Modified",i[o.name]=u}return n.length>0?Promise.reject(new Error(n)):Promise.resolve(i)}catch(i){return Promise.reject(new Error(`GetTableModified: ${i.message}`))}})()}static getSynchroDate(t){return(0,O.Z)(function*(){try{const e="SELECT sync_date FROM sync_table WHERE id = 1;",r=yield se.queryAll(t,e,[]);return Promise.resolve(r[0].sync_date)}catch(e){return Promise.reject(new Error(`GetSynchroDate: ${e.message}`))}})()}static getLastExportDate(t){return(0,O.Z)(function*(){try{const e="SELECT sync_date FROM sync_table WHERE id = 2;",r=yield se.queryAll(t,e,[]);return Promise.resolve(0===r.length?-1:r[0].sync_date)}catch(e){return Promise.reject(new Error(`getLastExport: ${e.message}`))}})()}static setLastExportDate(t,e){return(0,O.Z)(function*(){try{if(!(yield se.isTableExists(t,"sync_table")))return Promise.reject(new Error("setLastExportDate: No sync_table available"));const n=Math.round(new Date(e).getTime()/1e3);let i="";return i=(yield Ke.getLastExportDate(t))>0?`UPDATE sync_table SET sync_date = ${n} WHERE id = 2;`:`INSERT INTO sync_table (sync_date) VALUES (${n});`,(yield se.execute(t,i,!1))<0?{result:!1,message:"setLastExportDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setLastExportDate failed: ${r.message}`}}})()}static delExportedRows(t){return(0,O.Z)(function*(){let e;try{if(!(yield se.isTableExists(t,"sync_table")))return Promise.reject(new Error("DelExportedRows: No sync_table available"));if(e=yield Ke.getLastExportDate(t),e<0)return Promise.reject(new Error("DelExportedRows: no last exported date available"));const n=yield se.getTableList(t);if(0===n.length)return Promise.reject(new Error("DelExportedRows: No table's names returned"));for(const i of n){let o=-1;const u=`DELETE FROM ${i}\n              WHERE sql_deleted = 1 AND last_modified < ${e};`;if(o=yield se.run(t,u,[],!0,"no"),o<0)return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}catch(r){return Promise.reject(new Error(`DelExportedRows failed: ${r.message}`))}})()}static modEmbeddedParentheses(t){return(0,O.Z)(function*(){const e=Ke.indexOfChar(t,"("),r=Ke.indexOfChar(t,")");if(e.length!=r.length)return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'");if(0===e.length)return Promise.resolve(t);let n=t.substring(0,e[0]-1);for(let i=0;i<e.length;i++){let o;i<e.length-1&&e[i+1]<r[i]?(o=t.substring(e[i]-1,r[i+1]),i++):o=t.substring(e[i]-1,r[i]),n+=o.replace(/,/g,"\xa7"),i<e.length-1&&(n+=t.substring(r[i],e[i+1]-1))}return n+=t.substring(r[r.length-1],t.length),Promise.resolve(n)})()}static indexOfChar(t,e){let r=[...t];return e=e.toLowerCase(),r.reduce((n,i,o)=>i.toLowerCase()===e?[...n,o]:n,[])}}class nn{static onUpgrade(t,e,r,n){return(0,O.Z)(function*(){let i=-1;const o=new Int32Array(Object.keys(e).map(u=>parseInt(u))).sort();for(const u of o)if(u>r&&u<=n){const f=e[u].statements;if(0===f.length)return Promise.reject("onUpgrade: statements not given");try{yield se.setForeignKeyConstraintsEnabled(t.mDb,!1);const c=yield se.dbChanges(t.mDb);yield nn.executeStatementsProcess(t,f),yield se.setVersion(t.mDb,u),yield se.setForeignKeyConstraintsEnabled(t.mDb,!0),i=(yield se.dbChanges(t.mDb))-c}catch(c){return Promise.reject(new Error(`onUpgrade: ${c.message}`))}}return Promise.resolve(i)})()}static executeStatementsProcess(t,e){return(0,O.Z)(function*(){try{yield se.beginTransaction(t.mDb,!0),t.setIsTransActive(!0);for(const r of e)yield se.execute(t.mDb,r,!1);return yield se.commitTransaction(t.mDb,!0),t.setIsTransActive(!1),Promise.resolve()}catch(r){return yield se.rollbackTransaction(t.mDb,!0),t.setIsTransActive(!1),Promise.reject(`ExecuteStatementProcess: ${r}`)}})()}}class Gn{constructor(t,e,r,n,i,o){this.vUpgDict={},this.autoSave=!1,this.wasmPath="/assets",this.isBackup=!1,this.isTransactionActive=!1,this.dbName=t,this.store=n,this.version=e,this.mDb=null,this.vUpgDict=r,this._isDBOpen=!1,this.autoSave=i,this.wasmPath=o}open(){var t=this;return(0,O.Z)(function*(){const e={locateFile:r=>`${t.wasmPath}/${r}`};return new Promise((r,n)=>{try{ps(e).then(function(){var i=(0,O.Z)(function*(o){const u=yield Ne.getDBFromStore(t.dbName,t.store);null!=u?t.mDb=new o.Database(u):(t.mDb=new o.Database,yield Ne.setInitialDBToStore(t.dbName,t.store)),t._isDBOpen=!0;let f=yield se.getVersion(t.mDb);if(t.version>f&&Object.keys(t.vUpgDict).length>0)try{if((yield Ne.isDBInStore(t.dbName,t.store))&&(yield Ne.copyDBToStore(t.dbName,`backup-${t.dbName}`,t.store),t.isBackup=!0),-1===(yield nn.onUpgrade(t,t.vUpgDict,f,t.version)))try{t.isBackup&&(yield Ne.restoreDBFromStore(t.dbName,"backup",t.store))}catch(m){return n(new Error(`Open: ${m.message}`))}t.isBackup&&(yield Ne.removeDBFromStore(`backup-${t.dbName}`,t.store))}catch{try{t.isBackup&&(yield Ne.restoreDBFromStore(t.dbName,"backup",t.store))}catch(y){return n(new Error(`Open: ${y.message}`))}}if(t.autoSave)try{yield t.saveToStore()}catch(c){return t._isDBOpen=!1,n(`Open: ${c}`)}return yield se.setForeignKeyConstraintsEnabled(t.mDb,!0),r()});return function(o){return i.apply(this,arguments)}}())}catch(i){return t._isDBOpen=!1,n(`in open ${i}`)}})})()}isDBOpen(){return this._isDBOpen}close(){var t=this;return(0,O.Z)(function*(){if(null!=t.mDb&&t._isDBOpen)try{yield t.saveToStore(!1),t.mDb.close(),t._isDBOpen=!1}catch(e){return t._isDBOpen=!1,Promise.reject(`in close ${e}`)}return Promise.resolve()})()}saveToStore(t=!0){var e=this;return(0,O.Z)(function*(){if(null!=e.mDb&&e._isDBOpen)try{yield Ne.setDBToStore(e.mDb,e.dbName,e.store),t&&(yield se.setForeignKeyConstraintsEnabled(e.mDb,!0))}catch(r){return Promise.reject(`in saveToStore ${r}`)}return Promise.resolve()})()}exportDB(){var t=this;return(0,O.Z)(function*(){try{return t.mDb.export()}catch(e){return Promise.reject(`exportDB: ${e.message?e.message:e}`)}})()}getVersion(){var t=this;return(0,O.Z)(function*(){if(null!=t.mDb&&t._isDBOpen)try{const e=yield se.getVersion(t.mDb);return Promise.resolve(e)}catch(e){return t._isDBOpen=!1,Promise.reject(`in getVersion ${e}`)}})()}isDBExists(t){var e=this;return(0,O.Z)(function*(){try{const r=yield Ne.isDBInStore(t,e.store);return Promise.resolve(r)}catch(r){return Promise.reject(`in isDBExists ${r}`)}})()}deleteDB(t){var e=this;return(0,O.Z)(function*(){try{const r=yield e.isDBExists(t);return r&&!e._isDBOpen&&(yield e.open()),yield e.close(),r&&(yield Ne.removeDBFromStore(t,e.store)),Promise.resolve()}catch(r){return Promise.reject(new Error(`DeleteDB: ${r.message}`))}})()}beginTransaction(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen){let e=`BeginTransaction: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield se.beginTransaction(t.mDb,!0),t.setIsTransActive(!0),0}catch(e){return Promise.reject(new Error(`BeginTransaction: ${e.message}`))}})()}commitTransaction(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen){let e=`CommitTransaction: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield se.commitTransaction(t.mDb,!0),t.setIsTransActive(!1),0}catch(e){return Promise.reject(new Error(`CommitTransaction: ${e.message}`))}})()}rollbackTransaction(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen){let e=`RollbackTransaction: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield se.rollbackTransaction(t.mDb,!0),t.setIsTransActive(!1),0}catch(e){return Promise.reject(new Error(`RollbackTransaction: ${e.message}`))}})()}isTransActive(){return this.isTransactionActive}setIsTransActive(t){this.isTransactionActive=t}executeSQL(t,e=!0){var r=this;return(0,O.Z)(function*(){if(!r._isDBOpen){let i=`ExecuteSQL: Database ${r.dbName} `;return i+="not opened",Promise.reject(new Error(i))}let n=-1;try{n=yield se.dbChanges(r.mDb),e&&!r.isTransactionActive&&(yield r.beginTransaction())}catch(i){return Promise.reject(new Error(`executeSQL: ${i.message}`))}try{if((yield se.execute(r.mDb,t,!1))<0)return Promise.reject(new Error("ExecuteSQL: changes < 0"));e&&r.isTransactionActive&&(yield r.commitTransaction());const o=(yield se.dbChanges(r.mDb))-n;return Promise.resolve(o)}catch(i){let o=`ExecuteSQL: ${i.message}`;try{e&&r.isTransactionActive&&(yield r.rollbackTransaction())}catch(u){o+=` : ${u.message}`}return Promise.reject(new Error(`ExecuteSQL: ${o}`))}finally{if(e&&(r.isTransactionActive=!1),r.autoSave)try{yield r.saveToStore()}catch(i){return r._isDBOpen=!1,Promise.reject(`ExecuteSQL: ${i}`)}}})()}execSet(t,e=!0,r="no"){var n=this;return(0,O.Z)(function*(){if(!n._isDBOpen){let u=`ExecSet: Database ${n.dbName} `;return u+="not opened",Promise.reject(new Error(u))}const i={changes:-1,lastId:-1};let o=-1;try{o=yield se.dbChanges(n.mDb),e&&!n.isTransactionActive&&(yield n.beginTransaction())}catch(u){return Promise.reject(new Error(`ExecSet: ${u.message}`))}try{const u=yield se.executeSet(n.mDb,t,!1,r);let f=u.lastId;if(f<0)return Promise.reject(new Error("ExecSet: changes < 0"));e&&n.isTransactionActive&&(yield n.commitTransaction());const c=(yield se.dbChanges(n.mDb))-o;return i.changes=c,i.lastId=f,i.values=u.values?u.values:[],Promise.resolve(i)}catch(u){let f=`ExecSet: ${u.message}`;try{e&&n.isTransactionActive&&(yield n.rollbackTransaction())}catch(c){f+=` : ${c.message}`}return Promise.reject(new Error(`ExecSet: ${f}`))}finally{if(e&&(n.isTransactionActive=!1),n.autoSave)try{yield n.saveToStore()}catch(u){return n._isDBOpen=!1,Promise.reject(`ExecSet: ${u}`)}}})()}selectSQL(t,e){var r=this;return(0,O.Z)(function*(){if(!r._isDBOpen){let n=`SelectSQL: Database ${r.dbName} `;return n+="not opened",Promise.reject(new Error(n))}try{let n=yield se.queryAll(r.mDb,t,e);return Promise.resolve(n)}catch(n){return Promise.reject(new Error(`SelectSQL: ${n.message}`))}})()}runSQL(t,e,r=!0,n){var i=this;return(0,O.Z)(function*(){let o=-1;if(!i._isDBOpen){let c=`RunSQL: Database ${i.dbName} `;return c+="not opened",Promise.reject(new Error(c))}const u={changes:-1,lastId:-1};let f=-1;try{f=yield se.dbChanges(i.mDb),r&&!i.isTransactionActive&&(yield i.beginTransaction())}catch(c){return Promise.reject(new Error(`RunSQL: ${c.message}`))}try{const c=yield se.run(i.mDb,t,e,!1,n);if(o=c.lastId,o<0)return Promise.reject(new Error("RunSQL: lastId < 0"));r&&i.isTransactionActive&&(yield i.commitTransaction());const y=(yield se.dbChanges(i.mDb))-f;return u.changes=y,u.lastId=o,u.values=c.values?c.values:[],Promise.resolve(u)}catch(c){let y=`RunSQL: ${c.message}`;try{r&&i.isTransactionActive&&(yield i.rollbackTransaction())}catch(m){y+=` : ${m.message}`}return Promise.reject(new Error(`${y}`))}finally{if(r&&i.setIsTransActive(!1),i.autoSave)try{yield i.saveToStore()}catch(c){return i._isDBOpen=!1,Promise.reject(`ExecSet: ${c}`)}}})()}getTableNames(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen){let e=`GetTableNames: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{let e=yield se.getTableList(t.mDb);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`GetTableNames: ${e.message}`))}})()}isTable(t){var e=this;return(0,O.Z)(function*(){if(!e._isDBOpen){let r=`isTable: Database ${e.dbName} `;return r+="not opened",Promise.reject(new Error(r))}try{const r=yield se.isTableExists(e.mDb,t);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`IsTable: ${r.message}`))}})()}createSyncTable(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen){let r=`createSyncTable: Database ${t.dbName} `;return r+="not opened",Promise.reject(new Error(r))}let e=-1;try{if(yield se.isTableExists(t.mDb,"sync_table"))return Promise.resolve(0);{const n=yield se.isLastModified(t.mDb,t._isDBOpen),i=yield se.isSqlDeleted(t.mDb,t._isDBOpen);if(n&&i){const o=Math.round((new Date).getTime()/1e3);let u="\n                          CREATE TABLE IF NOT EXISTS sync_table (\n                              id INTEGER PRIMARY KEY NOT NULL,\n                              sync_date INTEGER\n                              );";return u+=`INSERT INTO sync_table (sync_date) VALUES (\n                              "${o}");`,e=yield se.execute(t.mDb,u,!1),Promise.resolve(e)}return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}catch(r){return Promise.reject(new Error(`CreateSyncTable: ${r.message}`))}})()}getSyncDate(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen){let e=`getSyncDate: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{if(!(yield se.isTableExists(t.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));const r=yield Ke.getSynchroDate(t.mDb);return Promise.resolve(r)}catch(e){return Promise.reject(new Error(`getSyncDate: ${e.message}`))}})()}setSyncDate(t){var e=this;return(0,O.Z)(function*(){if(!e._isDBOpen){let r=`SetSyncDate: Database ${e.dbName} `;return r+="not opened",{result:!1,message:r}}try{if(!(yield se.isTableExists(e.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));const n=Math.round(new Date(t).getTime()/1e3);let i="UPDATE sync_table SET sync_date = ";return i+=`${n} WHERE id = 1;`,(yield se.execute(e.mDb,i,!1))<0?{result:!1,message:"setSyncDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setSyncDate failed: ${r.message}`}}})()}importJson(t,e){var r=this;return(0,O.Z)(function*(){let n=0;if(!r._isDBOpen)return Promise.reject(new Error("ImportJson: database is closed"));try{return yield se.setForeignKeyConstraintsEnabled(r.mDb,!1),t.tables&&t.tables.length>0&&(n=yield ct.createDatabaseSchema(r,t),e.emit({progress:`Schema creation completed changes: ${n}`}),-1!=n&&(n+=(yield ct.createTablesData(r,t,e)),e.emit({progress:`Tables data creation completed changes: ${n}`}))),t.views&&t.views.length>0&&(n+=(yield ct.createViews(r,t))),yield se.setForeignKeyConstraintsEnabled(r.mDb,!0),yield r.saveToStore(),Promise.resolve(n)}catch(i){return Promise.reject(new Error(`ImportJson: ${i.message}`))}})()}exportJson(t,e){var r=this;return(0,O.Z)(function*(){const n={};if(n.database=r.dbName.slice(0,-9),n.version=r.version,n.encrypted=!1,n.mode=t,!r._isDBOpen)return Promise.reject(new Error("ExportJson: database is closed"));try{(yield se.isTableExists(r.mDb,"sync_table"))&&(yield Ke.setLastExportDate(r.mDb,(new Date).toISOString()));const o=yield Ke.createExportObject(r.mDb,n,e);return 0===Object.keys(o).length?Promise.reject(new Error("ExportJson: return Object is empty No data to synchronize")):We.isJsonSQLite(o)?Promise.resolve(o):Promise.reject(new Error("ExportJson: retJson not valid"))}catch(i){return Promise.reject(new Error(`ExportJson: ${i.message}`))}})()}deleteExportedRows(){var t=this;return(0,O.Z)(function*(){if(!t._isDBOpen)return Promise.reject(new Error("deleteExportedRows: database is closed"));try{return yield Ke.delExportedRows(t.mDb),Promise.resolve()}catch(e){return Promise.reject(new Error(`deleteExportedRows: ${e.message}`))}})()}}var Vn=Xr(function(s,t){s.exports=function e(r,n,i){function o(c,y){if(!n[c]){if(!r[c]){if(!y&&At)return At();if(u)return u(c,!0);var v=new Error("Cannot find module '"+c+"'");throw v.code="MODULE_NOT_FOUND",v}var p=n[c]={exports:{}};r[c][0].call(p.exports,function(E){return o(r[c][1][E]||E)},p,p.exports,e,r,n,i)}return n[c].exports}for(var u=At,f=0;f<i.length;f++)o(i[f]);return o}({1:[function(e,r,n){(function(i){var u,o=i.MutationObserver||i.WebKitMutationObserver;if(o){var f=0,c=new o(E),y=i.document.createTextNode("");c.observe(y,{characterData:!0}),u=function(){y.data=f=++f%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var m=new i.MessageChannel;m.port1.onmessage=E,u=function(){m.port2.postMessage(0)}}else u="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var T=i.document.createElement("script");T.onreadystatechange=function(){E(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},i.document.documentElement.appendChild(T)}:function(){setTimeout(E,0)};var v,p=[];function E(){v=!0;for(var T,k,S=p.length;S;){for(k=p,p=[],T=-1;++T<S;)k[T]();S=p.length}v=!1}r.exports=function _(T){1===p.push(T)&&!v&&u()}}).call(this,typeof $t<"u"?$t:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,r,n){var i=e(1);function o(){}var u={},f=["REJECTED"],c=["FULFILLED"],y=["PENDING"];function m(A){if("function"!=typeof A)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,A!==o&&_(this,A)}function v(A,V,M){this.promise=A,"function"==typeof V&&(this.onFulfilled=V,this.callFulfilled=this.otherCallFulfilled),"function"==typeof M&&(this.onRejected=M,this.callRejected=this.otherCallRejected)}function p(A,V,M){i(function(){var Q;try{Q=V(M)}catch(G){return u.reject(A,G)}Q===A?u.reject(A,new TypeError("Cannot resolve promise with itself")):u.resolve(A,Q)})}function E(A){var V=A&&A.then;if(A&&("object"==typeof A||"function"==typeof A)&&"function"==typeof V)return function(){V.apply(A,arguments)}}function _(A,V){var M=!1;function Q(I){M||(M=!0,u.reject(A,I))}function G(I){M||(M=!0,u.resolve(A,I))}var _e=T(function ce(){V(G,Q)});"error"===_e.status&&Q(_e.value)}function T(A,V){var M={};try{M.value=A(V),M.status="success"}catch(Q){M.status="error",M.value=Q}return M}r.exports=m,m.prototype.catch=function(A){return this.then(null,A)},m.prototype.then=function(A,V){if("function"!=typeof A&&this.state===c||"function"!=typeof V&&this.state===f)return this;var M=new this.constructor(o);return this.state!==y?p(M,this.state===c?A:V,this.outcome):this.queue.push(new v(M,A,V)),M},v.prototype.callFulfilled=function(A){u.resolve(this.promise,A)},v.prototype.otherCallFulfilled=function(A){p(this.promise,this.onFulfilled,A)},v.prototype.callRejected=function(A){u.reject(this.promise,A)},v.prototype.otherCallRejected=function(A){p(this.promise,this.onRejected,A)},u.resolve=function(A,V){var M=T(E,V);if("error"===M.status)return u.reject(A,M.value);var Q=M.value;if(Q)_(A,Q);else{A.state=c,A.outcome=V;for(var G=-1,ce=A.queue.length;++G<ce;)A.queue[G].callFulfilled(V)}return A},u.reject=function(A,V){A.state=f,A.outcome=V;for(var M=-1,Q=A.queue.length;++M<Q;)A.queue[M].callRejected(V);return A},m.resolve=function k(A){return A instanceof this?A:u.resolve(new this(o),A)},m.reject=function S(A){var V=new this(o);return u.reject(V,A)},m.all=function N(A){var V=this;if("[object Array]"!==Object.prototype.toString.call(A))return this.reject(new TypeError("must be an array"));var M=A.length,Q=!1;if(!M)return this.resolve([]);for(var G=new Array(M),ce=0,_e=-1,I=new this(o);++_e<M;)W(A[_e],_e);return I;function W(g,J){V.resolve(g).then(function Pe(te){G[J]=te,++ce===M&&!Q&&(Q=!0,u.resolve(I,G))},function(te){Q||(Q=!0,u.reject(I,te))})}},m.race=function L(A){var V=this;if("[object Array]"!==Object.prototype.toString.call(A))return this.reject(new TypeError("must be an array"));var M=A.length,Q=!1;if(!M)return this.resolve([]);for(var G=-1,ce=new this(o);++G<M;)V.resolve(A[G]).then(function(W){Q||(Q=!0,u.resolve(ce,W))},function(W){Q||(Q=!0,u.reject(ce,W))});return ce}},{1:1}],3:[function(e,r,n){(function(i){"function"!=typeof i.Promise&&(i.Promise=e(2))}).call(this,typeof $t<"u"?$t:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,r,n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};var f=function u(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function y(b,R){b=b||[],R=R||{};try{return new Blob(b,R)}catch(B){if("TypeError"!==B.name)throw B;for(var F=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),$=0;$<b.length;$+=1)F.append(b[$]);return F.getBlob(R.type)}}typeof Promise>"u"&&e(3);var m=Promise;function v(b,R){R&&b.then(function(P){R(null,P)},function(P){R(P)})}function p(b,R,P){"function"==typeof R&&b.then(R),"function"==typeof P&&b.catch(P)}function E(b){return"string"!=typeof b&&(console.warn(b+" used as a key, but it is not a string."),b=String(b)),b}function _(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",k=void 0,S={},N=Object.prototype.toString,L="readonly",A="readwrite";function V(b){for(var R=b.length,P=new ArrayBuffer(R),F=new Uint8Array(P),$=0;$<R;$++)F[$]=b.charCodeAt($);return P}function Q(b){return"boolean"==typeof k?m.resolve(k):function M(b){return new m(function(R){var P=b.transaction(T,A),F=y([""]);P.objectStore(T).put(F,"key"),P.onabort=function($){$.preventDefault(),$.stopPropagation(),R(!1)},P.oncomplete=function(){var $=navigator.userAgent.match(/Chrome\/(\d+)/),B=navigator.userAgent.match(/Edge\//);R(B||!$||parseInt($[1],10)>=43)}}).catch(function(){return!1})}(b).then(function(R){return k=R})}function G(b){var R=S[b.name],P={};P.promise=new m(function(F,$){P.resolve=F,P.reject=$}),R.deferredOperations.push(P),R.dbReady=R.dbReady?R.dbReady.then(function(){return P.promise}):P.promise}function ce(b){var P=S[b.name].deferredOperations.pop();if(P)return P.resolve(),P.promise}function _e(b,R){var F=S[b.name].deferredOperations.pop();if(F)return F.reject(R),F.promise}function I(b,R){return new m(function(P,F){if(S[b.name]=S[b.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},b.db){if(!R)return P(b.db);G(b),b.db.close()}var $=[b.name];R&&$.push(b.version);var B=f.open.apply(f,$);R&&(B.onupgradeneeded=function(X){var ae=B.result;try{ae.createObjectStore(b.storeName),X.oldVersion<=1&&ae.createObjectStore(T)}catch(fe){if("ConstraintError"!==fe.name)throw fe;console.warn('The database "'+b.name+'" has been upgraded from version '+X.oldVersion+" to version "+X.newVersion+', but the storage "'+b.storeName+'" already exists.')}}),B.onerror=function(X){X.preventDefault(),F(B.error)},B.onsuccess=function(){var X=B.result;X.onversionchange=function(ae){ae.target.close()},P(X),ce(b)}})}function W(b){return I(b,!1)}function g(b){return I(b,!0)}function J(b,R){if(!b.db)return!0;var P=!b.db.objectStoreNames.contains(b.storeName),$=b.version>b.db.version;if(b.version<b.db.version&&(b.version!==R&&console.warn('The database "'+b.name+"\" can't be downgraded from version "+b.db.version+" to version "+b.version+"."),b.version=b.db.version),$||P){if(P){var B=b.db.version+1;B>b.version&&(b.version=B)}return!0}return!1}function te(b){return y([V(atob(b.data))],{type:b.type})}function xe(b){return b&&b.__local_forage_encoded_blob}function le(b){var R=this,P=R._initReady().then(function(){var F=S[R._dbInfo.name];if(F&&F.dbReady)return F.dbReady});return p(P,b,b),P}function z(b,R,P,F){void 0===F&&(F=1);try{var $=b.db.transaction(b.storeName,R);P(null,$)}catch(B){if(F>0&&(!b.db||"InvalidStateError"===B.name||"NotFoundError"===B.name))return m.resolve().then(function(){if(!b.db||"NotFoundError"===B.name&&!b.db.objectStoreNames.contains(b.storeName)&&b.version<=b.db.version)return b.db&&(b.version=b.db.version+1),g(b)}).then(function(){return function he(b){G(b);for(var R=S[b.name],P=R.forages,F=0;F<P.length;F++){var $=P[F];$._dbInfo.db&&($._dbInfo.db.close(),$._dbInfo.db=null)}return b.db=null,W(b).then(function(B){return b.db=B,J(b)?g(b):B}).then(function(B){b.db=R.db=B;for(var X=0;X<P.length;X++)P[X]._dbInfo.db=B}).catch(function(B){throw _e(b,B),B})}(b).then(function(){z(b,R,P,F-1)})}).catch(P);P(B)}}var nt={_driver:"asyncStorage",_initStorage:function Te(b){var R=this,P={db:null};if(b)for(var F in b)P[F]=b[F];var $=S[P.name];$||(S[P.name]=$={forages:[],db:null,dbReady:null,deferredOperations:[]}),$.forages.push(R),R._initReady||(R._initReady=R.ready,R.ready=le);var B=[];function X(){return m.resolve()}for(var ae=0;ae<$.forages.length;ae++){var fe=$.forages[ae];fe!==R&&B.push(fe._initReady().catch(X))}var me=$.forages.slice(0);return m.all(B).then(function(){return P.db=$.db,W(P)}).then(function(ge){return P.db=ge,J(P,R._defaultConfig.version)?g(P):ge}).then(function(ge){P.db=$.db=ge,R._dbInfo=P;for(var we=0;we<me.length;we++){var je=me[we];je!==R&&(je._dbInfo.db=P.db,je._dbInfo.version=P.version)}})},_support:function c(){try{if(!f||!f.open)return!1;var b=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),R="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!b||R)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function ye(b,R){var P=this,F=new m(function($,B){P.ready().then(function(){z(P._dbInfo,L,function(X,ae){if(X)return B(X);try{var me=ae.objectStore(P._dbInfo.storeName).openCursor(),ge=1;me.onsuccess=function(){var we=me.result;if(we){var je=we.value;xe(je)&&(je=te(je));var Be=b(je,we.key,ge++);void 0!==Be?$(Be):we.continue()}else $()},me.onerror=function(){B(me.error)}}catch(we){B(we)}})}).catch(B)});return v(F,R),F},getItem:function be(b,R){var P=this;b=E(b);var F=new m(function($,B){P.ready().then(function(){z(P._dbInfo,L,function(X,ae){if(X)return B(X);try{var me=ae.objectStore(P._dbInfo.storeName).get(b);me.onsuccess=function(){var ge=me.result;void 0===ge&&(ge=null),xe(ge)&&(ge=te(ge)),$(ge)},me.onerror=function(){B(me.error)}}catch(ge){B(ge)}})}).catch(B)});return v(F,R),F},setItem:function Ge(b,R,P){var F=this;b=E(b);var $=new m(function(B,X){var ae;F.ready().then(function(){return ae=F._dbInfo,"[object Blob]"===N.call(R)?Q(ae.db).then(function(fe){return fe?R:function Pe(b){return new m(function(R,P){var F=new FileReader;F.onerror=P,F.onloadend=function($){var B=btoa($.target.result||"");R({__local_forage_encoded_blob:!0,data:B,type:b.type})},F.readAsBinaryString(b)})}(R)}):R}).then(function(fe){z(F._dbInfo,A,function(me,ge){if(me)return X(me);try{var we=ge.objectStore(F._dbInfo.storeName);null===fe&&(fe=void 0);var je=we.put(fe,b);ge.oncomplete=function(){void 0===fe&&(fe=null),B(fe)},ge.onabort=ge.onerror=function(){X(je.error?je.error:je.transaction.error)}}catch(Be){X(Be)}})}).catch(X)});return v($,P),$},removeItem:function Qe(b,R){var P=this;b=E(b);var F=new m(function($,B){P.ready().then(function(){z(P._dbInfo,A,function(X,ae){if(X)return B(X);try{var me=ae.objectStore(P._dbInfo.storeName).delete(b);ae.oncomplete=function(){$()},ae.onerror=function(){B(me.error)},ae.onabort=function(){B(me.error?me.error:me.transaction.error)}}catch(ge){B(ge)}})}).catch(B)});return v(F,R),F},clear:function Re(b){var R=this,P=new m(function(F,$){R.ready().then(function(){z(R._dbInfo,A,function(B,X){if(B)return $(B);try{var fe=X.objectStore(R._dbInfo.storeName).clear();X.oncomplete=function(){F()},X.onabort=X.onerror=function(){$(fe.error?fe.error:fe.transaction.error)}}catch(me){$(me)}})}).catch($)});return v(P,b),P},length:function Ce(b){var R=this,P=new m(function(F,$){R.ready().then(function(){z(R._dbInfo,L,function(B,X){if(B)return $(B);try{var fe=X.objectStore(R._dbInfo.storeName).count();fe.onsuccess=function(){F(fe.result)},fe.onerror=function(){$(fe.error)}}catch(me){$(me)}})}).catch($)});return v(P,b),P},key:function Ue(b,R){var P=this,F=new m(function($,B){b<0?$(null):P.ready().then(function(){z(P._dbInfo,L,function(X,ae){if(X)return B(X);try{var fe=ae.objectStore(P._dbInfo.storeName),me=!1,ge=fe.openKeyCursor();ge.onsuccess=function(){var we=ge.result;we?0===b||me?$(we.key):(me=!0,we.advance(b)):$(null)},ge.onerror=function(){B(ge.error)}}catch(we){B(we)}})}).catch(B)});return v(F,R),F},keys:function Ze(b){var R=this,P=new m(function(F,$){R.ready().then(function(){z(R._dbInfo,L,function(B,X){if(B)return $(B);try{var fe=X.objectStore(R._dbInfo.storeName).openKeyCursor(),me=[];fe.onsuccess=function(){var ge=fe.result;ge?(me.push(ge.key),ge.continue()):F(me)},fe.onerror=function(){$(fe.error)}}catch(ge){$(ge)}})}).catch($)});return v(P,b),P},dropInstance:function Xe(b,R){R=_.apply(this,arguments);var $,P=this.config();return(b="function"!=typeof b&&b||{}).name||(b.name=b.name||P.name,b.storeName=b.storeName||P.storeName),v($=b.name?(b.name===P.name&&this._dbInfo.db?m.resolve(this._dbInfo.db):W(b).then(function(ae){var fe=S[b.name],me=fe.forages;fe.db=ae;for(var ge=0;ge<me.length;ge++)me[ge]._dbInfo.db=ae;return ae})).then(b.storeName?function(ae){if(ae.objectStoreNames.contains(b.storeName)){var fe=ae.version+1;G(b);var me=S[b.name],ge=me.forages;ae.close();for(var we=0;we<ge.length;we++){var je=ge[we];je._dbInfo.db=null,je._dbInfo.version=fe}return new m(function($e,He){var Me=f.open(b.name,fe);Me.onerror=function(ot){Me.result.close(),He(ot)},Me.onupgradeneeded=function(){Me.result.deleteObjectStore(b.storeName)},Me.onsuccess=function(){var ot=Me.result;ot.close(),$e(ot)}}).then(function($e){me.db=$e;for(var He=0;He<ge.length;He++){var Me=ge[He];Me._dbInfo.db=$e,ce(Me._dbInfo)}}).catch(function($e){throw(_e(b,$e)||m.resolve()).catch(function(){}),$e})}}:function(ae){G(b);var fe=S[b.name],me=fe.forages;ae.close();for(var ge=0;ge<me.length;ge++)me[ge]._dbInfo.db=null;return new m(function(Be,$e){var He=f.deleteDatabase(b.name);He.onerror=function(){var Me=He.result;Me&&Me.close(),$e(He.error)},He.onblocked=function(){console.warn('dropInstance blocked for database "'+b.name+'" until all open connections are closed')},He.onsuccess=function(){var Me=He.result;Me&&Me.close(),Be(Me)}}).then(function(Be){fe.db=Be;for(var $e=0;$e<me.length;$e++)ce(me[$e]._dbInfo)}).catch(function(Be){throw(_e(b,Be)||m.resolve()).catch(function(){}),Be})}):m.reject("Invalid arguments"),R),$}};var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=/^~~local_forage_type~([^~]+)~/,w="__lfsc__:",oe="arbf",ne="blob",Z="si08",kt=Object.prototype.toString;function Ve(b){var F,B,X,ae,fe,R=.75*b.length,P=b.length,$=0;"="===b[b.length-1]&&(R--,"="===b[b.length-2]&&R--);var me=new ArrayBuffer(R),ge=new Uint8Array(me);for(F=0;F<P;F+=4)B=Y.indexOf(b[F]),X=Y.indexOf(b[F+1]),ae=Y.indexOf(b[F+2]),fe=Y.indexOf(b[F+3]),ge[$++]=B<<2|X>>4,ge[$++]=(15&X)<<4|ae>>2,ge[$++]=(3&ae)<<6|63&fe;return me}function Tt(b){var F,R=new Uint8Array(b),P="";for(F=0;F<R.length;F+=3)P+=Y[R[F]>>2],P+=Y[(3&R[F])<<4|R[F+1]>>4],P+=Y[(15&R[F+1])<<2|R[F+2]>>6],P+=Y[63&R[F+2]];return R.length%3==2?P=P.substring(0,P.length-1)+"=":R.length%3==1&&(P=P.substring(0,P.length-2)+"=="),P}var It={serialize:function Se(b,R){var P="";if(b&&(P=kt.call(b)),b&&("[object ArrayBuffer]"===P||b.buffer&&"[object ArrayBuffer]"===kt.call(b.buffer))){var F,$=w;b instanceof ArrayBuffer?(F=b,$+=oe):(F=b.buffer,"[object Int8Array]"===P?$+=Z:"[object Uint8Array]"===P?$+="ui08":"[object Uint8ClampedArray]"===P?$+="uic8":"[object Int16Array]"===P?$+="si16":"[object Uint16Array]"===P?$+="ur16":"[object Int32Array]"===P?$+="si32":"[object Uint32Array]"===P?$+="ui32":"[object Float32Array]"===P?$+="fl32":"[object Float64Array]"===P?$+="fl64":R(new Error("Failed to get type for BinaryArray"))),R($+Tt(F))}else if("[object Blob]"===P){var B=new FileReader;B.onload=function(){var X="~~local_forage_type~"+b.type+"~"+Tt(this.result);R(w+ne+X)},B.readAsArrayBuffer(b)}else try{R(JSON.stringify(b))}catch(X){console.error("Couldn't convert value into a JSON string: ",b),R(null,X)}},deserialize:function at(b){if(b.substring(0,9)!==w)return JSON.parse(b);var F,R=b.substring(13),P=b.substring(9,13);if(P===ne&&D.test(R)){var $=R.match(D);F=$[1],R=R.substring($[0].length)}var B=Ve(R);switch(P){case oe:return B;case ne:return y([B],{type:F});case Z:return new Int8Array(B);case"ui08":return new Uint8Array(B);case"uic8":return new Uint8ClampedArray(B);case"si16":return new Int16Array(B);case"ur16":return new Uint16Array(B);case"si32":return new Int32Array(B);case"ui32":return new Uint32Array(B);case"fl32":return new Float32Array(B);case"fl64":return new Float64Array(B);default:throw new Error("Unkown type: "+P)}},stringToBuffer:Ve,bufferToString:Tt};function lt(b,R,P,F){b.executeSql("CREATE TABLE IF NOT EXISTS "+R.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],P,F)}function et(b,R,P,F,$,B){b.executeSql(P,F,$,function(X,ae){ae.code===ae.SYNTAX_ERR?X.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[R.storeName],function(fe,me){me.rows.length?B(fe,ae):lt(fe,R,function(){fe.executeSql(P,F,$,B)},B)},B):B(X,ae)},B)}function bt(b,R,P,F){var $=this;b=E(b);var B=new m(function(X,ae){$.ready().then(function(){void 0===R&&(R=null);var fe=R,me=$._dbInfo;me.serializer.serialize(R,function(ge,we){we?ae(we):me.db.transaction(function(je){et(je,me,"INSERT OR REPLACE INTO "+me.storeName+" (key, value) VALUES (?, ?)",[b,ge],function(){X(fe)},function(Be,$e){ae($e)})},function(je){if(je.code===je.QUOTA_ERR){if(F>0)return void X(bt.apply($,[b,fe,P,F-1]));ae(je)}})})}).catch(ae)});return v(B,P),B}var Lt={_driver:"webSQLStorage",_initStorage:function ar(b){var R=this,P={db:null};if(b)for(var F in b)P[F]="string"!=typeof b[F]?b[F].toString():b[F];var $=new m(function(B,X){try{P.db=openDatabase(P.name,String(P.version),P.description,P.size)}catch(ae){return X(ae)}P.db.transaction(function(ae){lt(ae,P,function(){R._dbInfo=P,B()},function(fe,me){X(me)})},X)});return P.serializer=It,$},_support:function h(){return"function"==typeof openDatabase}(),iterate:function ee(b,R){var P=this,F=new m(function($,B){P.ready().then(function(){var X=P._dbInfo;X.db.transaction(function(ae){et(ae,X,"SELECT * FROM "+X.storeName,[],function(fe,me){for(var ge=me.rows,we=ge.length,je=0;je<we;je++){var Be=ge.item(je),$e=Be.value;if($e&&($e=X.serializer.deserialize($e)),void 0!==($e=b($e,Be.key,je+1)))return void $($e)}$()},function(fe,me){B(me)})})}).catch(B)});return v(F,R),F},getItem:function Gt(b,R){var P=this;b=E(b);var F=new m(function($,B){P.ready().then(function(){var X=P._dbInfo;X.db.transaction(function(ae){et(ae,X,"SELECT * FROM "+X.storeName+" WHERE key = ? LIMIT 1",[b],function(fe,me){var ge=me.rows.length?me.rows.item(0).value:null;ge&&(ge=X.serializer.deserialize(ge)),$(ge)},function(fe,me){B(me)})})}).catch(B)});return v(F,R),F},setItem:function st(b,R,P){return bt.apply(this,[b,R,P,1])},removeItem:function Vt(b,R){var P=this;b=E(b);var F=new m(function($,B){P.ready().then(function(){var X=P._dbInfo;X.db.transaction(function(ae){et(ae,X,"DELETE FROM "+X.storeName+" WHERE key = ?",[b],function(){$()},function(fe,me){B(me)})})}).catch(B)});return v(F,R),F},clear:function ur(b){var R=this,P=new m(function(F,$){R.ready().then(function(){var B=R._dbInfo;B.db.transaction(function(X){et(X,B,"DELETE FROM "+B.storeName,[],function(){F()},function(ae,fe){$(fe)})})}).catch($)});return v(P,b),P},length:function Ir(b){var R=this,P=new m(function(F,$){R.ready().then(function(){var B=R._dbInfo;B.db.transaction(function(X){et(X,B,"SELECT COUNT(key) as c FROM "+B.storeName,[],function(ae,fe){var me=fe.rows.item(0).c;F(me)},function(ae,fe){$(fe)})})}).catch($)});return v(P,b),P},key:function jt(b,R){var P=this,F=new m(function($,B){P.ready().then(function(){var X=P._dbInfo;X.db.transaction(function(ae){et(ae,X,"SELECT key FROM "+X.storeName+" WHERE id = ? LIMIT 1",[b+1],function(fe,me){var ge=me.rows.length?me.rows.item(0).key:null;$(ge)},function(fe,me){B(me)})})}).catch(B)});return v(F,R),F},keys:function jr(b){var R=this,P=new m(function(F,$){R.ready().then(function(){var B=R._dbInfo;B.db.transaction(function(X){et(X,B,"SELECT key FROM "+B.storeName,[],function(ae,fe){for(var me=[],ge=0;ge<fe.rows.length;ge++)me.push(fe.rows.item(ge).key);F(me)},function(ae,fe){$(fe)})})}).catch($)});return v(P,b),P},dropInstance:function Rr(b,R){R=_.apply(this,arguments);var P=this.config();(b="function"!=typeof b&&b||{}).name||(b.name=b.name||P.name,b.storeName=b.storeName||P.storeName);var $,F=this;return v($=b.name?new m(function(B){var X;X=b.name===P.name?F._dbInfo.db:openDatabase(b.name,"","",0),B(b.storeName?{db:X,storeNames:[b.storeName]}:function an(b){return new m(function(R,P){b.transaction(function(F){F.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function($,B){for(var X=[],ae=0;ae<B.rows.length;ae++)X.push(B.rows.item(ae).name);R({db:b,storeNames:X})},function($,B){P(B)})},function(F){P(F)})})}(X))}).then(function(B){return new m(function(X,ae){B.db.transaction(function(fe){function me(Be){return new m(function($e,He){fe.executeSql("DROP TABLE IF EXISTS "+Be,[],function(){$e()},function(Me,ot){He(ot)})})}for(var ge=[],we=0,je=B.storeNames.length;we<je;we++)ge.push(me(B.storeNames[we]));m.all(ge).then(function(){X()}).catch(function(Be){ae(Be)})},function(fe){ae(fe)})})}):m.reject("Invalid arguments"),R),$}};function cr(b,R){var P=b.name+"/";return b.storeName!==R.storeName&&(P+=b.storeName+"/"),P}function Nr(){return!function un(){var b="_localforage_support_test";try{return localStorage.setItem(b,!0),localStorage.removeItem(b),!1}catch{return!0}}()||localStorage.length>0}var Ht={_driver:"localStorageWrapper",_initStorage:function cn(b){var P={};if(b)for(var F in b)P[F]=b[F];return P.keyPrefix=cr(b,this._defaultConfig),Nr()?(this._dbInfo=P,P.serializer=It,m.resolve()):m.reject()},_support:function Or(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function tr(b,R){var P=this,F=P.ready().then(function(){for(var $=P._dbInfo,B=$.keyPrefix,X=B.length,ae=localStorage.length,fe=1,me=0;me<ae;me++){var ge=localStorage.key(me);if(0===ge.indexOf(B)){var we=localStorage.getItem(ge);if(we&&(we=$.serializer.deserialize(we)),void 0!==(we=b(we,ge.substring(X),fe++)))return we}}});return v(F,R),F},getItem:function Cr(b,R){var P=this;b=E(b);var F=P.ready().then(function(){var $=P._dbInfo,B=localStorage.getItem($.keyPrefix+b);return B&&(B=$.serializer.deserialize(B)),B});return v(F,R),F},setItem:function Fr(b,R,P){var F=this;b=E(b);var $=F.ready().then(function(){void 0===R&&(R=null);var B=R;return new m(function(X,ae){var fe=F._dbInfo;fe.serializer.serialize(R,function(me,ge){if(ge)ae(ge);else try{localStorage.setItem(fe.keyPrefix+b,me),X(B)}catch(we){("QuotaExceededError"===we.name||"NS_ERROR_DOM_QUOTA_REACHED"===we.name)&&ae(we),ae(we)}})})});return v($,P),$},removeItem:function Br(b,R){var P=this;b=E(b);var F=P.ready().then(function(){localStorage.removeItem(P._dbInfo.keyPrefix+b)});return v(F,R),F},clear:function lr(b){var R=this,P=R.ready().then(function(){for(var F=R._dbInfo.keyPrefix,$=localStorage.length-1;$>=0;$--){var B=localStorage.key($);0===B.indexOf(F)&&localStorage.removeItem(B)}});return v(P,b),P},length:function fr(b){var P=this.keys().then(function(F){return F.length});return v(P,b),P},key:function dt(b,R){var P=this,F=P.ready().then(function(){var B,$=P._dbInfo;try{B=localStorage.key(b)}catch{B=null}return B&&(B=B.substring($.keyPrefix.length)),B});return v(F,R),F},keys:function rr(b){var R=this,P=R.ready().then(function(){for(var F=R._dbInfo,$=localStorage.length,B=[],X=0;X<$;X++){var ae=localStorage.key(X);0===ae.indexOf(F.keyPrefix)&&B.push(ae.substring(F.keyPrefix.length))}return B});return v(P,b),P},dropInstance:function $r(b,R){if(R=_.apply(this,arguments),!(b="function"!=typeof b&&b||{}).name){var P=this.config();b.name=b.name||P.name,b.storeName=b.storeName||P.storeName}var $,F=this;return v($=b.name?new m(function(B){B(b.storeName?cr(b,F._defaultConfig):b.name+"/")}).then(function(B){for(var X=localStorage.length-1;X>=0;X--){var ae=localStorage.key(X);0===ae.indexOf(B)&&localStorage.removeItem(ae)}}):m.reject("Invalid arguments"),R),$}},Lr=function(R,P){return R===P||"number"==typeof R&&"number"==typeof P&&isNaN(R)&&isNaN(P)},nr=function(R,P){for(var F=R.length,$=0;$<F;){if(Lr(R[$],P))return!0;$++}return!1},hr=Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)},mt={},ir={},Rt={INDEXEDDB:nt,WEBSQL:Lt,LOCALSTORAGE:Ht},zr=[Rt.INDEXEDDB._driver,Rt.WEBSQL._driver,Rt.LOCALSTORAGE._driver],Kt=["dropInstance"],dr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Kt),Mr={description:"",driver:zr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function qr(b,R){b[R]=function(){var P=arguments;return b.ready().then(function(){return b[R].apply(b,P)})}}function sr(){for(var b=1;b<arguments.length;b++){var R=arguments[b];if(R)for(var P in R)R.hasOwnProperty(P)&&(arguments[0][P]=hr(R[P])?R[P].slice():R[P])}return arguments[0]}var Yt=function(){function b(R){for(var P in function o(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")}(this,b),Rt)if(Rt.hasOwnProperty(P)){var F=Rt[P],$=F._driver;this[P]=$,mt[$]||this.defineDriver(F)}this._defaultConfig=sr({},Mr),this._config=sr({},this._defaultConfig,R),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return b.prototype.config=function(P){if("object"===(typeof P>"u"?"undefined":i(P))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var F in P){if("storeName"===F&&(P[F]=P[F].replace(/\W/g,"_")),"version"===F&&"number"!=typeof P[F])return new Error("Database version must be a number.");this._config[F]=P[F]}return!("driver"in P)||!P.driver||this.setDriver(this._config.driver)}return"string"==typeof P?this._config[P]:this._config},b.prototype.defineDriver=function(P,F,$){var B=new m(function(X,ae){try{var fe=P._driver,me=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!P._driver)return void ae(me);for(var ge=dr.concat("_initStorage"),we=0,je=ge.length;we<je;we++){var Be=ge[we];if((!nr(Kt,Be)||P[Be])&&"function"!=typeof P[Be])return void ae(me)}!function(){for(var Ot=function(fn){return function(){var Zr=new Error("Method "+fn+" is not implemented by the current driver"),Qt=m.reject(Zr);return v(Qt,arguments[arguments.length-1]),Qt}},Nt=0,pr=Kt.length;Nt<pr;Nt++){var yr=Kt[Nt];P[yr]||(P[yr]=Ot(yr))}}();var Me=function(Ot){mt[fe]&&console.info("Redefining LocalForage driver: "+fe),mt[fe]=P,ir[fe]=Ot,X()};"_support"in P?P._support&&"function"==typeof P._support?P._support().then(Me,ae):Me(!!P._support):Me(!0)}catch(ot){ae(ot)}});return p(B,F,$),B},b.prototype.driver=function(){return this._driver||null},b.prototype.getDriver=function(P,F,$){var B=mt[P]?m.resolve(mt[P]):m.reject(new Error("Driver not found."));return p(B,F,$),B},b.prototype.getSerializer=function(P){var F=m.resolve(It);return p(F,P),F},b.prototype.ready=function(P){var F=this,$=F._driverSet.then(function(){return null===F._ready&&(F._ready=F._initDriver()),F._ready});return p($,P,P),$},b.prototype.setDriver=function(P,F,$){var B=this;hr(P)||(P=[P]);var X=this._getSupportedDrivers(P);function ae(){B._config.driver=B.driver()}function fe(we){return B._extend(we),ae(),B._ready=B._initStorage(B._config),B._ready}var ge=null!==this._driverSet?this._driverSet.catch(function(){return m.resolve()}):m.resolve();return this._driverSet=ge.then(function(){var we=X[0];return B._dbInfo=null,B._ready=null,B.getDriver(we).then(function(je){B._driver=je._driver,ae(),B._wrapLibraryMethodsWithReady(),B._initDriver=function me(we){return function(){var je=0;return function Be(){for(;je<we.length;){var $e=we[je];return je++,B._dbInfo=null,B._ready=null,B.getDriver($e).then(fe).catch(Be)}ae();var He=new Error("No available storage method found.");return B._driverSet=m.reject(He),B._driverSet}()}}(X)})}).catch(function(){ae();var we=new Error("No available storage method found.");return B._driverSet=m.reject(we),B._driverSet}),p(this._driverSet,F,$),this._driverSet},b.prototype.supports=function(P){return!!ir[P]},b.prototype._extend=function(P){sr(this,P)},b.prototype._getSupportedDrivers=function(P){for(var F=[],$=0,B=P.length;$<B;$++){var X=P[$];this.supports(X)&&F.push(X)}return F},b.prototype._wrapLibraryMethodsWithReady=function(){for(var P=0,F=dr.length;P<F;P++)qr(this,dr[P])},b.prototype.createInstance=function(P){return new b(P)},b}(),mr=new Yt;r.exports=mr},{3:3}]},{},[4])(4)}),ys=Xr(function(s,t){s.exports=function e(r,n,i){function o(c,y){if(!n[c]){if(!r[c]){if(!y&&At)return At();if(u)return u(c,!0);var v=new Error("Cannot find module '"+c+"'");throw v.code="MODULE_NOT_FOUND",v}var p=n[c]={exports:{}};r[c][0].call(p.exports,function(E){return o(r[c][1][E]||E)},p,p.exports,e,r,n,i)}return n[c].exports}for(var u=At,f=0;f<i.length;f++)o(i[f]);return o}({1:[function(e,r,n){var i=e("./utils"),o=e("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(f){for(var c,y,m,p,E,_,T=[],k=0,S=f.length,N=S,L="string"!==i.getTypeOf(f);k<f.length;)N=S-k,m=L?(c=f[k++],y=k<S?f[k++]:0,k<S?f[k++]:0):(c=f.charCodeAt(k++),y=k<S?f.charCodeAt(k++):0,k<S?f.charCodeAt(k++):0),p=(3&c)<<4|y>>4,E=1<N?(15&y)<<2|m>>6:64,_=2<N?63&m:64,T.push(u.charAt(c>>2)+u.charAt(p)+u.charAt(E)+u.charAt(_));return T.join("")},n.decode=function(f){var c,y,m,v,p,E,_=0,T=0,k="data:";if(f.substr(0,5)===k)throw new Error("Invalid base64 input, it looks like a data url.");var S,N=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===u.charAt(64)&&N--,f.charAt(f.length-2)===u.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|N):new Array(0|N);_<f.length;)c=u.indexOf(f.charAt(_++))<<2|(v=u.indexOf(f.charAt(_++)))>>4,y=(15&v)<<4|(p=u.indexOf(f.charAt(_++)))>>2,m=(3&p)<<6|(E=u.indexOf(f.charAt(_++))),S[T++]=c,64!==p&&(S[T++]=y),64!==E&&(S[T++]=m);return S}},{"./support":30,"./utils":32}],2:[function(e,r,n){var i=e("./external"),o=e("./stream/DataWorker"),u=e("./stream/Crc32Probe"),f=e("./stream/DataLengthProbe");function c(y,m,v,p,E){this.compressedSize=y,this.uncompressedSize=m,this.crc32=v,this.compression=p,this.compressedContent=E}c.prototype={getContentWorker:function(){var y=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),m=this;return y.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(y,m,v){return y.pipe(new u).pipe(new f("uncompressedSize")).pipe(m.compressWorker(v)).pipe(new f("compressedSize")).withStreamInfo("compression",m)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,r,n){var i=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,r,n){var i=e("./utils"),o=function(){for(var u,f=[],c=0;c<256;c++){u=c;for(var y=0;y<8;y++)u=1&u?3988292384^u>>>1:u>>>1;f[c]=u}return f}();r.exports=function(u,f){return void 0!==u&&u.length?"string"!==i.getTypeOf(u)?function(c,y,m,v){var p=o,E=0+m;c^=-1;for(var _=0;_<E;_++)c=c>>>8^p[255&(c^y[_])];return-1^c}(0|f,u,u.length):function(c,y,m,v){var p=o,E=0+m;c^=-1;for(var _=0;_<E;_++)c=c>>>8^p[255&(c^y.charCodeAt(_))];return-1^c}(0|f,u,u.length):0}},{"./utils":32}],5:[function(e,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,r,n){var i;i=typeof Promise<"u"?Promise:e("lie"),r.exports={Promise:i}},{lie:37}],7:[function(e,r,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),u=e("./utils"),f=e("./stream/GenericWorker"),c=i?"uint8array":"array";function y(m,v){f.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=v,this.meta={}}n.magic="\b\0",u.inherits(y,f),y.prototype.processChunk=function(m){this.meta=m.meta,null===this._pako&&this._createPako(),this._pako.push(u.transformTo(c,m.data),!1)},y.prototype.flush=function(){f.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(v){m.push({data:v,meta:m.meta})}},n.compressWorker=function(m){return new y("Deflate",m)},n.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,r,n){function i(p,E){var _,T="";for(_=0;_<E;_++)T+=String.fromCharCode(255&p),p>>>=8;return T}function o(p,E,_,T,k,S){var N,L,A=p.file,V=p.compression,M=S!==c.utf8encode,Q=u.transformTo("string",S(A.name)),G=u.transformTo("string",c.utf8encode(A.name)),ce=A.comment,_e=u.transformTo("string",S(ce)),I=u.transformTo("string",c.utf8encode(ce)),W=G.length!==A.name.length,g=I.length!==ce.length,J="",Pe="",te="",xe=A.dir,le=A.date,he={crc32:0,compressedSize:0,uncompressedSize:0};E&&!_||(he.crc32=p.crc32,he.compressedSize=p.compressedSize,he.uncompressedSize=p.uncompressedSize);var z=0;E&&(z|=8),M||!W&&!g||(z|=2048);var ye,Qe,U=0,Te=0;xe&&(U|=16),"UNIX"===k?(Te=798,U|=(Qe=ye=A.unixPermissions,ye||(Qe=xe?16893:33204),(65535&Qe)<<16)):(Te=20,U|=function(ye){return 63&(ye||0)}(A.dosPermissions)),N=le.getUTCHours(),N<<=6,N|=le.getUTCMinutes(),N<<=5,N|=le.getUTCSeconds()/2,L=le.getUTCFullYear()-1980,L<<=4,L|=le.getUTCMonth()+1,L<<=5,L|=le.getUTCDate(),W&&(Pe=i(1,1)+i(y(Q),4)+G,J+="up"+i(Pe.length,2)+Pe),g&&(te=i(1,1)+i(y(_e),4)+I,J+="uc"+i(te.length,2)+te);var be="";return be+="\n\0",be+=i(z,2),be+=V.magic,be+=i(N,2),be+=i(L,2),be+=i(he.crc32,4),be+=i(he.compressedSize,4),be+=i(he.uncompressedSize,4),be+=i(Q.length,2),be+=i(J.length,2),{fileRecord:m.LOCAL_FILE_HEADER+be+Q+J,dirRecord:m.CENTRAL_FILE_HEADER+i(Te,2)+be+i(_e.length,2)+"\0\0\0\0"+i(U,4)+i(T,4)+Q+J+_e}}var u=e("../utils"),f=e("../stream/GenericWorker"),c=e("../utf8"),y=e("../crc32"),m=e("../signature");function v(p,E,_,T){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=_,this.encodeFileName=T,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(v,f),v.prototype.push=function(p){var E=p.meta.percent||0,_=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,f.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:_?(E+100*(_-T-1))/_:100}}))},v.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var E=this.streamFiles&&!p.file.dir;if(E){var _=o(p,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(p){this.accumulate=!1;var T,E=this.streamFiles&&!p.file.dir,_=o(p,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),E)this.push({data:(T=p,m.DATA_DESCRIPTOR+i(T.crc32,4)+i(T.compressedSize,4)+i(T.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var p=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var k,S,N,V,T=(k=this.dirRecords.length,S=this.bytesWritten-p,N=p,V=u.transformTo("string",(0,this.encodeFileName)(this.zipComment)),m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(k,2)+i(k,2)+i(S,4)+i(N,4)+i(V.length,2)+V);this.push({data:T,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(p){this._sources.push(p);var E=this;return p.on("data",function(_){E.processChunk(_)}),p.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),p.on("error",function(_){E.error(_)}),this},v.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(p){var E=this._sources;if(!f.prototype.error.call(this,p))return!1;for(var _=0;_<E.length;_++)try{E[_].error(p)}catch{}return!0},v.prototype.lock=function(){f.prototype.lock.call(this);for(var p=this._sources,E=0;E<p.length;E++)p[E].lock()},r.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,r,n){var i=e("../compressions"),o=e("./ZipFileWorker");n.generateWorker=function(u,f,c){var y=new o(f.streamFiles,c,f.platform,f.encodeFileName),m=0;try{u.forEach(function(v,p){m++;var E=function(S,N){var L=S||N,A=i[L];if(!A)throw new Error(L+" is not a valid compression method !");return A}(p.options.compression,f.compression),T=p.dir,k=p.date;p._compressWorker(E,p.options.compressionOptions||f.compressionOptions||{}).withStreamInfo("file",{name:v,dir:T,date:k,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(y)}),y.entriesCount=m}catch(v){y.error(v)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,r,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var u in this)"function"!=typeof this[u]&&(o[u]=this[u]);return o}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.10.1",i.loadAsync=function(o,u){return(new i).loadAsync(o,u)},i.external=e("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,r,n){var i=e("./utils"),o=e("./external"),u=e("./utf8"),f=e("./zipEntries"),c=e("./stream/Crc32Probe"),y=e("./nodejsUtils");function m(v){return new o.Promise(function(p,E){var _=v.decompressed.getContentWorker().pipe(new c);_.on("error",function(T){E(T)}).on("end",function(){_.streamInfo.crc32!==v.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(v,p){var E=this;return p=i.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),y.isNode&&y.isStream(v)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",v,!0,p.optimizedBinaryString,p.base64).then(function(_){var T=new f(p);return T.load(_),T}).then(function(_){var T=[o.Promise.resolve(_)],k=_.files;if(p.checkCRC32)for(var S=0;S<k.length;S++)T.push(m(k[S]));return o.Promise.all(T)}).then(function(_){for(var T=_.shift(),k=T.files,S=0;S<k.length;S++){var N=k[S],L=N.fileNameStr,A=i.resolve(N.fileNameStr);E.file(A,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:p.createFolders}),N.dir||(E.file(A).unsafeOriginalName=L)}return T.zipComment.length&&(E.comment=T.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,r,n){var i=e("../utils"),o=e("../stream/GenericWorker");function u(f,c){o.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(u,o),u.prototype._bindStream=function(f){var c=this;(this._stream=f).pause(),f.on("data",function(y){c.push({data:y,meta:{percent:0}})}).on("error",function(y){c.isPaused?this.generatedError=y:c.error(y)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},u.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,r,n){var i=e("readable-stream").Readable;function o(u,f,c){i.call(this,f),this._helper=u;var y=this;u.on("data",function(m,v){y.push(m)||y._helper.pause(),c&&c(v)}).on("error",function(m){y.emit("error",m)}).on("end",function(){y.push(null)})}e("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,r,n){r.exports={isNode:!0,newBufferFrom:function(i,o){if(ie.from&&ie.from!==Uint8Array.from)return ie.from(i,o);if("number"==typeof i)throw new Error('The "data" argument must not be a number');return new ie(i,o)},allocBuffer:function(i){if(ie.alloc)return ie.alloc(i);var o=new ie(i);return o.fill(0),o},isBuffer:function(i){return ie.isBuffer(i)},isStream:function(i){return i&&"function"==typeof i.on&&"function"==typeof i.pause&&"function"==typeof i.resume}}},{}],15:[function(e,r,n){function i(A,V,M){var Q,G=u.getTypeOf(V),ce=u.extend(M||{},y);ce.date=ce.date||new Date,null!==ce.compression&&(ce.compression=ce.compression.toUpperCase()),"string"==typeof ce.unixPermissions&&(ce.unixPermissions=parseInt(ce.unixPermissions,8)),ce.unixPermissions&&16384&ce.unixPermissions&&(ce.dir=!0),ce.dosPermissions&&16&ce.dosPermissions&&(ce.dir=!0),ce.dir&&(A=k(A)),ce.createFolders&&(Q=T(A))&&S.call(this,Q,!0),M&&void 0!==M.binary||(ce.binary=!("string"===G&&!1===ce.binary&&!1===ce.base64)),(V instanceof m&&0===V.uncompressedSize||ce.dir||!V||0===V.length)&&(ce.base64=!1,ce.binary=!0,V="",ce.compression="STORE",G="string");var I;I=V instanceof m||V instanceof f?V:E.isNode&&E.isStream(V)?new _(A,V):u.prepareContent(A,V,ce.binary,ce.optimizedBinaryString,ce.base64);var W=new v(A,I,ce);this.files[A]=W}var o=e("./utf8"),u=e("./utils"),f=e("./stream/GenericWorker"),c=e("./stream/StreamHelper"),y=e("./defaults"),m=e("./compressedObject"),v=e("./zipObject"),p=e("./generate"),E=e("./nodejsUtils"),_=e("./nodejs/NodejsStreamInputAdapter"),T=function(A){"/"===A.slice(-1)&&(A=A.substring(0,A.length-1));var V=A.lastIndexOf("/");return 0<V?A.substring(0,V):""},k=function(A){return"/"!==A.slice(-1)&&(A+="/"),A},S=function(A,V){return V=void 0!==V?V:y.createFolders,A=k(A),this.files[A]||i.call(this,A,null,{dir:!0,createFolders:V}),this.files[A]};function N(A){return"[object RegExp]"===Object.prototype.toString.call(A)}var L={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var V,M,Q;for(V in this.files)Q=this.files[V],(M=V.slice(this.root.length,V.length))&&V.slice(0,this.root.length)===this.root&&A(M,Q)},filter:function(A){var V=[];return this.forEach(function(M,Q){A(M,Q)&&V.push(Q)}),V},file:function(A,V,M){if(1!==arguments.length)return i.call(this,A=this.root+A,V,M),this;if(N(A)){var Q=A;return this.filter(function(ce,_e){return!_e.dir&&Q.test(ce)})}var G=this.files[this.root+A];return G&&!G.dir?G:null},folder:function(A){if(!A)return this;if(N(A))return this.filter(function(G,ce){return ce.dir&&A.test(G)});var M=S.call(this,this.root+A),Q=this.clone();return Q.root=M.name,Q},remove:function(A){var V=this.files[A=this.root+A];if(V||("/"!==A.slice(-1)&&(A+="/"),V=this.files[A]),V&&!V.dir)delete this.files[A];else for(var M=this.filter(function(G,ce){return ce.name.slice(0,A.length)===A}),Q=0;Q<M.length;Q++)delete this.files[M[Q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var V,M={};try{if((M=u.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),"binarystring"===M.type&&(M.type="string"),!M.type)throw new Error("No output type specified.");u.checkSupport(M.type),"darwin"!==M.platform&&"freebsd"!==M.platform&&"linux"!==M.platform&&"sunos"!==M.platform||(M.platform="UNIX"),"win32"===M.platform&&(M.platform="DOS"),V=p.generateWorker(this,M,M.comment||this.comment||"")}catch(G){(V=new f("error")).error(G)}return new c(V,M.type||"string",M.mimeType)},generateAsync:function(A,V){return this.generateInternalStream(A).accumulate(V)},generateNodeStream:function(A,V){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(V)}};r.exports=L},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,r,n){r.exports=e("stream")},{stream:void 0}],17:[function(e,r,n){var i=e("./DataReader");function o(u){i.call(this,u);for(var f=0;f<this.data.length;f++)u[f]=255&u[f]}e("../utils").inherits(o,i),o.prototype.byteAt=function(u){return this.data[this.zero+u]},o.prototype.lastIndexOfSignature=function(u){for(var f=u.charCodeAt(0),c=u.charCodeAt(1),y=u.charCodeAt(2),m=u.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===f&&this.data[v+1]===c&&this.data[v+2]===y&&this.data[v+3]===m)return v-this.zero;return-1},o.prototype.readAndCheckSignature=function(u){var f=u.charCodeAt(0),c=u.charCodeAt(1),y=u.charCodeAt(2),m=u.charCodeAt(3),v=this.readData(4);return f===v[0]&&c===v[1]&&y===v[2]&&m===v[3]},o.prototype.readData=function(u){if(this.checkOffset(u),0===u)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,f},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,r,n){var i=e("../utils");function o(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var f,c=0;for(this.checkOffset(u),f=this.index+u-1;f>=this.index;f--)c=(c<<8)+this.byteAt(f);return this.index+=u,c},readString:function(u){return i.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},r.exports=o},{"../utils":32}],19:[function(e,r,n){var i=e("./Uint8ArrayReader");function o(u){i.call(this,u)}e("../utils").inherits(o,i),o.prototype.readData=function(u){this.checkOffset(u);var f=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,f},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,r,n){var i=e("./DataReader");function o(u){i.call(this,u)}e("../utils").inherits(o,i),o.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},o.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},o.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},o.prototype.readData=function(u){this.checkOffset(u);var f=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,f},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,r,n){var i=e("./ArrayReader");function o(u){i.call(this,u)}e("../utils").inherits(o,i),o.prototype.readData=function(u){if(this.checkOffset(u),0===u)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,f},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,r,n){var i=e("../utils"),o=e("../support"),u=e("./ArrayReader"),f=e("./StringReader"),c=e("./NodeBufferReader"),y=e("./Uint8ArrayReader");r.exports=function(m){var v=i.getTypeOf(m);return i.checkSupport(v),"string"!==v||o.uint8array?"nodebuffer"===v?new c(m):o.uint8array?new y(i.transformTo("uint8array",m)):new u(i.transformTo("array",m)):new f(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,r,n){n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,r,n){var i=e("./GenericWorker"),o=e("../utils");function u(f){i.call(this,"ConvertWorker to "+f),this.destType=f}o.inherits(u,i),u.prototype.processChunk=function(f){this.push({data:o.transformTo(this.destType,f.data),meta:f.meta})},r.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(e,r,n){var i=e("./GenericWorker"),o=e("../crc32");function u(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(u,i),u.prototype.processChunk=function(f){this.streamInfo.crc32=o(f.data,this.streamInfo.crc32||0),this.push(f)},r.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,r,n){var i=e("../utils"),o=e("./GenericWorker");function u(f){o.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}i.inherits(u,o),u.prototype.processChunk=function(f){f&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+f.data.length),o.prototype.processChunk.call(this,f)},r.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(e,r,n){var i=e("../utils"),o=e("./GenericWorker");function u(f){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(y){c.dataIsReady=!0,c.data=y,c.max=y&&y.length||0,c.type=i.getTypeOf(y),c.isPaused||c._tickAndRepeat()},function(y){c.error(y)})}i.inherits(u,o),u.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,c);break;case"uint8array":f=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":f=this.data.slice(this.index,c)}return this.index=c,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(e,r,n){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,u){return this._listeners[o].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,u){if(this._listeners[o])for(var f=0;f<this._listeners[o].length;f++)this._listeners[o][f].call(this,u)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var u=this;return o.on("data",function(f){u.processChunk(f)}),o.on("end",function(){u.end()}),o.on("error",function(f){u.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,u){return this.extraStreamInfo[o]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(e,r,n){var i=e("../utils"),o=e("./ConvertWorker"),u=e("./GenericWorker"),f=e("../base64"),c=e("../support"),y=e("../external"),m=null;if(c.nodestream)try{m=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(E,_,T){var k=_;switch(_){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string"}try{this._internalType=k,this._outputType=_,this._mimeType=T,i.checkSupport(k),this._worker=E.pipe(new o(k)),E.lock()}catch(S){this._worker=new u("error"),this._worker.error(S)}}p.prototype={accumulate:function(E){return function v(E,_){return new y.Promise(function(T,k){var S=[],N=E._internalType,L=E._outputType,A=E._mimeType;E.on("data",function(V,M){S.push(V),_&&_(M)}).on("error",function(V){S=[],k(V)}).on("end",function(){try{var V=function(M,Q,G){switch(M){case"blob":return i.newBlob(i.transformTo("arraybuffer",Q),G);case"base64":return f.encode(Q);default:return i.transformTo(M,Q)}}(L,function(M,Q){var G,ce=0,_e=null,I=0;for(G=0;G<Q.length;G++)I+=Q[G].length;switch(M){case"string":return Q.join("");case"array":return Array.prototype.concat.apply([],Q);case"uint8array":for(_e=new Uint8Array(I),G=0;G<Q.length;G++)_e.set(Q[G],ce),ce+=Q[G].length;return _e;case"nodebuffer":return ie.concat(Q);default:throw new Error("concat : unsupported type '"+M+"'")}}(N,S),A);T(V)}catch(M){k(M)}S=[]}).resume()})}(this,E)},on:function(E,_){var T=this;return this._worker.on(E,"data"===E?function(k){_.call(T,k.data,k.meta)}:function(){i.delay(_,arguments,T)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:"nodebuffer"!==this._outputType},E)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=!0,n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),n.blob=0===o.getBlob("application/zip").size}catch{n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(e,r,n){for(var i=e("./utils"),o=e("./support"),u=e("./nodejsUtils"),f=e("./stream/GenericWorker"),c=new Array(256),y=0;y<256;y++)c[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function m(){f.call(this,"utf-8 decode"),this.leftOver=null}function v(){f.call(this,"utf-8 encode")}c[254]=c[254]=1,n.utf8encode=function(p){return o.nodebuffer?u.newBufferFrom(p,"utf-8"):function(E){var _,T,k,S,N,L=E.length,A=0;for(S=0;S<L;S++)55296==(64512&(T=E.charCodeAt(S)))&&S+1<L&&56320==(64512&(k=E.charCodeAt(S+1)))&&(T=65536+(T-55296<<10)+(k-56320),S++),A+=T<128?1:T<2048?2:T<65536?3:4;for(_=o.uint8array?new Uint8Array(A):new Array(A),S=N=0;N<A;S++)55296==(64512&(T=E.charCodeAt(S)))&&S+1<L&&56320==(64512&(k=E.charCodeAt(S+1)))&&(T=65536+(T-55296<<10)+(k-56320),S++),T<128?_[N++]=T:(T<2048?_[N++]=192|T>>>6:(T<65536?_[N++]=224|T>>>12:(_[N++]=240|T>>>18,_[N++]=128|T>>>12&63),_[N++]=128|T>>>6&63),_[N++]=128|63&T);return _}(p)},n.utf8decode=function(p){return o.nodebuffer?i.transformTo("nodebuffer",p).toString("utf-8"):function(E){var _,T,k,S,N=E.length,L=new Array(2*N);for(_=T=0;_<N;)if((k=E[_++])<128)L[T++]=k;else if(4<(S=c[k]))L[T++]=65533,_+=S-1;else{for(k&=2===S?31:3===S?15:7;1<S&&_<N;)k=k<<6|63&E[_++],S--;1<S?L[T++]=65533:k<65536?L[T++]=k:(L[T++]=55296|(k-=65536)>>10&1023,L[T++]=56320|1023&k)}return L.length!==T&&(L.subarray?L=L.subarray(0,T):L.length=T),i.applyFromCharCode(L)}(p=i.transformTo(o.uint8array?"uint8array":"array",p))},i.inherits(m,f),m.prototype.processChunk=function(p){var E=i.transformTo(o.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var _=E;(E=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),E.set(_,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var T=function(S,N){var L;for((N=N||S.length)>S.length&&(N=S.length),L=N-1;0<=L&&128==(192&S[L]);)L--;return L<0||0===L?N:L+c[S[L]]>N?L:N}(E),k=E;T!==E.length&&(o.uint8array?(k=E.subarray(0,T),this.leftOver=E.subarray(T,E.length)):(k=E.slice(0,T),this.leftOver=E.slice(T,E.length))),this.push({data:n.utf8decode(k),meta:p.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=m,i.inherits(v,f),v.prototype.processChunk=function(p){this.push({data:n.utf8encode(p.data),meta:p.meta})},n.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,r,n){var i=e("./support"),o=e("./base64"),u=e("./nodejsUtils"),f=e("./external");function c(_){return _}function y(_,T){for(var k=0;k<_.length;++k)T[k]=255&_.charCodeAt(k);return T}e("setimmediate"),n.newBlob=function(_,T){n.checkSupport("blob");try{return new Blob([_],{type:T})}catch{try{var k=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return k.append(_),k.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(_,T,k){var S=[],N=0,L=_.length;if(L<=k)return String.fromCharCode.apply(null,_);for(;N<L;)S.push(String.fromCharCode.apply(null,"array"===T||"nodebuffer"===T?_.slice(N,Math.min(N+k,L)):_.subarray(N,Math.min(N+k,L)))),N+=k;return S.join("")},stringifyByChar:function(_){for(var T="",k=0;k<_.length;k++)T+=String.fromCharCode(_[k]);return T},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,u.allocBuffer(1)).length}catch{return!1}}()}};function v(_){var T=65536,k=n.getTypeOf(_),S=!0;if("uint8array"===k?S=m.applyCanBeUsed.uint8array:"nodebuffer"===k&&(S=m.applyCanBeUsed.nodebuffer),S)for(;1<T;)try{return m.stringifyByChunk(_,k,T)}catch{T=Math.floor(T/2)}return m.stringifyByChar(_)}function p(_,T){for(var k=0;k<_.length;k++)T[k]=_[k];return T}n.applyFromCharCode=v;var E={};E.string={string:c,array:function(_){return y(_,new Array(_.length))},arraybuffer:function(_){return E.string.uint8array(_).buffer},uint8array:function(_){return y(_,new Uint8Array(_.length))},nodebuffer:function(_){return y(_,u.allocBuffer(_.length))}},E.array={string:v,array:c,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return u.newBufferFrom(_)}},E.arraybuffer={string:function(_){return v(new Uint8Array(_))},array:function(_){return p(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:c,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return u.newBufferFrom(new Uint8Array(_))}},E.uint8array={string:v,array:function(_){return p(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:c,nodebuffer:function(_){return u.newBufferFrom(_)}},E.nodebuffer={string:v,array:function(_){return p(_,new Array(_.length))},arraybuffer:function(_){return E.nodebuffer.uint8array(_).buffer},uint8array:function(_){return p(_,new Uint8Array(_.length))},nodebuffer:c},n.transformTo=function(_,T){if(T=T||"",!_)return T;n.checkSupport(_);var k=n.getTypeOf(T);return E[k][_](T)},n.resolve=function(_){for(var T=_.split("/"),k=[],S=0;S<T.length;S++){var N=T[S];"."===N||""===N&&0!==S&&S!==T.length-1||(".."===N?k.pop():k.push(N))}return k.join("/")},n.getTypeOf=function(_){return"string"==typeof _?"string":"[object Array]"===Object.prototype.toString.call(_)?"array":i.nodebuffer&&u.isBuffer(_)?"nodebuffer":i.uint8array&&_ instanceof Uint8Array?"uint8array":i.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(_){if(!i[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(_){var T,k,S="";for(k=0;k<(_||"").length;k++)S+="\\x"+((T=_.charCodeAt(k))<16?"0":"")+T.toString(16).toUpperCase();return S},n.delay=function(_,T,k){setImmediate(function(){_.apply(k||null,T||[])})},n.inherits=function(_,T){function k(){}k.prototype=T.prototype,_.prototype=new k},n.extend=function(){var _,T,k={};for(_=0;_<arguments.length;_++)for(T in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],T)&&void 0===k[T]&&(k[T]=arguments[_][T]);return k},n.prepareContent=function(_,T,k,S,N){return f.Promise.resolve(T).then(function(L){return i.blob&&(L instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(L)))&&typeof FileReader<"u"?new f.Promise(function(A,V){var M=new FileReader;M.onload=function(Q){A(Q.target.result)},M.onerror=function(Q){V(Q.target.error)},M.readAsArrayBuffer(L)}):L}).then(function(L){var V,A=n.getTypeOf(L);return A?("arraybuffer"===A?L=n.transformTo("uint8array",L):"string"===A&&(N?L=o.decode(L):k&&!0!==S&&(L=y(V=L,i.uint8array?new Uint8Array(V.length):new Array(V.length)))),L):f.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,r,n){var i=e("./reader/readerFor"),o=e("./utils"),u=e("./signature"),f=e("./zipEntry"),c=e("./support");function y(m){this.files=[],this.loadOptions=m}y.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(v)+", expected "+o.pretty(m)+")")}},isSignature:function(m,v){var p=this.reader.index;this.reader.setIndex(m);var E=this.reader.readString(4)===v;return this.reader.setIndex(p),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),p=o.transformTo(c.uint8array?"uint8array":"array",m);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,v,p,E=this.zip64EndOfCentralSize-44;0<E;)m=this.reader.readInt(2),v=this.reader.readInt(4),p=this.reader.readData(v),this.zip64ExtensibleData[m]={id:m,length:v,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,v;for(m=0;m<this.files.length;m++)this.reader.setIndex((v=this.files[m]).localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(m=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var v=m;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var E=v-p;if(0<E)this.isSignature(v,u.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,r,n){var i=e("./reader/readerFor"),o=e("./utils"),u=e("./compressedObject"),f=e("./crc32"),c=e("./utf8"),y=e("./compressions"),m=e("./support");function v(p,E){this.options=p,this.loadOptions=E}v.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(p){var E,_;if(p.skip(22),this.fileNameLength=p.readInt(2),_=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(_),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(E=function(T){for(var k in y)if(Object.prototype.hasOwnProperty.call(y,k)&&y[k].magic===T)return y[k];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,E,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var E=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(E),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==p&&(this.dosPermissions=63&this.externalFileAttributes),3==p&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var E,_,T,k=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<k;)E=p.readInt(2),_=p.readInt(2),T=p.readData(_),this.extraFields[E]={id:E,length:_,value:T};p.setIndex(k)},handleUTF8:function(){var p=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(null!==E)this.fileNameStr=E;else{var _=o.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var T=this.findExtraFieldUnicodeComment();if(null!==T)this.fileCommentStr=T;else{var k=o.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(k)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var E=i(p.value);return 1!==E.readInt(1)||f(this.fileName)!==E.readInt(4)?null:c.utf8decode(E.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var E=i(p.value);return 1!==E.readInt(1)||f(this.fileComment)!==E.readInt(4)?null:c.utf8decode(E.readData(p.length-5))}return null}},r.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,r,n){function i(E,_,T){this.name=E,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=_,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var o=e("./stream/StreamHelper"),u=e("./stream/DataWorker"),f=e("./utf8"),c=e("./compressedObject"),y=e("./stream/GenericWorker");i.prototype={internalStream:function(E){var _=null,T="string";try{if(!E)throw new Error("No output type specified.");var k="string"===(T=E.toLowerCase())||"text"===T;"binarystring"!==T&&"text"!==T||(T="string"),_=this._decompressWorker();var S=!this._dataBinary;S&&!k&&(_=_.pipe(new f.Utf8EncodeWorker)),!S&&k&&(_=_.pipe(new f.Utf8DecodeWorker))}catch(N){(_=new y("error")).error(N)}return new o(_,T,"")},async:function(E,_){return this.internalStream(E).accumulate(_)},nodeStream:function(E,_){return this.internalStream(E||"nodebuffer").toNodejsStream(_)},_compressWorker:function(E,_){if(this._data instanceof c&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new f.Utf8EncodeWorker)),c.createWorkerFrom(T,E,_)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof y?this._data:new u(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<m.length;p++)i.prototype[m[p]]=v;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,r,n){(function(i){var o,u,f=i.MutationObserver||i.WebKitMutationObserver;if(f){var c=0,y=new f(E),m=i.document.createTextNode("");y.observe(m,{characterData:!0}),o=function(){m.data=c=++c%2}}else if(i.setImmediate||void 0===i.MessageChannel)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var _=i.document.createElement("script");_.onreadystatechange=function(){E(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},i.document.documentElement.appendChild(_)}:function(){setTimeout(E,0)};else{var v=new i.MessageChannel;v.port1.onmessage=E,o=function(){v.port2.postMessage(0)}}var p=[];function E(){var _,T;u=!0;for(var k=p.length;k;){for(T=p,p=[],_=-1;++_<k;)T[_]();k=p.length}u=!1}r.exports=function(_){1!==p.push(_)||u||o()}}).call(this,typeof $t<"u"?$t:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,r,n){var i=e("immediate");function o(){}var u={},f=["REJECTED"],c=["FULFILLED"],y=["PENDING"];function m(k){if("function"!=typeof k)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,k!==o&&_(this,k)}function v(k,S,N){this.promise=k,"function"==typeof S&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),"function"==typeof N&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function p(k,S,N){i(function(){var L;try{L=S(N)}catch(A){return u.reject(k,A)}L===k?u.reject(k,new TypeError("Cannot resolve promise with itself")):u.resolve(k,L)})}function E(k){var S=k&&k.then;if(k&&("object"==typeof k||"function"==typeof k)&&"function"==typeof S)return function(){S.apply(k,arguments)}}function _(k,S){var N=!1;function L(M){N||(N=!0,u.reject(k,M))}function A(M){N||(N=!0,u.resolve(k,M))}var V=T(function(){S(A,L)});"error"===V.status&&L(V.value)}function T(k,S){var N={};try{N.value=k(S),N.status="success"}catch(L){N.status="error",N.value=L}return N}(r.exports=m).prototype.finally=function(k){if("function"!=typeof k)return this;var S=this.constructor;return this.then(function(N){return S.resolve(k()).then(function(){return N})},function(N){return S.resolve(k()).then(function(){throw N})})},m.prototype.catch=function(k){return this.then(null,k)},m.prototype.then=function(k,S){if("function"!=typeof k&&this.state===c||"function"!=typeof S&&this.state===f)return this;var N=new this.constructor(o);return this.state!==y?p(N,this.state===c?k:S,this.outcome):this.queue.push(new v(N,k,S)),N},v.prototype.callFulfilled=function(k){u.resolve(this.promise,k)},v.prototype.otherCallFulfilled=function(k){p(this.promise,this.onFulfilled,k)},v.prototype.callRejected=function(k){u.reject(this.promise,k)},v.prototype.otherCallRejected=function(k){p(this.promise,this.onRejected,k)},u.resolve=function(k,S){var N=T(E,S);if("error"===N.status)return u.reject(k,N.value);var L=N.value;if(L)_(k,L);else{k.state=c,k.outcome=S;for(var A=-1,V=k.queue.length;++A<V;)k.queue[A].callFulfilled(S)}return k},u.reject=function(k,S){k.state=f,k.outcome=S;for(var N=-1,L=k.queue.length;++N<L;)k.queue[N].callRejected(S);return k},m.resolve=function(k){return k instanceof this?k:u.resolve(new this(o),k)},m.reject=function(k){var S=new this(o);return u.reject(S,k)},m.all=function(k){var S=this;if("[object Array]"!==Object.prototype.toString.call(k))return this.reject(new TypeError("must be an array"));var N=k.length,L=!1;if(!N)return this.resolve([]);for(var A=new Array(N),V=0,M=-1,Q=new this(o);++M<N;)G(k[M],M);return Q;function G(ce,_e){S.resolve(ce).then(function(I){A[_e]=I,++V!==N||L||(L=!0,u.resolve(Q,A))},function(I){L||(L=!0,u.reject(Q,I))})}},m.race=function(k){if("[object Array]"!==Object.prototype.toString.call(k))return this.reject(new TypeError("must be an array"));var N=k.length,L=!1;if(!N)return this.resolve([]);for(var A=-1,V=new this(o);++A<N;)this.resolve(k[A]).then(function(Q){L||(L=!0,u.resolve(V,Q))},function(Q){L||(L=!0,u.reject(V,Q))});return V}},{immediate:36}],38:[function(e,r,n){var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,r,n){var i=e("./zlib/deflate"),o=e("./utils/common"),u=e("./utils/strings"),f=e("./zlib/messages"),c=e("./zlib/zstream"),y=Object.prototype.toString,m=0,v=-1,p=0,E=8;function _(k){if(!(this instanceof _))return new _(k);this.options=o.assign({level:v,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},k||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var N=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(N!==m)throw new Error(f[N]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var L;if(L="string"==typeof S.dictionary?u.string2buf(S.dictionary):"[object ArrayBuffer]"===y.call(S.dictionary)?new Uint8Array(S.dictionary):S.dictionary,(N=i.deflateSetDictionary(this.strm,L))!==m)throw new Error(f[N]);this._dict_set=!0}}function T(k,S){var N=new _(S);if(N.push(k,!0),N.err)throw N.msg||f[N.err];return N.result}_.prototype.push=function(k,S){var N,L,A=this.strm,V=this.options.chunkSize;if(this.ended)return!1;L=S===~~S?S:!0===S?4:0,A.input="string"==typeof k?u.string2buf(k):"[object ArrayBuffer]"===y.call(k)?new Uint8Array(k):k,A.next_in=0,A.avail_in=A.input.length;do{if(0===A.avail_out&&(A.output=new o.Buf8(V),A.next_out=0,A.avail_out=V),1!==(N=i.deflate(A,L))&&N!==m)return this.onEnd(N),!(this.ended=!0);0!==A.avail_out&&(0!==A.avail_in||4!==L&&2!==L)||this.onData("string"===this.options.to?u.buf2binstring(o.shrinkBuf(A.output,A.next_out)):o.shrinkBuf(A.output,A.next_out))}while((0<A.avail_in||0===A.avail_out)&&1!==N);return 4===L?(N=i.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===m):2!==L||(this.onEnd(m),!(A.avail_out=0))},_.prototype.onData=function(k){this.chunks.push(k)},_.prototype.onEnd=function(k){k===m&&(this.result="string"===this.options.to?this.chunks.join(""):o.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},n.Deflate=_,n.deflate=T,n.deflateRaw=function(k,S){return(S=S||{}).raw=!0,T(k,S)},n.gzip=function(k,S){return(S=S||{}).gzip=!0,T(k,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,r,n){var i=e("./zlib/inflate"),o=e("./utils/common"),u=e("./utils/strings"),f=e("./zlib/constants"),c=e("./zlib/messages"),y=e("./zlib/zstream"),m=e("./zlib/gzheader"),v=Object.prototype.toString;function p(_){if(!(this instanceof p))return new p(_);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},_||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,0===T.windowBits&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||_&&_.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&!(15&T.windowBits)&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var k=i.inflateInit2(this.strm,T.windowBits);if(k!==f.Z_OK)throw new Error(c[k]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function E(_,T){var k=new p(T);if(k.push(_,!0),k.err)throw k.msg||c[k.err];return k.result}p.prototype.push=function(_,T){var k,S,N,L,A,V,M=this.strm,Q=this.options.chunkSize,G=this.options.dictionary,ce=!1;if(this.ended)return!1;S=T===~~T?T:!0===T?f.Z_FINISH:f.Z_NO_FLUSH,M.input="string"==typeof _?u.binstring2buf(_):"[object ArrayBuffer]"===v.call(_)?new Uint8Array(_):_,M.next_in=0,M.avail_in=M.input.length;do{if(0===M.avail_out&&(M.output=new o.Buf8(Q),M.next_out=0,M.avail_out=Q),(k=i.inflate(M,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&G&&(V="string"==typeof G?u.string2buf(G):"[object ArrayBuffer]"===v.call(G)?new Uint8Array(G):G,k=i.inflateSetDictionary(this.strm,V)),k===f.Z_BUF_ERROR&&!0===ce&&(k=f.Z_OK,ce=!1),k!==f.Z_STREAM_END&&k!==f.Z_OK)return this.onEnd(k),!(this.ended=!0);M.next_out&&(0!==M.avail_out&&k!==f.Z_STREAM_END&&(0!==M.avail_in||S!==f.Z_FINISH&&S!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(N=u.utf8border(M.output,M.next_out),L=M.next_out-N,A=u.buf2string(M.output,N),M.next_out=L,M.avail_out=Q-L,L&&o.arraySet(M.output,M.output,N,L,0),this.onData(A)):this.onData(o.shrinkBuf(M.output,M.next_out)))),0===M.avail_in&&0===M.avail_out&&(ce=!0)}while((0<M.avail_in||0===M.avail_out)&&k!==f.Z_STREAM_END);return k===f.Z_STREAM_END&&(S=f.Z_FINISH),S===f.Z_FINISH?(k=i.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===f.Z_OK):S!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(M.avail_out=0))},p.prototype.onData=function(_){this.chunks.push(_)},p.prototype.onEnd=function(_){_===f.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},n.Inflate=p,n.inflate=E,n.inflateRaw=function(_,T){return(T=T||{}).raw=!0,E(_,T)},n.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,r,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(f){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var y=c.shift();if(y){if("object"!=typeof y)throw new TypeError(y+"must be non-object");for(var m in y)y.hasOwnProperty(m)&&(f[m]=y[m])}}return f},n.shrinkBuf=function(f,c){return f.length===c?f:f.subarray?f.subarray(0,c):(f.length=c,f)};var o={arraySet:function(f,c,y,m,v){if(c.subarray&&f.subarray)f.set(c.subarray(y,y+m),v);else for(var p=0;p<m;p++)f[v+p]=c[y+p]},flattenChunks:function(f){var c,y,m,v,p,E;for(c=m=0,y=f.length;c<y;c++)m+=f[c].length;for(E=new Uint8Array(m),c=v=0,y=f.length;c<y;c++)E.set(p=f[c],v),v+=p.length;return E}},u={arraySet:function(f,c,y,m,v){for(var p=0;p<m;p++)f[v+p]=c[y+p]},flattenChunks:function(f){return[].concat.apply([],f)}};n.setTyped=function(f){f?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,u))},n.setTyped(i)},{}],42:[function(e,r,n){var i=e("./common"),o=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var f=new i.Buf8(256),c=0;c<256;c++)f[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function y(m,v){if(v<65537&&(m.subarray&&u||!m.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(m,v));for(var p="",E=0;E<v;E++)p+=String.fromCharCode(m[E]);return p}f[254]=f[254]=1,n.string2buf=function(m){var v,p,E,_,T,k=m.length,S=0;for(_=0;_<k;_++)55296==(64512&(p=m.charCodeAt(_)))&&_+1<k&&56320==(64512&(E=m.charCodeAt(_+1)))&&(p=65536+(p-55296<<10)+(E-56320),_++),S+=p<128?1:p<2048?2:p<65536?3:4;for(v=new i.Buf8(S),_=T=0;T<S;_++)55296==(64512&(p=m.charCodeAt(_)))&&_+1<k&&56320==(64512&(E=m.charCodeAt(_+1)))&&(p=65536+(p-55296<<10)+(E-56320),_++),p<128?v[T++]=p:(p<2048?v[T++]=192|p>>>6:(p<65536?v[T++]=224|p>>>12:(v[T++]=240|p>>>18,v[T++]=128|p>>>12&63),v[T++]=128|p>>>6&63),v[T++]=128|63&p);return v},n.buf2binstring=function(m){return y(m,m.length)},n.binstring2buf=function(m){for(var v=new i.Buf8(m.length),p=0,E=v.length;p<E;p++)v[p]=m.charCodeAt(p);return v},n.buf2string=function(m,v){var p,E,_,T,k=v||m.length,S=new Array(2*k);for(p=E=0;p<k;)if((_=m[p++])<128)S[E++]=_;else if(4<(T=f[_]))S[E++]=65533,p+=T-1;else{for(_&=2===T?31:3===T?15:7;1<T&&p<k;)_=_<<6|63&m[p++],T--;1<T?S[E++]=65533:_<65536?S[E++]=_:(S[E++]=55296|(_-=65536)>>10&1023,S[E++]=56320|1023&_)}return y(S,E)},n.utf8border=function(m,v){var p;for((v=v||m.length)>m.length&&(v=m.length),p=v-1;0<=p&&128==(192&m[p]);)p--;return p<0||0===p?v:p+f[m[p]]>v?p:v}},{"./common":41}],43:[function(e,r,n){r.exports=function(i,o,u,f){for(var c=65535&i|0,y=i>>>16&65535|0,m=0;0!==u;){for(u-=m=2e3<u?2e3:u;y=y+(c=c+o[f++]|0)|0,--m;);c%=65521,y%=65521}return c|y<<16|0}},{}],44:[function(e,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,r,n){var i=function(){for(var o,u=[],f=0;f<256;f++){o=f;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;u[f]=o}return u}();r.exports=function(o,u,f,c){var y=i,m=c+f;o^=-1;for(var v=c;v<m;v++)o=o>>>8^y[255&(o^u[v])];return-1^o}},{}],46:[function(e,r,n){var i,o=e("../utils/common"),u=e("./trees"),f=e("./adler32"),c=e("./crc32"),y=e("./messages"),m=0,p=0,E=-2,k=2,S=8,L=286,A=30,V=19,M=2*L+1,Q=15,G=3,ce=258,_e=ce+G+1,I=42,W=113;function xe(h,Y){return h.msg=y[Y],Y}function le(h){return(h<<1)-(4<h?9:0)}function he(h){for(var Y=h.length;0<=--Y;)h[Y]=0}function z(h){var Y=h.state,H=Y.pending;H>h.avail_out&&(H=h.avail_out),0!==H&&(o.arraySet(h.output,Y.pending_buf,Y.pending_out,H,h.next_out),h.next_out+=H,Y.pending_out+=H,h.total_out+=H,h.avail_out-=H,Y.pending-=H,0===Y.pending&&(Y.pending_out=0))}function U(h,Y){u._tr_flush_block(h,0<=h.block_start?h.block_start:-1,h.strstart-h.block_start,Y),h.block_start=h.strstart,z(h.strm)}function Te(h,Y){h.pending_buf[h.pending++]=Y}function be(h,Y){h.pending_buf[h.pending++]=Y>>>8&255,h.pending_buf[h.pending++]=255&Y}function ye(h,Y){var H,D,w=h.max_chain_length,C=h.strstart,oe=h.prev_length,ne=h.nice_match,Z=h.strstart>h.w_size-_e?h.strstart-(h.w_size-_e):0,de=h.window,ve=h.w_mask,pe=h.prev,Ee=h.strstart+ce,Le=de[C+oe-1],Ie=de[C+oe];h.prev_length>=h.good_match&&(w>>=2),ne>h.lookahead&&(ne=h.lookahead);do{if(de[(H=Y)+oe]===Ie&&de[H+oe-1]===Le&&de[H]===de[C]&&de[++H]===de[C+1]){C+=2,H++;do{}while(de[++C]===de[++H]&&de[++C]===de[++H]&&de[++C]===de[++H]&&de[++C]===de[++H]&&de[++C]===de[++H]&&de[++C]===de[++H]&&de[++C]===de[++H]&&de[++C]===de[++H]&&C<Ee);if(D=ce-(Ee-C),C=Ee-ce,oe<D){if(h.match_start=Y,ne<=(oe=D))break;Le=de[C+oe-1],Ie=de[C+oe]}}}while((Y=pe[Y&ve])>Z&&0!=--w);return oe<=h.lookahead?oe:h.lookahead}function Ge(h){var Y,H,D,w,C,oe,ne,Z,de,ve,pe=h.w_size;do{if(w=h.window_size-h.lookahead-h.strstart,h.strstart>=pe+(pe-_e)){for(o.arraySet(h.window,h.window,pe,pe,0),h.match_start-=pe,h.strstart-=pe,h.block_start-=pe,Y=H=h.hash_size;D=h.head[--Y],h.head[Y]=pe<=D?D-pe:0,--H;);for(Y=H=pe;D=h.prev[--Y],h.prev[Y]=pe<=D?D-pe:0,--H;);w+=pe}if(0===h.strm.avail_in)break;if(ne=h.window,Z=h.strstart+h.lookahead,ve=void 0,(de=w)<(ve=(oe=h.strm).avail_in)&&(ve=de),H=0===ve?0:(oe.avail_in-=ve,o.arraySet(ne,oe.input,oe.next_in,ve,Z),1===oe.state.wrap?oe.adler=f(oe.adler,ne,ve,Z):2===oe.state.wrap&&(oe.adler=c(oe.adler,ne,ve,Z)),oe.next_in+=ve,oe.total_in+=ve,ve),h.lookahead+=H,h.lookahead+h.insert>=G)for(h.ins_h=h.window[C=h.strstart-h.insert],h.ins_h=(h.ins_h<<h.hash_shift^h.window[C+1])&h.hash_mask;h.insert&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[C+G-1])&h.hash_mask,h.prev[C&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=C,C++,h.insert--,!(h.lookahead+h.insert<G)););}while(h.lookahead<_e&&0!==h.strm.avail_in)}function Qe(h,Y){for(var H,D;;){if(h.lookahead<_e){if(Ge(h),h.lookahead<_e&&Y===m)return 1;if(0===h.lookahead)break}if(H=0,h.lookahead>=G&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+G-1])&h.hash_mask,H=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),0!==H&&h.strstart-H<=h.w_size-_e&&(h.match_length=ye(h,H)),h.match_length>=G)if(D=u._tr_tally(h,h.strstart-h.match_start,h.match_length-G),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=G){for(h.match_length--;h.strstart++,h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+G-1])&h.hash_mask,H=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart,0!=--h.match_length;);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+1])&h.hash_mask;else D=u._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if(D&&(U(h,!1),0===h.strm.avail_out))return 1}return h.insert=h.strstart<G-1?h.strstart:G-1,4===Y?(U(h,!0),0===h.strm.avail_out?3:4):h.last_lit&&(U(h,!1),0===h.strm.avail_out)?1:2}function Re(h,Y){for(var H,D,w;;){if(h.lookahead<_e){if(Ge(h),h.lookahead<_e&&Y===m)return 1;if(0===h.lookahead)break}if(H=0,h.lookahead>=G&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+G-1])&h.hash_mask,H=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=G-1,0!==H&&h.prev_length<h.max_lazy_match&&h.strstart-H<=h.w_size-_e&&(h.match_length=ye(h,H),h.match_length<=5&&(1===h.strategy||h.match_length===G&&4096<h.strstart-h.match_start)&&(h.match_length=G-1)),h.prev_length>=G&&h.match_length<=h.prev_length){for(w=h.strstart+h.lookahead-G,D=u._tr_tally(h,h.strstart-1-h.prev_match,h.prev_length-G),h.lookahead-=h.prev_length-1,h.prev_length-=2;++h.strstart<=w&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+G-1])&h.hash_mask,H=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),0!=--h.prev_length;);if(h.match_available=0,h.match_length=G-1,h.strstart++,D&&(U(h,!1),0===h.strm.avail_out))return 1}else if(h.match_available){if((D=u._tr_tally(h,0,h.window[h.strstart-1]))&&U(h,!1),h.strstart++,h.lookahead--,0===h.strm.avail_out)return 1}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&(D=u._tr_tally(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<G-1?h.strstart:G-1,4===Y?(U(h,!0),0===h.strm.avail_out?3:4):h.last_lit&&(U(h,!1),0===h.strm.avail_out)?1:2}function Ce(h,Y,H,D,w){this.good_length=h,this.max_lazy=Y,this.nice_length=H,this.max_chain=D,this.func=w}function Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*M),this.dyn_dtree=new o.Buf16(2*(2*A+1)),this.bl_tree=new o.Buf16(2*(2*V+1)),he(this.dyn_ltree),he(this.dyn_dtree),he(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(Q+1),this.heap=new o.Buf16(2*L+1),he(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*L+1),he(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ze(h){var Y;return h&&h.state?(h.total_in=h.total_out=0,h.data_type=k,(Y=h.state).pending=0,Y.pending_out=0,Y.wrap<0&&(Y.wrap=-Y.wrap),Y.status=Y.wrap?I:W,h.adler=2===Y.wrap?0:1,Y.last_flush=m,u._tr_init(Y),p):xe(h,E)}function Xe(h){var H,Y=Ze(h);return Y===p&&((H=h.state).window_size=2*H.w_size,he(H.head),H.max_lazy_match=i[H.level].max_lazy,H.good_match=i[H.level].good_length,H.nice_match=i[H.level].nice_length,H.max_chain_length=i[H.level].max_chain,H.strstart=0,H.block_start=0,H.lookahead=0,H.insert=0,H.match_length=H.prev_length=G-1,H.match_available=0,H.ins_h=0),Y}function nt(h,Y,H,D,w,C){if(!h)return E;var oe=1;if(-1===Y&&(Y=6),D<0?(oe=0,D=-D):15<D&&(oe=2,D-=16),w<1||9<w||H!==S||D<8||15<D||Y<0||9<Y||C<0||4<C)return xe(h,E);8===D&&(D=9);var ne=new Ue;return(h.state=ne).strm=h,ne.wrap=oe,ne.gzhead=null,ne.w_bits=D,ne.w_size=1<<ne.w_bits,ne.w_mask=ne.w_size-1,ne.hash_bits=w+7,ne.hash_size=1<<ne.hash_bits,ne.hash_mask=ne.hash_size-1,ne.hash_shift=~~((ne.hash_bits+G-1)/G),ne.window=new o.Buf8(2*ne.w_size),ne.head=new o.Buf16(ne.hash_size),ne.prev=new o.Buf16(ne.w_size),ne.lit_bufsize=1<<w+6,ne.pending_buf_size=4*ne.lit_bufsize,ne.pending_buf=new o.Buf8(ne.pending_buf_size),ne.d_buf=1*ne.lit_bufsize,ne.l_buf=3*ne.lit_bufsize,ne.level=Y,ne.strategy=C,ne.method=H,Xe(h)}i=[new Ce(0,0,0,0,function(h,Y){var H=65535;for(H>h.pending_buf_size-5&&(H=h.pending_buf_size-5);;){if(h.lookahead<=1){if(Ge(h),0===h.lookahead&&Y===m)return 1;if(0===h.lookahead)break}h.strstart+=h.lookahead,h.lookahead=0;var D=h.block_start+H;if((0===h.strstart||h.strstart>=D)&&(h.lookahead=h.strstart-D,h.strstart=D,U(h,!1),0===h.strm.avail_out)||h.strstart-h.block_start>=h.w_size-_e&&(U(h,!1),0===h.strm.avail_out))return 1}return h.insert=0,4===Y?(U(h,!0),0===h.strm.avail_out?3:4):(h.strstart>h.block_start&&U(h,!1),1)}),new Ce(4,4,8,4,Qe),new Ce(4,5,16,8,Qe),new Ce(4,6,32,32,Qe),new Ce(4,4,16,16,Re),new Ce(8,16,32,32,Re),new Ce(8,16,128,128,Re),new Ce(8,32,128,256,Re),new Ce(32,128,258,1024,Re),new Ce(32,258,258,4096,Re)],n.deflateInit=function(h,Y){return nt(h,Y,S,15,8,0)},n.deflateInit2=nt,n.deflateReset=Xe,n.deflateResetKeep=Ze,n.deflateSetHeader=function(h,Y){return h&&h.state?2!==h.state.wrap?E:(h.state.gzhead=Y,p):E},n.deflate=function(h,Y){var H,D,w,C;if(!h||!h.state||5<Y||Y<0)return h?xe(h,E):E;if(D=h.state,!h.output||!h.input&&0!==h.avail_in||666===D.status&&4!==Y)return xe(h,0===h.avail_out?-5:E);if(D.strm=h,H=D.last_flush,D.last_flush=Y,D.status===I)if(2===D.wrap)h.adler=0,Te(D,31),Te(D,139),Te(D,8),D.gzhead?(Te(D,(D.gzhead.text?1:0)+(D.gzhead.hcrc?2:0)+(D.gzhead.extra?4:0)+(D.gzhead.name?8:0)+(D.gzhead.comment?16:0)),Te(D,255&D.gzhead.time),Te(D,D.gzhead.time>>8&255),Te(D,D.gzhead.time>>16&255),Te(D,D.gzhead.time>>24&255),Te(D,9===D.level?2:2<=D.strategy||D.level<2?4:0),Te(D,255&D.gzhead.os),D.gzhead.extra&&D.gzhead.extra.length&&(Te(D,255&D.gzhead.extra.length),Te(D,D.gzhead.extra.length>>8&255)),D.gzhead.hcrc&&(h.adler=c(h.adler,D.pending_buf,D.pending,0)),D.gzindex=0,D.status=69):(Te(D,0),Te(D,0),Te(D,0),Te(D,0),Te(D,0),Te(D,9===D.level?2:2<=D.strategy||D.level<2?4:0),Te(D,3),D.status=W);else{var oe=S+(D.w_bits-8<<4)<<8;oe|=(2<=D.strategy||D.level<2?0:D.level<6?1:6===D.level?2:3)<<6,0!==D.strstart&&(oe|=32),oe+=31-oe%31,D.status=W,be(D,oe),0!==D.strstart&&(be(D,h.adler>>>16),be(D,65535&h.adler)),h.adler=1}if(69===D.status)if(D.gzhead.extra){for(w=D.pending;D.gzindex<(65535&D.gzhead.extra.length)&&(D.pending!==D.pending_buf_size||(D.gzhead.hcrc&&D.pending>w&&(h.adler=c(h.adler,D.pending_buf,D.pending-w,w)),z(h),w=D.pending,D.pending!==D.pending_buf_size));)Te(D,255&D.gzhead.extra[D.gzindex]),D.gzindex++;D.gzhead.hcrc&&D.pending>w&&(h.adler=c(h.adler,D.pending_buf,D.pending-w,w)),D.gzindex===D.gzhead.extra.length&&(D.gzindex=0,D.status=73)}else D.status=73;if(73===D.status)if(D.gzhead.name){w=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>w&&(h.adler=c(h.adler,D.pending_buf,D.pending-w,w)),z(h),w=D.pending,D.pending===D.pending_buf_size)){C=1;break}C=D.gzindex<D.gzhead.name.length?255&D.gzhead.name.charCodeAt(D.gzindex++):0,Te(D,C)}while(0!==C);D.gzhead.hcrc&&D.pending>w&&(h.adler=c(h.adler,D.pending_buf,D.pending-w,w)),0===C&&(D.gzindex=0,D.status=91)}else D.status=91;if(91===D.status)if(D.gzhead.comment){w=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>w&&(h.adler=c(h.adler,D.pending_buf,D.pending-w,w)),z(h),w=D.pending,D.pending===D.pending_buf_size)){C=1;break}C=D.gzindex<D.gzhead.comment.length?255&D.gzhead.comment.charCodeAt(D.gzindex++):0,Te(D,C)}while(0!==C);D.gzhead.hcrc&&D.pending>w&&(h.adler=c(h.adler,D.pending_buf,D.pending-w,w)),0===C&&(D.status=103)}else D.status=103;if(103===D.status&&(D.gzhead.hcrc?(D.pending+2>D.pending_buf_size&&z(h),D.pending+2<=D.pending_buf_size&&(Te(D,255&h.adler),Te(D,h.adler>>8&255),h.adler=0,D.status=W)):D.status=W),0!==D.pending){if(z(h),0===h.avail_out)return D.last_flush=-1,p}else if(0===h.avail_in&&le(Y)<=le(H)&&4!==Y)return xe(h,-5);if(666===D.status&&0!==h.avail_in)return xe(h,-5);if(0!==h.avail_in||0!==D.lookahead||Y!==m&&666!==D.status){var ne=2===D.strategy?function(Z,de){for(var ve;;){if(0===Z.lookahead&&(Ge(Z),0===Z.lookahead)){if(de===m)return 1;break}if(Z.match_length=0,ve=u._tr_tally(Z,0,Z.window[Z.strstart]),Z.lookahead--,Z.strstart++,ve&&(U(Z,!1),0===Z.strm.avail_out))return 1}return Z.insert=0,4===de?(U(Z,!0),0===Z.strm.avail_out?3:4):Z.last_lit&&(U(Z,!1),0===Z.strm.avail_out)?1:2}(D,Y):3===D.strategy?function(Z,de){for(var ve,pe,Ee,Le,Ie=Z.window;;){if(Z.lookahead<=ce){if(Ge(Z),Z.lookahead<=ce&&de===m)return 1;if(0===Z.lookahead)break}if(Z.match_length=0,Z.lookahead>=G&&0<Z.strstart&&(pe=Ie[Ee=Z.strstart-1])===Ie[++Ee]&&pe===Ie[++Ee]&&pe===Ie[++Ee]){Le=Z.strstart+ce;do{}while(pe===Ie[++Ee]&&pe===Ie[++Ee]&&pe===Ie[++Ee]&&pe===Ie[++Ee]&&pe===Ie[++Ee]&&pe===Ie[++Ee]&&pe===Ie[++Ee]&&pe===Ie[++Ee]&&Ee<Le);Z.match_length=ce-(Le-Ee),Z.match_length>Z.lookahead&&(Z.match_length=Z.lookahead)}if(Z.match_length>=G?(ve=u._tr_tally(Z,1,Z.match_length-G),Z.lookahead-=Z.match_length,Z.strstart+=Z.match_length,Z.match_length=0):(ve=u._tr_tally(Z,0,Z.window[Z.strstart]),Z.lookahead--,Z.strstart++),ve&&(U(Z,!1),0===Z.strm.avail_out))return 1}return Z.insert=0,4===de?(U(Z,!0),0===Z.strm.avail_out?3:4):Z.last_lit&&(U(Z,!1),0===Z.strm.avail_out)?1:2}(D,Y):i[D.level].func(D,Y);if(3!==ne&&4!==ne||(D.status=666),1===ne||3===ne)return 0===h.avail_out&&(D.last_flush=-1),p;if(2===ne&&(1===Y?u._tr_align(D):5!==Y&&(u._tr_stored_block(D,0,0,!1),3===Y&&(he(D.head),0===D.lookahead&&(D.strstart=0,D.block_start=0,D.insert=0))),z(h),0===h.avail_out))return D.last_flush=-1,p}return 4!==Y?p:D.wrap<=0?1:(2===D.wrap?(Te(D,255&h.adler),Te(D,h.adler>>8&255),Te(D,h.adler>>16&255),Te(D,h.adler>>24&255),Te(D,255&h.total_in),Te(D,h.total_in>>8&255),Te(D,h.total_in>>16&255),Te(D,h.total_in>>24&255)):(be(D,h.adler>>>16),be(D,65535&h.adler)),z(h),0<D.wrap&&(D.wrap=-D.wrap),0!==D.pending?p:1)},n.deflateEnd=function(h){var Y;return h&&h.state?(Y=h.state.status)!==I&&69!==Y&&73!==Y&&91!==Y&&103!==Y&&Y!==W&&666!==Y?xe(h,E):(h.state=null,Y===W?xe(h,-3):p):E},n.deflateSetDictionary=function(h,Y){var H,D,w,C,oe,ne,Z,de,ve=Y.length;if(!h||!h.state||2===(C=(H=h.state).wrap)||1===C&&H.status!==I||H.lookahead)return E;for(1===C&&(h.adler=f(h.adler,Y,ve,0)),H.wrap=0,ve>=H.w_size&&(0===C&&(he(H.head),H.strstart=0,H.block_start=0,H.insert=0),de=new o.Buf8(H.w_size),o.arraySet(de,Y,ve-H.w_size,H.w_size,0),Y=de,ve=H.w_size),oe=h.avail_in,ne=h.next_in,Z=h.input,h.avail_in=ve,h.next_in=0,h.input=Y,Ge(H);H.lookahead>=G;){for(D=H.strstart,w=H.lookahead-(G-1);H.ins_h=(H.ins_h<<H.hash_shift^H.window[D+G-1])&H.hash_mask,H.prev[D&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=D,D++,--w;);H.strstart=D,H.lookahead=G-1,Ge(H)}return H.strstart+=H.lookahead,H.block_start=H.strstart,H.insert=H.lookahead,H.lookahead=0,H.match_length=H.prev_length=G-1,H.match_available=0,h.next_in=ne,h.input=Z,h.avail_in=oe,H.wrap=C,p},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,r,n){r.exports=function(i,o){var u,f,c,y,m,v,p,E,_,T,k,S,N,L,A,V,M,Q,G,ce,_e,I,W,g,J;g=i.input,c=(f=i.next_in)+(i.avail_in-5),J=i.output,m=(y=i.next_out)-(o-i.avail_out),v=y+(i.avail_out-257),p=(u=i.state).dmax,E=u.wsize,_=u.whave,T=u.wnext,k=u.window,S=u.hold,N=u.bits,L=u.lencode,A=u.distcode,V=(1<<u.lenbits)-1,M=(1<<u.distbits)-1;e:do{N<15&&(S+=g[f++]<<N,S+=g[f++]<<(N+=8),N+=8),Q=L[S&V];t:for(;;){if(S>>>=G=Q>>>24,N-=G,0==(G=Q>>>16&255))J[y++]=65535&Q;else{if(!(16&G)){if(!(64&G)){Q=L[(65535&Q)+(S&(1<<G)-1)];continue t}if(32&G){u.mode=12;break e}i.msg="invalid literal/length code",u.mode=30;break e}ce=65535&Q,(G&=15)&&(N<G&&(S+=g[f++]<<N,N+=8),ce+=S&(1<<G)-1,S>>>=G,N-=G),N<15&&(S+=g[f++]<<N,S+=g[f++]<<(N+=8),N+=8),Q=A[S&M];r:for(;;){if(S>>>=G=Q>>>24,N-=G,!(16&(G=Q>>>16&255))){if(!(64&G)){Q=A[(65535&Q)+(S&(1<<G)-1)];continue r}i.msg="invalid distance code",u.mode=30;break e}if(_e=65535&Q,N<(G&=15)&&(S+=g[f++]<<N,(N+=8)<G&&(S+=g[f++]<<N,N+=8)),p<(_e+=S&(1<<G)-1)){i.msg="invalid distance too far back",u.mode=30;break e}if(S>>>=G,N-=G,(G=y-m)<_e){if(_<(G=_e-G)&&u.sane){i.msg="invalid distance too far back",u.mode=30;break e}if(W=k,(I=0)===T){if(I+=E-G,G<ce){for(ce-=G;J[y++]=k[I++],--G;);I=y-_e,W=J}}else if(T<G){if(I+=E+T-G,(G-=T)<ce){for(ce-=G;J[y++]=k[I++],--G;);if(I=0,T<ce){for(ce-=G=T;J[y++]=k[I++],--G;);I=y-_e,W=J}}}else if(I+=T-G,G<ce){for(ce-=G;J[y++]=k[I++],--G;);I=y-_e,W=J}for(;2<ce;)J[y++]=W[I++],J[y++]=W[I++],J[y++]=W[I++],ce-=3;ce&&(J[y++]=W[I++],1<ce&&(J[y++]=W[I++]))}else{for(I=y-_e;J[y++]=J[I++],J[y++]=J[I++],J[y++]=J[I++],2<(ce-=3););ce&&(J[y++]=J[I++],1<ce&&(J[y++]=J[I++]))}break}}break}}while(f<c&&y<v);f-=ce=N>>3,S&=(1<<(N-=ce<<3))-1,i.next_in=f,i.next_out=y,i.avail_in=f<c?c-f+5:5-(f-c),i.avail_out=y<v?v-y+257:257-(y-v),u.hold=S,u.bits=N}},{}],49:[function(e,r,n){var i=e("../utils/common"),o=e("./adler32"),u=e("./crc32"),f=e("./inffast"),c=e("./inftrees"),v=0,p=-2,E=1,_=852,T=592;function k(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(I){var W;return I&&I.state?(I.total_in=I.total_out=(W=I.state).total=0,I.msg="",W.wrap&&(I.adler=1&W.wrap),W.mode=E,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new i.Buf32(_),W.distcode=W.distdyn=new i.Buf32(T),W.sane=1,W.back=-1,v):p}function L(I){var W;return I&&I.state?((W=I.state).wsize=0,W.whave=0,W.wnext=0,N(I)):p}function A(I,W){var g,J;return I&&I.state?(J=I.state,W<0?(g=0,W=-W):(g=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?p:(null!==J.window&&J.wbits!==W&&(J.window=null),J.wrap=g,J.wbits=W,L(I))):p}function V(I,W){var g,J;return I?(J=new S,(I.state=J).window=null,(g=A(I,W))!==v&&(I.state=null),g):p}var M,Q,G=!0;function ce(I){if(G){var W;for(M=new i.Buf32(512),Q=new i.Buf32(32),W=0;W<144;)I.lens[W++]=8;for(;W<256;)I.lens[W++]=9;for(;W<280;)I.lens[W++]=7;for(;W<288;)I.lens[W++]=8;for(c(1,I.lens,0,288,M,0,I.work,{bits:9}),W=0;W<32;)I.lens[W++]=5;c(2,I.lens,0,32,Q,0,I.work,{bits:5}),G=!1}I.lencode=M,I.lenbits=9,I.distcode=Q,I.distbits=5}function _e(I,W,g,J){var Pe,te=I.state;return null===te.window&&(te.wsize=1<<te.wbits,te.wnext=0,te.whave=0,te.window=new i.Buf8(te.wsize)),J>=te.wsize?(i.arraySet(te.window,W,g-te.wsize,te.wsize,0),te.wnext=0,te.whave=te.wsize):(J<(Pe=te.wsize-te.wnext)&&(Pe=J),i.arraySet(te.window,W,g-J,Pe,te.wnext),(J-=Pe)?(i.arraySet(te.window,W,g-J,J,0),te.wnext=J,te.whave=te.wsize):(te.wnext+=Pe,te.wnext===te.wsize&&(te.wnext=0),te.whave<te.wsize&&(te.whave+=Pe))),0}n.inflateReset=L,n.inflateReset2=A,n.inflateResetKeep=N,n.inflateInit=function(I){return V(I,15)},n.inflateInit2=V,n.inflate=function(I,W){var g,J,Pe,te,xe,le,he,z,U,Te,be,ye,Ge,Qe,Re,Ce,Ue,Ze,Xe,nt,h,Y,H,D,w=0,C=new i.Buf8(4),oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&0!==I.avail_in)return p;12===(g=I.state).mode&&(g.mode=13),xe=I.next_out,Pe=I.output,te=I.next_in,J=I.input,z=g.hold,U=g.bits,Te=le=I.avail_in,be=he=I.avail_out,Y=v;e:for(;;)switch(g.mode){case E:if(0===g.wrap){g.mode=13;break}for(;U<16;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}if(2&g.wrap&&35615===z){C[g.check=0]=255&z,C[1]=z>>>8&255,g.check=u(g.check,C,2,0),U=z=0,g.mode=2;break}if(g.flags=0,g.head&&(g.head.done=!1),!(1&g.wrap)||(((255&z)<<8)+(z>>8))%31){I.msg="incorrect header check",g.mode=30;break}if(8!=(15&z)){I.msg="unknown compression method",g.mode=30;break}if(U-=4,h=8+(15&(z>>>=4)),0===g.wbits)g.wbits=h;else if(h>g.wbits){I.msg="invalid window size",g.mode=30;break}g.dmax=1<<h,I.adler=g.check=1,g.mode=512&z?10:12,U=z=0;break;case 2:for(;U<16;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}if(g.flags=z,8!=(255&g.flags)){I.msg="unknown compression method",g.mode=30;break}if(57344&g.flags){I.msg="unknown header flags set",g.mode=30;break}g.head&&(g.head.text=z>>8&1),512&g.flags&&(C[0]=255&z,C[1]=z>>>8&255,g.check=u(g.check,C,2,0)),U=z=0,g.mode=3;case 3:for(;U<32;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}g.head&&(g.head.time=z),512&g.flags&&(C[0]=255&z,C[1]=z>>>8&255,C[2]=z>>>16&255,C[3]=z>>>24&255,g.check=u(g.check,C,4,0)),U=z=0,g.mode=4;case 4:for(;U<16;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}g.head&&(g.head.xflags=255&z,g.head.os=z>>8),512&g.flags&&(C[0]=255&z,C[1]=z>>>8&255,g.check=u(g.check,C,2,0)),U=z=0,g.mode=5;case 5:if(1024&g.flags){for(;U<16;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}g.length=z,g.head&&(g.head.extra_len=z),512&g.flags&&(C[0]=255&z,C[1]=z>>>8&255,g.check=u(g.check,C,2,0)),U=z=0}else g.head&&(g.head.extra=null);g.mode=6;case 6:if(1024&g.flags&&(le<(ye=g.length)&&(ye=le),ye&&(g.head&&(h=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Array(g.head.extra_len)),i.arraySet(g.head.extra,J,te,ye,h)),512&g.flags&&(g.check=u(g.check,J,ye,te)),le-=ye,te+=ye,g.length-=ye),g.length))break e;g.length=0,g.mode=7;case 7:if(2048&g.flags){if(0===le)break e;for(ye=0;h=J[te+ye++],g.head&&h&&g.length<65536&&(g.head.name+=String.fromCharCode(h)),h&&ye<le;);if(512&g.flags&&(g.check=u(g.check,J,ye,te)),le-=ye,te+=ye,h)break e}else g.head&&(g.head.name=null);g.length=0,g.mode=8;case 8:if(4096&g.flags){if(0===le)break e;for(ye=0;h=J[te+ye++],g.head&&h&&g.length<65536&&(g.head.comment+=String.fromCharCode(h)),h&&ye<le;);if(512&g.flags&&(g.check=u(g.check,J,ye,te)),le-=ye,te+=ye,h)break e}else g.head&&(g.head.comment=null);g.mode=9;case 9:if(512&g.flags){for(;U<16;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}if(z!==(65535&g.check)){I.msg="header crc mismatch",g.mode=30;break}U=z=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),I.adler=g.check=0,g.mode=12;break;case 10:for(;U<32;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}I.adler=g.check=k(z),U=z=0,g.mode=11;case 11:if(0===g.havedict)return I.next_out=xe,I.avail_out=he,I.next_in=te,I.avail_in=le,g.hold=z,g.bits=U,2;I.adler=g.check=1,g.mode=12;case 12:if(5===W||6===W)break e;case 13:if(g.last){z>>>=7&U,U-=7&U,g.mode=27;break}for(;U<3;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}switch(g.last=1&z,U-=1,3&(z>>>=1)){case 0:g.mode=14;break;case 1:if(ce(g),g.mode=20,6!==W)break;z>>>=2,U-=2;break e;case 2:g.mode=17;break;case 3:I.msg="invalid block type",g.mode=30}z>>>=2,U-=2;break;case 14:for(z>>>=7&U,U-=7&U;U<32;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}if((65535&z)!=(z>>>16^65535)){I.msg="invalid stored block lengths",g.mode=30;break}if(g.length=65535&z,U=z=0,g.mode=15,6===W)break e;case 15:g.mode=16;case 16:if(ye=g.length){if(le<ye&&(ye=le),he<ye&&(ye=he),0===ye)break e;i.arraySet(Pe,J,te,ye,xe),le-=ye,te+=ye,he-=ye,xe+=ye,g.length-=ye;break}g.mode=12;break;case 17:for(;U<14;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}if(g.nlen=257+(31&z),U-=5,g.ndist=1+(31&(z>>>=5)),U-=5,g.ncode=4+(15&(z>>>=5)),z>>>=4,U-=4,286<g.nlen||30<g.ndist){I.msg="too many length or distance symbols",g.mode=30;break}g.have=0,g.mode=18;case 18:for(;g.have<g.ncode;){for(;U<3;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}g.lens[oe[g.have++]]=7&z,z>>>=3,U-=3}for(;g.have<19;)g.lens[oe[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,Y=c(0,g.lens,0,19,g.lencode,0,g.work,H={bits:g.lenbits}),g.lenbits=H.bits,Y){I.msg="invalid code lengths set",g.mode=30;break}g.have=0,g.mode=19;case 19:for(;g.have<g.nlen+g.ndist;){for(;Ce=(w=g.lencode[z&(1<<g.lenbits)-1])>>>16&255,Ue=65535&w,!((Re=w>>>24)<=U);){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}if(Ue<16)z>>>=Re,U-=Re,g.lens[g.have++]=Ue;else{if(16===Ue){for(D=Re+2;U<D;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}if(z>>>=Re,U-=Re,0===g.have){I.msg="invalid bit length repeat",g.mode=30;break}h=g.lens[g.have-1],ye=3+(3&z),z>>>=2,U-=2}else if(17===Ue){for(D=Re+3;U<D;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}U-=Re,h=0,ye=3+(7&(z>>>=Re)),z>>>=3,U-=3}else{for(D=Re+7;U<D;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}U-=Re,h=0,ye=11+(127&(z>>>=Re)),z>>>=7,U-=7}if(g.have+ye>g.nlen+g.ndist){I.msg="invalid bit length repeat",g.mode=30;break}for(;ye--;)g.lens[g.have++]=h}}if(30===g.mode)break;if(0===g.lens[256]){I.msg="invalid code -- missing end-of-block",g.mode=30;break}if(g.lenbits=9,Y=c(1,g.lens,0,g.nlen,g.lencode,0,g.work,H={bits:g.lenbits}),g.lenbits=H.bits,Y){I.msg="invalid literal/lengths set",g.mode=30;break}if(g.distbits=6,g.distcode=g.distdyn,Y=c(2,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,H={bits:g.distbits}),g.distbits=H.bits,Y){I.msg="invalid distances set",g.mode=30;break}if(g.mode=20,6===W)break e;case 20:g.mode=21;case 21:if(6<=le&&258<=he){I.next_out=xe,I.avail_out=he,I.next_in=te,I.avail_in=le,g.hold=z,g.bits=U,f(I,be),xe=I.next_out,Pe=I.output,he=I.avail_out,te=I.next_in,J=I.input,le=I.avail_in,z=g.hold,U=g.bits,12===g.mode&&(g.back=-1);break}for(g.back=0;Ce=(w=g.lencode[z&(1<<g.lenbits)-1])>>>16&255,Ue=65535&w,!((Re=w>>>24)<=U);){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}if(Ce&&!(240&Ce)){for(Ze=Re,Xe=Ce,nt=Ue;Ce=(w=g.lencode[nt+((z&(1<<Ze+Xe)-1)>>Ze)])>>>16&255,Ue=65535&w,!(Ze+(Re=w>>>24)<=U);){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}z>>>=Ze,U-=Ze,g.back+=Ze}if(z>>>=Re,U-=Re,g.back+=Re,g.length=Ue,0===Ce){g.mode=26;break}if(32&Ce){g.back=-1,g.mode=12;break}if(64&Ce){I.msg="invalid literal/length code",g.mode=30;break}g.extra=15&Ce,g.mode=22;case 22:if(g.extra){for(D=g.extra;U<D;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}g.length+=z&(1<<g.extra)-1,z>>>=g.extra,U-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=23;case 23:for(;Ce=(w=g.distcode[z&(1<<g.distbits)-1])>>>16&255,Ue=65535&w,!((Re=w>>>24)<=U);){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}if(!(240&Ce)){for(Ze=Re,Xe=Ce,nt=Ue;Ce=(w=g.distcode[nt+((z&(1<<Ze+Xe)-1)>>Ze)])>>>16&255,Ue=65535&w,!(Ze+(Re=w>>>24)<=U);){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}z>>>=Ze,U-=Ze,g.back+=Ze}if(z>>>=Re,U-=Re,g.back+=Re,64&Ce){I.msg="invalid distance code",g.mode=30;break}g.offset=Ue,g.extra=15&Ce,g.mode=24;case 24:if(g.extra){for(D=g.extra;U<D;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}g.offset+=z&(1<<g.extra)-1,z>>>=g.extra,U-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){I.msg="invalid distance too far back",g.mode=30;break}g.mode=25;case 25:if(0===he)break e;if(g.offset>(ye=be-he)){if((ye=g.offset-ye)>g.whave&&g.sane){I.msg="invalid distance too far back",g.mode=30;break}Ge=ye>g.wnext?g.wsize-(ye-=g.wnext):g.wnext-ye,ye>g.length&&(ye=g.length),Qe=g.window}else Qe=Pe,Ge=xe-g.offset,ye=g.length;for(he<ye&&(ye=he),he-=ye,g.length-=ye;Pe[xe++]=Qe[Ge++],--ye;);0===g.length&&(g.mode=21);break;case 26:if(0===he)break e;Pe[xe++]=g.length,he--,g.mode=21;break;case 27:if(g.wrap){for(;U<32;){if(0===le)break e;le--,z|=J[te++]<<U,U+=8}if(I.total_out+=be-=he,g.total+=be,be&&(I.adler=g.check=g.flags?u(g.check,Pe,be,xe-be):o(g.check,Pe,be,xe-be)),be=he,(g.flags?z:k(z))!==g.check){I.msg="incorrect data check",g.mode=30;break}U=z=0}g.mode=28;case 28:if(g.wrap&&g.flags){for(;U<32;){if(0===le)break e;le--,z+=J[te++]<<U,U+=8}if(z!==(4294967295&g.total)){I.msg="incorrect length check",g.mode=30;break}U=z=0}g.mode=29;case 29:Y=1;break e;case 30:Y=-3;break e;case 31:return-4;default:return p}return I.next_out=xe,I.avail_out=he,I.next_in=te,I.avail_in=le,g.hold=z,g.bits=U,(g.wsize||be!==I.avail_out&&g.mode<30&&(g.mode<27||4!==W))&&_e(I,I.output,I.next_out,be-I.avail_out)?(g.mode=31,-4):(be-=I.avail_out,I.total_in+=Te-=I.avail_in,I.total_out+=be,g.total+=be,g.wrap&&be&&(I.adler=g.check=g.flags?u(g.check,Pe,be,I.next_out-be):o(g.check,Pe,be,I.next_out-be)),I.data_type=g.bits+(g.last?64:0)+(12===g.mode?128:0)+(20===g.mode||15===g.mode?256:0),(0==Te&&0===be||4===W)&&Y===v&&(Y=-5),Y)},n.inflateEnd=function(I){if(!I||!I.state)return p;var W=I.state;return W.window&&(W.window=null),I.state=null,v},n.inflateGetHeader=function(I,W){var g;return I&&I.state&&2&(g=I.state).wrap?((g.head=W).done=!1,v):p},n.inflateSetDictionary=function(I,W){var g,J=W.length;return I&&I.state?0!==(g=I.state).wrap&&11!==g.mode?p:11===g.mode&&o(1,W,J,0)!==g.check?-3:_e(I,W,J,J)?(g.mode=31,-4):(g.havedict=1,v):p},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,r,n){var i=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(y,m,v,p,E,_,T,k){var S,N,L,A,V,M,Q,G,ce,_e=k.bits,I=0,W=0,g=0,J=0,Pe=0,te=0,xe=0,le=0,he=0,z=0,U=null,Te=0,be=new i.Buf16(16),ye=new i.Buf16(16),Ge=null,Qe=0;for(I=0;I<=15;I++)be[I]=0;for(W=0;W<p;W++)be[m[v+W]]++;for(Pe=_e,J=15;1<=J&&0===be[J];J--);if(J<Pe&&(Pe=J),0===J)return E[_++]=20971520,E[_++]=20971520,k.bits=1,0;for(g=1;g<J&&0===be[g];g++);for(Pe<g&&(Pe=g),I=le=1;I<=15;I++)if(le<<=1,(le-=be[I])<0)return-1;if(0<le&&(0===y||1!==J))return-1;for(ye[1]=0,I=1;I<15;I++)ye[I+1]=ye[I]+be[I];for(W=0;W<p;W++)0!==m[v+W]&&(T[ye[m[v+W]]++]=W);if(M=0===y?(U=Ge=T,19):1===y?(U=o,Te-=257,Ge=u,Qe-=257,256):(U=f,Ge=c,-1),I=g,V=_,xe=W=z=0,L=-1,A=(he=1<<(te=Pe))-1,1===y&&852<he||2===y&&592<he)return 1;for(;;){for(Q=I-xe,ce=T[W]<M?(G=0,T[W]):T[W]>M?(G=Ge[Qe+T[W]],U[Te+T[W]]):(G=96,0),S=1<<I-xe,g=N=1<<te;E[V+(z>>xe)+(N-=S)]=Q<<24|G<<16|ce|0,0!==N;);for(S=1<<I-1;z&S;)S>>=1;if(0!==S?(z&=S-1,z+=S):z=0,W++,0==--be[I]){if(I===J)break;I=m[v+T[W]]}if(Pe<I&&(z&A)!==L){for(0===xe&&(xe=Pe),V+=g,le=1<<(te=I-xe);te+xe<J&&!((le-=be[te+xe])<=0);)te++,le<<=1;if(he+=1<<te,1===y&&852<he||2===y&&592<he)return 1;E[L=z&A]=Pe<<24|te<<16|V-_|0}}return 0!==z&&(E[V+z]=I-xe<<24|64<<16|0),k.bits=Pe,0}},{"../utils/common":41}],51:[function(e,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,r,n){var i=e("../utils/common");function f(w){for(var C=w.length;0<=--C;)w[C]=0}var m=256,v=286,p=30,T=15,k=16,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_e=new Array(576);f(_e);var I=new Array(60);f(I);var W=new Array(512);f(W);var g=new Array(256);f(g);var J=new Array(29);f(J);var Pe,te,xe,le=new Array(p);function he(w,C,oe,ne,Z){this.static_tree=w,this.extra_bits=C,this.extra_base=oe,this.elems=ne,this.max_length=Z,this.has_stree=w&&w.length}function z(w,C){this.dyn_tree=w,this.max_code=0,this.stat_desc=C}function U(w){return w<256?W[w]:W[256+(w>>>7)]}function Te(w,C){w.pending_buf[w.pending++]=255&C,w.pending_buf[w.pending++]=C>>>8&255}function be(w,C,oe){w.bi_valid>k-oe?(w.bi_buf|=C<<w.bi_valid&65535,Te(w,w.bi_buf),w.bi_buf=C>>k-w.bi_valid,w.bi_valid+=oe-k):(w.bi_buf|=C<<w.bi_valid&65535,w.bi_valid+=oe)}function ye(w,C,oe){be(w,oe[2*C],oe[2*C+1])}function Ge(w,C){for(var oe=0;oe|=1&w,w>>>=1,oe<<=1,0<--C;);return oe>>>1}function Qe(w,C,oe){var ne,Z,de=new Array(T+1),ve=0;for(ne=1;ne<=T;ne++)de[ne]=ve=ve+oe[ne-1]<<1;for(Z=0;Z<=C;Z++){var pe=w[2*Z+1];0!==pe&&(w[2*Z]=Ge(de[pe]++,pe))}}function Re(w){var C;for(C=0;C<v;C++)w.dyn_ltree[2*C]=0;for(C=0;C<p;C++)w.dyn_dtree[2*C]=0;for(C=0;C<19;C++)w.bl_tree[2*C]=0;w.dyn_ltree[512]=1,w.opt_len=w.static_len=0,w.last_lit=w.matches=0}function Ce(w){8<w.bi_valid?Te(w,w.bi_buf):0<w.bi_valid&&(w.pending_buf[w.pending++]=w.bi_buf),w.bi_buf=0,w.bi_valid=0}function Ue(w,C,oe,ne){var Z=2*C,de=2*oe;return w[Z]<w[de]||w[Z]===w[de]&&ne[C]<=ne[oe]}function Ze(w,C,oe){for(var ne=w.heap[oe],Z=oe<<1;Z<=w.heap_len&&(Z<w.heap_len&&Ue(C,w.heap[Z+1],w.heap[Z],w.depth)&&Z++,!Ue(C,ne,w.heap[Z],w.depth));)w.heap[oe]=w.heap[Z],oe=Z,Z<<=1;w.heap[oe]=ne}function Xe(w,C,oe){var ne,Z,de,ve,pe=0;if(0!==w.last_lit)for(;ne=w.pending_buf[w.d_buf+2*pe]<<8|w.pending_buf[w.d_buf+2*pe+1],Z=w.pending_buf[w.l_buf+pe],pe++,0===ne?ye(w,Z,C):(ye(w,(de=g[Z])+m+1,C),0!==(ve=M[de])&&be(w,Z-=J[de],ve),ye(w,de=U(--ne),oe),0!==(ve=Q[de])&&be(w,ne-=le[de],ve)),pe<w.last_lit;);ye(w,256,C)}function nt(w,C){var oe,ne,Z,de=C.dyn_tree,ve=C.stat_desc.static_tree,pe=C.stat_desc.has_stree,Ee=C.stat_desc.elems,Le=-1;for(w.heap_len=0,w.heap_max=573,oe=0;oe<Ee;oe++)0!==de[2*oe]?(w.heap[++w.heap_len]=Le=oe,w.depth[oe]=0):de[2*oe+1]=0;for(;w.heap_len<2;)de[2*(Z=w.heap[++w.heap_len]=Le<2?++Le:0)]=1,w.depth[Z]=0,w.opt_len--,pe&&(w.static_len-=ve[2*Z+1]);for(C.max_code=Le,oe=w.heap_len>>1;1<=oe;oe--)Ze(w,de,oe);for(Z=Ee;oe=w.heap[1],w.heap[1]=w.heap[w.heap_len--],Ze(w,de,1),ne=w.heap[1],w.heap[--w.heap_max]=oe,w.heap[--w.heap_max]=ne,de[2*Z]=de[2*oe]+de[2*ne],w.depth[Z]=(w.depth[oe]>=w.depth[ne]?w.depth[oe]:w.depth[ne])+1,de[2*oe+1]=de[2*ne+1]=Z,w.heap[1]=Z++,Ze(w,de,1),2<=w.heap_len;);w.heap[--w.heap_max]=w.heap[1],function(Ie,rt){var vt,it,kt,Ve,Tt,Se,at=rt.dyn_tree,It=rt.max_code,lt=rt.stat_desc.static_tree,ar=rt.stat_desc.has_stree,et=rt.stat_desc.extra_bits,Gt=rt.stat_desc.extra_base,ee=rt.stat_desc.max_length,bt=0;for(Ve=0;Ve<=T;Ve++)Ie.bl_count[Ve]=0;for(at[2*Ie.heap[Ie.heap_max]+1]=0,vt=Ie.heap_max+1;vt<573;vt++)ee<(Ve=at[2*at[2*(it=Ie.heap[vt])+1]+1]+1)&&(Ve=ee,bt++),at[2*it+1]=Ve,It<it||(Ie.bl_count[Ve]++,Tt=0,Gt<=it&&(Tt=et[it-Gt]),Ie.opt_len+=(Se=at[2*it])*(Ve+Tt),ar&&(Ie.static_len+=Se*(lt[2*it+1]+Tt)));if(0!==bt){do{for(Ve=ee-1;0===Ie.bl_count[Ve];)Ve--;Ie.bl_count[Ve]--,Ie.bl_count[Ve+1]+=2,Ie.bl_count[ee]--,bt-=2}while(0<bt);for(Ve=ee;0!==Ve;Ve--)for(it=Ie.bl_count[Ve];0!==it;)It<(kt=Ie.heap[--vt])||(at[2*kt+1]!==Ve&&(Ie.opt_len+=(Ve-at[2*kt+1])*at[2*kt],at[2*kt+1]=Ve),it--)}}(w,C),Qe(de,Le,w.bl_count)}function h(w,C,oe){var ne,Z,de=-1,ve=C[1],pe=0,Ee=7,Le=4;for(0===ve&&(Ee=138,Le=3),C[2*(oe+1)+1]=65535,ne=0;ne<=oe;ne++)Z=ve,ve=C[2*(ne+1)+1],++pe<Ee&&Z===ve||(pe<Le?w.bl_tree[2*Z]+=pe:0!==Z?(Z!==de&&w.bl_tree[2*Z]++,w.bl_tree[32]++):pe<=10?w.bl_tree[34]++:w.bl_tree[36]++,de=Z,Le=(pe=0)===ve?(Ee=138,3):Z===ve?(Ee=6,3):(Ee=7,4))}function Y(w,C,oe){var ne,Z,de=-1,ve=C[1],pe=0,Ee=7,Le=4;for(0===ve&&(Ee=138,Le=3),ne=0;ne<=oe;ne++)if(Z=ve,ve=C[2*(ne+1)+1],!(++pe<Ee&&Z===ve)){if(pe<Le)for(;ye(w,Z,w.bl_tree),0!=--pe;);else 0!==Z?(Z!==de&&(ye(w,Z,w.bl_tree),pe--),ye(w,16,w.bl_tree),be(w,pe-3,2)):pe<=10?(ye(w,17,w.bl_tree),be(w,pe-3,3)):(ye(w,18,w.bl_tree),be(w,pe-11,7));de=Z,Le=(pe=0)===ve?(Ee=138,3):Z===ve?(Ee=6,3):(Ee=7,4)}}f(le);var H=!1;function D(w,C,oe,ne){var Z,de,ve;be(w,0+(ne?1:0),3),de=C,ve=oe,Ce(Z=w),Te(Z,ve),Te(Z,~ve),i.arraySet(Z.pending_buf,Z.window,de,ve,Z.pending),Z.pending+=ve}n._tr_init=function(w){H||(function(){var C,oe,ne,Z,de,ve=new Array(T+1);for(Z=ne=0;Z<28;Z++)for(J[Z]=ne,C=0;C<1<<M[Z];C++)g[ne++]=Z;for(g[ne-1]=Z,Z=de=0;Z<16;Z++)for(le[Z]=de,C=0;C<1<<Q[Z];C++)W[de++]=Z;for(de>>=7;Z<p;Z++)for(le[Z]=de<<7,C=0;C<1<<Q[Z]-7;C++)W[256+de++]=Z;for(oe=0;oe<=T;oe++)ve[oe]=0;for(C=0;C<=143;)_e[2*C+1]=8,C++,ve[8]++;for(;C<=255;)_e[2*C+1]=9,C++,ve[9]++;for(;C<=279;)_e[2*C+1]=7,C++,ve[7]++;for(;C<=287;)_e[2*C+1]=8,C++,ve[8]++;for(Qe(_e,287,ve),C=0;C<p;C++)I[2*C+1]=5,I[2*C]=Ge(C,5);Pe=new he(_e,M,257,v,T),te=new he(I,Q,0,p,T),xe=new he(new Array(0),G,0,19,7)}(),H=!0),w.l_desc=new z(w.dyn_ltree,Pe),w.d_desc=new z(w.dyn_dtree,te),w.bl_desc=new z(w.bl_tree,xe),w.bi_buf=0,w.bi_valid=0,Re(w)},n._tr_stored_block=D,n._tr_flush_block=function(w,C,oe,ne){var Z,de,ve=0;0<w.level?(2===w.strm.data_type&&(w.strm.data_type=function(pe){var Ee,Le=4093624447;for(Ee=0;Ee<=31;Ee++,Le>>>=1)if(1&Le&&0!==pe.dyn_ltree[2*Ee])return 0;if(0!==pe.dyn_ltree[18]||0!==pe.dyn_ltree[20]||0!==pe.dyn_ltree[26])return 1;for(Ee=32;Ee<m;Ee++)if(0!==pe.dyn_ltree[2*Ee])return 1;return 0}(w)),nt(w,w.l_desc),nt(w,w.d_desc),ve=function(pe){var Ee;for(h(pe,pe.dyn_ltree,pe.l_desc.max_code),h(pe,pe.dyn_dtree,pe.d_desc.max_code),nt(pe,pe.bl_desc),Ee=18;3<=Ee&&0===pe.bl_tree[2*ce[Ee]+1];Ee--);return pe.opt_len+=3*(Ee+1)+5+5+4,Ee}(w),(de=w.static_len+3+7>>>3)<=(Z=w.opt_len+3+7>>>3)&&(Z=de)):Z=de=oe+5,oe+4<=Z&&-1!==C?D(w,C,oe,ne):4===w.strategy||de===Z?(be(w,2+(ne?1:0),3),Xe(w,_e,I)):(be(w,4+(ne?1:0),3),function(pe,Ee,Le,Ie){var rt;for(be(pe,Ee-257,5),be(pe,Le-1,5),be(pe,Ie-4,4),rt=0;rt<Ie;rt++)be(pe,pe.bl_tree[2*ce[rt]+1],3);Y(pe,pe.dyn_ltree,Ee-1),Y(pe,pe.dyn_dtree,Le-1)}(w,w.l_desc.max_code+1,w.d_desc.max_code+1,ve+1),Xe(w,w.dyn_ltree,w.dyn_dtree)),Re(w),ne&&Ce(w)},n._tr_tally=function(w,C,oe){return w.pending_buf[w.d_buf+2*w.last_lit]=C>>>8&255,w.pending_buf[w.d_buf+2*w.last_lit+1]=255&C,w.pending_buf[w.l_buf+w.last_lit]=255&oe,w.last_lit++,0===C?w.dyn_ltree[2*oe]++:(w.matches++,C--,w.dyn_ltree[2*(g[oe]+m+1)]++,w.dyn_dtree[2*U(C)]++),w.last_lit===w.lit_bufsize-1},n._tr_align=function(w){var C;be(w,2,3),ye(w,256,_e),16===(C=w).bi_valid?(Te(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):8<=C.bi_valid&&(C.pending_buf[C.pending++]=255&C.bi_buf,C.bi_buf>>=8,C.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,r,n){(function(i){!function(o,u){if(!o.setImmediate){var f,c,y,m,v=1,p={},E=!1,_=o.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(o);T=T&&T.setTimeout?T:o,f="[object process]"==={}.toString.call(o.process)?function(L){St.nextTick(function(){S(L)})}:function(){if(o.postMessage&&!o.importScripts){var L=!0,A=o.onmessage;return o.onmessage=function(){L=!1},o.postMessage("","*"),o.onmessage=A,L}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",N,!1):o.attachEvent("onmessage",N),function(L){o.postMessage(m+L,"*")}):o.MessageChannel?((y=new MessageChannel).port1.onmessage=function(L){S(L.data)},function(L){y.port2.postMessage(L)}):_&&"onreadystatechange"in _.createElement("script")?(c=_.documentElement,function(L){var A=_.createElement("script");A.onreadystatechange=function(){S(L),A.onreadystatechange=null,c.removeChild(A),A=null},c.appendChild(A)}):function(L){setTimeout(S,0,L)},T.setImmediate=function(L){"function"!=typeof L&&(L=new Function(""+L));for(var A=new Array(arguments.length-1),V=0;V<A.length;V++)A[V]=arguments[V+1];return p[v]={callback:L,args:A},f(v),v++},T.clearImmediate=k}function k(L){delete p[L]}function S(L){if(E)setTimeout(S,0,L);else{var A=p[L];if(A){E=!0;try{!function(V){var M=V.callback,Q=V.args;switch(Q.length){case 0:M();break;case 1:M(Q[0]);break;case 2:M(Q[0],Q[1]);break;case 3:M(Q[0],Q[1],Q[2]);break;default:M.apply(u,Q)}}(A)}finally{k(L),E=!1}}}}function N(L){L.source===o&&"string"==typeof L.data&&0===L.data.indexOf(m)&&S(+L.data.slice(m.length))}}(typeof self>"u"?void 0===i?this:i:self)}).call(this,typeof $t<"u"?$t:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)});const Dr=!(typeof self>"u")&&"showOpenFilePicker"in self,gs=Dr?Promise.resolve().then(function(){return ks}):Promise.resolve().then(function(){return As});function sn(){return(sn=(0,O.Z)(function*(...s){return(yield gs).default(...s)})).apply(this,arguments)}Dr?Promise.resolve().then(function(){return xs}):Promise.resolve().then(function(){return js});const bs=Dr?Promise.resolve().then(function(){return Ss}):Promise.resolve().then(function(){return Os});function on(){return(on=(0,O.Z)(function*(...s){return(yield bs).default(...s)})).apply(this,arguments)}const ws=function(){var s=(0,O.Z)(function*(t){const e=yield t.getFile();return e.handle=t,e});return function(e){return s.apply(this,arguments)}}();var ks={__proto__:null,default:function(){var s=(0,O.Z)(function*(t=[{}]){Array.isArray(t)||(t=[t]);const e=[];t.forEach((i,o)=>{e[o]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(u=>{e[o].accept[u]=i.extensions||[]}):e[o].accept["*/*"]=i.extensions||[]});const r=yield window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),n=yield Promise.all(r.map(ws));return t[0].multiple?n:n[0]});return function(){return s.apply(this,arguments)}}()};function Ar(s){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then(function(n){return{value:n,done:r}})}return(Ar=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Ar(s)}const Hn=function(){var s=(0,O.Z)(function*(t,e,r=t.name,n){const i=[],o=[];var u,f=!1,c=!1;try{for(var y,m=function(v){var p,E,_,T=2;for(typeof Symbol<"u"&&(E=Symbol.asyncIterator,_=Symbol.iterator);T--;){if(E&&null!=(p=v[E]))return p.call(v);if(_&&null!=(p=v[_]))return new Ar(p.call(v));E="@@asyncIterator",_="@@iterator"}throw new TypeError("Object is not async iterable")}(t.values());f=!(y=yield m.next()).done;f=!1){const v=y.value,p=`${r}/${v.name}`;"file"===v.kind?o.push(v.getFile().then(E=>(E.directoryHandle=t,E.handle=v,Object.defineProperty(E,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>p})))):"directory"!==v.kind||!e||n&&n(v)||i.push(Hn(v,e,p,n))}}catch(v){c=!0,u=v}finally{try{f&&null!=m.return&&(yield m.return())}finally{if(c)throw u}}return[...(yield Promise.all(i)).flat(),...yield Promise.all(o)]});return function(e,r){return s.apply(this,arguments)}}();var xs={__proto__:null,default:function(){var s=(0,O.Z)(function*(t={}){t.recursive=t.recursive||!1,t.mode=t.mode||"read";const e=yield window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(yield(yield e.values()).next()).done?[e]:Hn(e,t.recursive,void 0,t.skipDirectory)});return function(){return s.apply(this,arguments)}}()},Ss={__proto__:null,default:function(){var s=(0,O.Z)(function*(t,e=[{}],r=null,n=!1,i=null){Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const o=[];let u=null;if(t instanceof Blob&&t.type?u=t.type:t.headers&&t.headers.get("content-type")&&(u=t.headers.get("content-type")),e.forEach((y,m)=>{o[m]={description:y.description||"Files",accept:{}},y.mimeTypes?(0===m&&u&&y.mimeTypes.push(u),y.mimeTypes.map(v=>{o[m].accept[v]=y.extensions||[]})):u?o[m].accept[u]=y.extensions||[]:o[m].accept["*/*"]=y.extensions||[]}),r)try{yield r.getFile()}catch(y){if(r=null,n)throw y}const f=r||(yield window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:o,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}));!r&&i&&i(f);const c=yield f.createWritable();return"stream"in t?(yield t.stream().pipeTo(c),f):"body"in t?(yield t.body.pipeTo(c),f):(yield c.write(yield t),yield c.close(),f)});return function(e){return s.apply(this,arguments)}}()},As={__proto__:null,default:function(){var s=(0,O.Z)(function*(t=[{}]){return Array.isArray(t)||(t=[t]),new Promise((e,r)=>{const n=document.createElement("input");n.type="file";const i=[...t.map(c=>c.mimeTypes||[]),...t.map(c=>c.extensions||[])].join();n.multiple=t[0].multiple||!1,n.accept=i||"",n.style.display="none",document.body.append(n);const o=c=>{"function"==typeof u&&u(),e(c)},u=t[0].legacySetup&&t[0].legacySetup(o,()=>u(r),n),f=()=>{window.removeEventListener("focus",f),n.remove()};n.addEventListener("click",()=>{window.addEventListener("focus",f)}),n.addEventListener("change",()=>{window.removeEventListener("focus",f),n.remove(),o(n.multiple?Array.from(n.files):n.files[0])}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})});return function(){return s.apply(this,arguments)}}()},js={__proto__:null,default:function(){var s=(0,O.Z)(function*(t=[{}]){return Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((e,r)=>{const n=document.createElement("input");n.type="file",n.webkitdirectory=!0;const i=u=>{"function"==typeof o&&o(),e(u)},o=t[0].legacySetup&&t[0].legacySetup(i,()=>o(r),n);n.addEventListener("change",()=>{let u=Array.from(n.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(u=u.filter(f=>f.webkitRelativePath.split("/").every(c=>!t[0].skipDirectory({name:c,kind:"directory"})))):u=u.filter(f=>2===f.webkitRelativePath.split("/").length),i(u)}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})});return function(){return s.apply(this,arguments)}}()},Os={__proto__:null,default:function(){var s=(0,O.Z)(function*(t,e={}){Array.isArray(e)&&(e=e[0]);const r=document.createElement("a");let n=t;var u;"body"in t&&(n=yield(u=(0,O.Z)(function*(f,c){const y=f.getReader(),m=new ReadableStream({start:E=>function(){var _=(0,O.Z)(function*(){return y.read().then(({done:k,value:S})=>{if(!k)return E.enqueue(S),T();E.close()})});function T(){return _.apply(this,arguments)}return T}()()}),v=new Response(m),p=yield v.blob();return y.releaseLock(),new Blob([p],{type:c})}),function(f,c){return u.apply(this,arguments)})(t.body,t.headers.get("content-type"))),r.download=e.fileName||"Untitled",r.href=URL.createObjectURL(yield n);const i=()=>{"function"==typeof o&&o()},o=e.legacySetup&&e.legacySetup(i,()=>o(),r);return r.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(r.href),3e4),i()}),r.click(),null});return function(e){return s.apply(this,arguments)}}()};const Kn=class{constructor(s){(0,Mt.r)(this,s),this.importProgress=(0,Mt.c)(this,"jeepSqliteImportProgress",7),this.exportProgress=(0,Mt.c)(this,"jeepSqliteExportProgress",7),this.HTTPRequestEnded=(0,Mt.c)(this,"jeepSqliteHTTPRequestEnded",7),this.PickDatabaseEnded=(0,Mt.c)(this,"jeepSqlitePickDatabaseEnded",7),this.SaveDatabaseEnded=(0,Mt.c)(this,"jeepSqliteSaveDatabaseToDisk",7),this.isStore=!1,this._dbDict={},this.databaseList={},this._versionUpgrades={},this._overwrite=!0,this.autoSave=!1,this.typeOrm=!1,this.wasmPath=void 0,this.pickText=void 0,this.saveText=void 0,this.buttonOptions=void 0,this.innerAutoSave=void 0,this.innerTypeOrm=void 0,this.innerWasmPath=void 0,this.innerPickText=void 0,this.innerSaveText=void 0,this.innerButtonOptions=void 0}parseAutoSave(s){this.innerAutoSave=s}parseTypeOrm(s){this.innerTypeOrm=s}parseWasmPath(s){this.innerWasmPath=s}parsePickText(s){this.innerPickText=s}parseSaveText(s){this.innerSaveText=s}parseButtonOptions(s){this.innerButtonOptions=JSON.parse(s);const t=Object.keys(this.innerButtonOptions);for(const e of t)switch(e){case"top":this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[e]);break;case"right":this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[e]);break;case"fontSize":this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[e]);break;case"padding":this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[e]);break;case"backgroundColor":this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[e]);break;case"color":this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[e])}}echo(s){return(0,O.Z)(function*(){return s})()}createConnection(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=s.version?s.version:1,i=!!s.readonly&&s.readonly;try{return yield t._createConnection(r,n,i),Promise.resolve()}catch(o){return Promise.reject(o)}})()}isConnection(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly,i=yield t._isConnection(r,n);return Promise.resolve(i)})()}closeConnection(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly;try{return yield t._closeConnection(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}open(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly;try{return yield t._open(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}close(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly;try{return yield t._close(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}getVersion(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly;try{const i=yield t._getVersion(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}beginTransaction(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database;if(s.readonly&&s.readonly)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const i=yield t._beginTransaction(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}commitTransaction(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database;if(s.readonly&&s.readonly)return Promise.reject("CommitTransaction: not allowed in read-only mode");try{const i=yield t._commitTransaction(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}rollbackTransaction(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database;if(s.readonly&&s.readonly)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const i=yield t._rollbackTransaction(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}isTransactionActive(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database;if(s.readonly&&s.readonly)return Promise.reject("isTransactionActive: not allowed in read-only mode");try{const i=yield t._isTransactionActive(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}execute(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(s);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("statements")||0===s.statements.length)return Promise.reject("Must provide raw SQL statements");const r=s.database,n=s.statements;let i=!0;const o=!!s.readonly&&s.readonly;e.includes("transaction")&&(i=s.transaction);try{const u=yield t._execute(r,n,i,o);return Promise.resolve(u)}catch(u){return Promise.reject(u)}})()}executeSet(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(s);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("set")||0===s.set.length)return Promise.reject("Must provide a non-empty set of SQL statements");const r=s.database,n=s.set;let i=!0;e.includes("transaction")&&(i=s.transaction);const o=!!s.readonly&&s.readonly,u=s.returnMode?s.returnMode:"no";try{const f=yield t._executeSet(r,n,i,o,u);return Promise.resolve(f)}catch(f){return Promise.reject(f)}})()}run(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(s);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("statement")||0===s.statement.length)return Promise.reject("Must provide a run statement");const r=s.database,n=s.statement;let i=[];e.includes("values")&&(i=s.values.length>0?s.values:[]);let o=!0;e.includes("transaction")&&(o=s.transaction);const u=!!s.readonly&&s.readonly,f=s.returnMode?s.returnMode:"no";try{const c=yield t._run(r,n,i,o,u,f);return Promise.resolve(c)}catch(c){return Promise.reject(c)}})()}query(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(s);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("statement")||0===s.statement.length)return Promise.reject("Must provide a query statement");let r=[];e.includes("values")&&(r=s.values.length>0?s.values:[]);const n=s.database,i=s.statement,o=!!s.readonly&&s.readonly;try{const u=yield t._query(n,i,r,o);return Promise.resolve(u)}catch(u){return Promise.reject(u)}})()}getTableList(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly;try{const i=yield t._getTableList(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}isDBExists(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly;try{const i=yield t._isDBExists(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}isDBOpen(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly;try{const i=yield t._isDBOpen(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}deleteDatabase(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly;try{return yield t._deleteDatabase(r,n)}catch(i){return Promise.reject(i)}})()}isStoreOpen(){var s=this;return(0,O.Z)(function*(){return Promise.resolve(s.isStore)})()}copyFromAssets(s){var t=this;return(0,O.Z)(function*(){let e;if(e=null==s||!Object.keys(s).includes("overwrite")||s.overwrite,!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);try{return yield t._copyFromAssets(e),Promise.resolve()}catch(r){return Promise.reject(r)}})()}isTableExists(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);const e=Object.keys(s);if(!e.includes("database"))return Promise.reject("Must provide a database name");const r=s.database;if(!e.includes("table"))return Promise.reject("Must provide a table name");const n=s.table,i=!!s.readonly&&s.readonly;try{const o=yield t._isTableExists(r,n,i);return Promise.resolve(o)}catch(o){return Promise.reject(o)}})()}createSyncTable(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly;try{const i=yield t._createSyncTable(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}getSyncDate(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly;try{const i=yield t._getSyncDate(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}setSyncDate(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(s);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("syncdate"))return Promise.reject("Must provide a synchronization date");const r=s.database,n=s.syncdate,i=!!s.readonly&&s.readonly;try{return yield t._setSyncDate(r,n,i),Promise.resolve()}catch(o){return Promise.reject(o)}})()}isJsonValid(s){var t=this;return(0,O.Z)(function*(){if(!Object.keys(s).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=s.jsonstring;try{const n=yield t._isJsonValid(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}})()}importFromJson(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=s.jsonstring;try{const n=yield t._importFromJson(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}})()}exportToJson(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);const e=Object.keys(s);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("jsonexportmode"))return Promise.reject("Must provide a json export mode");const r=s.database,n=s.jsonexportmode,i=!!s.readonly&&s.readonly;try{const o=yield t._exportToJson(r,n,i);return Promise.resolve(o)}catch(o){return Promise.reject(o)}})()}deleteExportedRows(s){var t=this;return(0,O.Z)(function*(){if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly;try{return yield t._deleteExportedRows(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}addUpgradeStatement(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(s);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("upgrade"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");const r=s.database,n=s.upgrade;for(const i of n){const o=Object.keys(i);if(!o.includes("toVersion")||!o.includes("statements"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");if("number"!=typeof i.toVersion)return Promise.reject("upgrade.toVersion must be a number");if(t._versionUpgrades[r])t._versionUpgrades[r][i.toVersion]=i;else{const u={};u[i.toVersion]=i,t._versionUpgrades[r]=u}}return Promise.resolve()})()}isDatabase(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database;try{const n=yield t._isDatabase(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}})()}getDatabaseList(){var s=this;return(0,O.Z)(function*(){if(!s.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${s.storeName} is not opened`);try{const t=yield s._getDatabaseList();return Promise.resolve(t)}catch(t){return Promise.reject(t)}})()}checkConnectionsConsistency(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);const e=Object.keys(s);if(!e.includes("dbNames"))return Promise.reject("Must provide a list of connection's name");const r=s.dbNames;if(!e.includes("openModes"))return Promise.reject("Must provide a list of connection's open mode");const n=s.openModes;try{const i=yield t._checkConnectionsConsistency(r,n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}saveToStore(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database,n=!!s.readonly&&s.readonly;try{return yield t._saveToStore(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}saveToLocalDisk(s){var t=this;return(0,O.Z)(function*(){if(!Object.keys(s).includes("database"))return Promise.reject("Must provide a database name");const r=s.database;try{return yield t._saveToLocalDisk(r),Promise.resolve()}catch(n){return Promise.reject(n)}})()}getFromLocalDiskToStore(s){var t=this;return(0,O.Z)(function*(){const e=!s.overwrite||s.overwrite;console.log(Dr?"Using the File System Access API.":"Using the fallback implementation.");try{return yield t._getFromLocalDiskToStore(e),Promise.resolve()}catch(r){return Promise.reject(r)}})()}getFromHTTPRequest(s){var t=this;return(0,O.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(s).includes("url"))return Promise.reject("Must provide an url");const r=s.url,n=!s.overwrite||s.overwrite;try{return yield t._getFromHTTPRequest(r,n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}connectedCallback(){this.parseAutoSave(void 0!==this.autoSave&&this.autoSave),this.parseTypeOrm(void 0!==this.typeOrm&&this.typeOrm),this.parseWasmPath(void 0!==this.wasmPath?this.wasmPath:"/assets"),this.parseSaveText(void 0!==this.saveText?this.saveText:"Save"),this.parsePickText(void 0!==this.pickText?this.pickText:"Pick a database"),void 0!==this.buttonOptions&&this.parseButtonOptions(this.buttonOptions),this.openStore("jeepSqliteStore","databases").then(s=>{this.isStore=s})}componentWillLoad(){}componentDidLoad(){var s=this;return(0,O.Z)(function*(){s._element=s.el.shadowRoot,s.isStore||console.log("jeep-sqlite isStore = false")})()}_createConnection(s,t,e){var r=this;return(0,O.Z)(function*(){let n={};const i=Object.keys(r._versionUpgrades);0!==i.length&&i.includes(s)&&(n=r._versionUpgrades[s]);const o=Object.keys(r._dbDict);let u;try{return u=o.length>0&&(o.includes("RW_"+s)||o.includes("RO_"+s))?o.includes("RW_"+s)?r._dbDict["RW_"+s]:r._dbDict["RO_"+s]:new Gn(s+"SQLite.db",t,n,r.store,r.innerAutoSave,r.innerWasmPath),r._dbDict[e?"RO_"+s:"RW_"+s]=u,Promise.resolve()}catch(f){return Promise.reject(f.message)}})()}_isConnection(s,t){var e=this;return(0,O.Z)(function*(){return Object.keys(e._dbDict).includes(t?"RO_"+s:"RW_"+s)?{result:!0}:{result:!1}})()}_closeConnection(s,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+s:"RW_"+s;if(!r.includes(n))return Promise.reject(`CloseConnection: No available connection for ${s}`);const i=e._dbDict[n];try{if(i.isDBOpen())try{yield i.close()}catch(o){return Promise.reject(`CloseConnection: close ${s} failed ${o}`)}return delete e._dbDict[n],Promise.resolve()}catch(o){return Promise.reject(`CloseConnection: ${o.message}`)}})()}_open(s,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+s:"RW_"+s;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${s}`);const i=e._dbDict[n];try{return yield i.open(),Promise.resolve()}catch(o){return Promise.reject(`Open: ${o.message}`)}})()}_close(s,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+s:"RW_"+s;if(!r.includes(n))return Promise.reject(`Close: No available connection for ${s}`);const i=e._dbDict[n];try{return yield i.close(),Promise.resolve()}catch(o){return Promise.reject(`Close: ${o.message}`)}})()}_saveToStore(s,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+s:"RW_"+s;if(!r.includes(n))return Promise.reject(`SaveToStore: No available connection for ${s}`);const i=e._dbDict[n];try{return yield i.saveToStore(),Promise.resolve()}catch(o){return Promise.reject(`SaveToStore: ${o.message}`)}})()}_saveToLocalDisk(s){var t=this;return(0,O.Z)(function*(){try{const e=Object.keys(t._dbDict),r="RW_"+s;if(!e.includes(r))return Promise.reject(`_saveToLocalDisk: No available connection for ${s}`);const i=yield t._dbDict[r].exportDB();t._blob=yield t.uint2blob(i);const o=`${s}SQLite.db`;return t._opts={fileName:o,extensions:[".db"]},t._buttonSaveEl=document.createElement("button"),t._buttonSaveEl.setAttribute("id","saveButton"),t._buttonSaveEl.innerHTML=`${t.innerSaveText} ${o}`,t._element.appendChild(t._buttonSaveEl),t._buttonSaveEl.addEventListener("click",t.saveFile.bind(t)),Promise.resolve()}catch(e){return Promise.reject(`_saveToLocalDisk: ${e.message}`)}})()}_getFromLocalDiskToStore(s){var t=this;return(0,O.Z)(function*(){return t._buttonPickEl=document.createElement("button"),t._buttonPickEl.setAttribute("id","pickButton"),t._buttonPickEl.innerHTML=`${t.innerPickText}`,t._element.appendChild(t._buttonPickEl),t._buttonPickEl.addEventListener("click",t.pickDatabase.bind(t)),t._overwrite=s,Promise.resolve()})()}pickDatabase(){var s=this;return(0,O.Z)(function*(){try{const t=yield function vs(){return sn.apply(this,arguments)}({extensions:[".db"]});let e=yield s.blob2uint(t);const r=s.removePathSuffix(t.name),n=s.setPathSuffix(t.name);(yield Ne.isDBInStore(n,s.store))?s._overwrite?(yield Ne.removeDBFromStore(n,s.store),yield Ne.saveDBToStore(n,e,s.store)):s.PickDatabaseEnded.emit({message:`Error: cannot overwrite ${n}`}):yield Ne.saveDBToStore(n,e,s.store),s._element.removeChild(s._buttonPickEl),s.PickDatabaseEnded.emit({db_name:r})}catch(t){s.PickDatabaseEnded.emit({message:t.message?t.message:t})}})()}saveFile(){var s=this;return(0,O.Z)(function*(){try{yield function _s(){return on.apply(this,arguments)}(s._blob,[s._opts]);const t=s._opts.fileName;s._element.removeChild(s._buttonSaveEl),s.SaveDatabaseEnded.emit({db_name:t})}catch(t){s.SaveDatabaseEnded.emit({message:t.message?t.message:t})}})()}_getVersion(s,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+s:"RW_"+s;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${s}`);const i=e._dbDict[n];try{const o=yield i.getVersion(),u={};return u.version=o,Promise.resolve(u)}catch(o){return Promise.reject(`Open: ${o.message}`)}})()}_beginTransaction(s){var t=this;return(0,O.Z)(function*(){const e=Object.keys(t._dbDict),r="RW_"+s;if(!e.includes(r))return Promise.reject(`BeginTransaction: No available connection for ${s}`);const n=t._dbDict[r];let i={};return i={changes:{changes:yield n.beginTransaction()}},Promise.resolve(i)})()}_commitTransaction(s){var t=this;return(0,O.Z)(function*(){const e=Object.keys(t._dbDict),r="RW_"+s;if(!e.includes(r))return Promise.reject(`CommitTransaction: No available connection for ${s}`);const n=t._dbDict[r];let i={};return i={changes:{changes:yield n.commitTransaction()}},Promise.resolve(i)})()}_rollbackTransaction(s){var t=this;return(0,O.Z)(function*(){const e=Object.keys(t._dbDict),r="RW_"+s;if(!e.includes(r))return Promise.reject(`RollbackTransaction: No available connection for ${s}`);const n=t._dbDict[r];let i={};return i={changes:{changes:yield n.rollbackTransaction()}},Promise.resolve(i)})()}_isTransactionActive(s){var t=this;return(0,O.Z)(function*(){const e=Object.keys(t._dbDict),r="RW_"+s;if(!e.includes(r))return Promise.reject(`IsTransactionActive: No available connection for ${s}`);let i={};return i={result:t._dbDict[r].isTransActive()},Promise.resolve(i)})()}_execute(s,t,e,r){var n=this;return(0,O.Z)(function*(){const i=Object.keys(n._dbDict),o="RW_"+s;if(!i.includes(o))return Promise.reject(`Execute: No available connection for ${s}`);const u=n._dbDict[o];if(r)return Promise.reject("Execute: not allowed in read-only mode");let f={};const c=t.substring(0,6);if(n.innerAutoSave&&"COMMIT"===c&&n.innerTypeOrm)return f={changes:{changes:0}},Promise.resolve(f);try{return f={changes:{changes:yield u.executeSQL(t,e)}},Promise.resolve(f)}catch(y){return Promise.reject(`Execute: ${y.message}`)}})()}_executeSet(s,t,e,r,n){var i=this;return(0,O.Z)(function*(){const o=Object.keys(i._dbDict),u="RW_"+s;if(!o.includes(u))return Promise.reject(`ExecuteSet: No available connection for ${s}`);const f=i._dbDict[u];if(r)return Promise.reject("ExecuteSet: not allowed in read-only mode");for(const c of t)if(!("statement"in c)||!("values"in c))return Promise.reject("ExecuteSet: Must provide a set as Array of {statement,values}");try{const c=yield f.execSet(t,e,n);return Promise.resolve({changes:{changes:c.changes,lastId:c.lastId,values:c.values}})}catch(c){return Promise.reject(`ExecuteSet: ${c.message}`)}})()}_run(s,t,e,r,n,i){var o=this;return(0,O.Z)(function*(){const u=Object.keys(o._dbDict),f="RW_"+s;if(!u.includes(f))return Promise.reject(`Run: No available connection for ${s}`);const c=o._dbDict[f];if(n)return Promise.reject("Run: not allowed in read-only mode");let y={};const m=t.substring(0,6);if(o.innerAutoSave&&"COMMIT"===m)return y={changes:{changes:0}},Promise.resolve(y);try{const v=yield c.runSQL(t,e,r,i);return y={changes:{changes:v.changes,lastId:v.lastId,values:v.values}},Promise.resolve(y)}catch(v){return Promise.reject(`Run: ${v.message}`)}})()}_query(s,t,e,r){var n=this;return(0,O.Z)(function*(){const i=Object.keys(n._dbDict),o=r?"RO_"+s:"RW_"+s;if(!i.includes(o))return Promise.reject(`Query: No available connection for ${s}`);const u=n._dbDict[o];let f=[];const c=t.substring(0,6);if(n.innerAutoSave&&"COMMIT"===c)return Promise.resolve({values:f});try{return f=yield u.selectSQL(t,e),Promise.resolve({values:f})}catch(y){return Promise.reject(`Query failed: ${y.message}`)}})()}_getTableList(s,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+s:"RW_"+s;if(!r.includes(n))return Promise.reject(`GetTableList: No available connection for ${s}`);const i=e._dbDict[n];let o=[];try{return o=yield i.getTableNames(),Promise.resolve({values:o})}catch(u){return Promise.reject(`GetTableList failed: ${u.message}`)}})()}_isDBExists(s,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+s:"RW_"+s;if(!r.includes(n))return Promise.reject(`IsDBExists: No available connection for ${s}`);const i=e._dbDict[n];try{const u={result:yield i.isDBExists(s+"SQLite.db")};return Promise.resolve(u)}catch(o){return Promise.reject(`IsDBExists: ${o.message}`)}})()}_isDBOpen(s,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+s:"RW_"+s;if(!r.includes(n))return Promise.reject(`IsDBOpen: No available connection for ${s}`);const i=e._dbDict[n];try{const u={result:yield i.isDBOpen(s+"SQLite.db")};return Promise.resolve(u)}catch(o){return Promise.reject(`IsDBOpen: ${o.message}`)}})()}_deleteDatabase(s,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n="RW_"+s;if(!r.includes(n))return Promise.reject(`DeleteDatabase: No available connection for ${s}`);const i=e._dbDict[n];if(t)return Promise.reject("DeleteDatabase: not allowed in read-only mode");try{return yield i.deleteDB(s+"SQLite.db"),Promise.resolve()}catch(o){return Promise.reject(`DeleteDatabase: ${o.message}`)}})()}_isTableExists(s,t,e){var r=this;return(0,O.Z)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+s:"RW_"+s;if(!n.includes(i))return Promise.reject(`IsTableExists: No available connection for ${s}`);const o=r._dbDict[i];try{const f={result:yield o.isTable(t)};return Promise.resolve(f)}catch(u){return Promise.reject(`IsTableExists: ${u.message}`)}})()}_createSyncTable(s,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n="RW_"+s;if(!r.includes(n))return Promise.reject(`CreateSyncTable: No available connection for ${s}`);const i=e._dbDict[n];if(t)return Promise.reject("CreateSyncTable: not allowed in read-only mode");try{const o=yield i.createSyncTable();return Promise.resolve({changes:{changes:o}})}catch(o){return Promise.reject(`CreateSyncTable: ${o.message}`)}})()}_getSyncDate(s,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n=t?"RO_"+s:"RW_"+s;if(!r.includes(n))return Promise.reject(`GetSyncDate: No available connection for ${s}`);const i=e._dbDict[n];try{const o=yield i.getSyncDate();return Promise.resolve({syncDate:o})}catch(o){return Promise.reject(`GetSyncDate: ${o.message}`)}})()}_setSyncDate(s,t,e){var r=this;return(0,O.Z)(function*(){const n=Object.keys(r._dbDict),i="RW_"+s;if(!n.includes(i))return Promise.reject(`SetSyncDate: No available connection for ${s}`);const o=r._dbDict[i];if(e)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{const u=yield o.setSyncDate(t);return u.result?Promise.resolve():Promise.reject(`SetSyncDate: ${u.message}`)}catch(u){return Promise.reject(`SetSyncDate: ${u.message}`)}})()}_isJsonValid(s){return(0,O.Z)(function*(){const t=JSON.parse(s);return(yield We.isJsonSQLite(t))?Promise.resolve({result:!0}):Promise.reject("IsJsonValid: Stringify Json Object not Valid")})()}_importFromJson(s){var t=this;return(0,O.Z)(function*(){var e,r;const n=JSON.parse(s);if(!(yield We.isJsonSQLite(n)))return Promise.reject("ImportFromJson: Stringify Json Object not Valid");const o=n,u=`${o.database}SQLite.db`,f=null!==(e=o.version)&&void 0!==e?e:1,c=o.mode,y=null!==(r=o.overwrite)&&void 0!==r&&r,m=new Gn(u,f,{},t.store,t.innerAutoSave,t.innerWasmPath);try{y&&"full"===c&&Ne.isDBInStore(u,t.store)&&(yield Ne.removeDBFromStore(u,t.store)),yield m.open();const v=yield m.getTableNames();if("full"===c&&v.length>0){const E=yield m.getVersion();if(f<E)return Promise.reject(`ImportFromJson: Cannot import a version lower than ${E}`);if(E===f)return Promise.resolve({changes:{changes:0}})}const p=yield m.importJson(o,t.importProgress);return yield m.close(),Promise.resolve({changes:{changes:p}})}catch(v){return Promise.reject(`ImportFromJson: ${v.message}`)}})()}_exportToJson(s,t,e){var r=this;return(0,O.Z)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+s:"RW_"+s;if(!n.includes(i))return Promise.reject(`ExportToJson: No available connection for ${s}`);const o=r._dbDict[i];try{const u=yield o.exportJson(t,r.exportProgress);return Object.keys(u).includes("message")?Promise.reject(`ExportToJson: ${u.message}`):Promise.resolve({export:u})}catch(u){return Promise.reject(`ExportToJson: ${u.message}`)}})()}_deleteExportedRows(s,t){var e=this;return(0,O.Z)(function*(){const r=Object.keys(e._dbDict),n="RW_"+s;if(!r.includes(n))return Promise.reject(`ExportToJson: No available connection for ${s}`);const i=e._dbDict[n];if(t)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{yield i.deleteExportedRows()}catch(o){return Promise.reject(`DeleteExportedRows: ${o.message}`)}})()}_copyFromAssets(s){var t=this;return(0,O.Z)(function*(){const e=yield t.loadJSON("assets/databases/databases.json");if(null==e)return Promise.reject("CopyFromAssets: no databases.json file in assets/databases folder");if(t.databaseList=JSON.parse(e),!Object.keys(t.databaseList).includes("databaseList"))return Promise.reject("CopyFromAssets: no key databaseList in databases.json");try{for(const n of t.databaseList.databaseList)".db"===n.substring(n.length-3)&&(yield t.copyDatabase(`assets/databases/${n}`,s)),".zip"===n.substring(n.length-4)&&(yield t.unzipDatabase(`assets/databases/${n}`,s));return Promise.resolve()}catch(n){return Promise.reject(`CopyFromAssets: ${n.message}`)}})()}_getFromHTTPRequest(s,t){var e=this;return(0,O.Z)(function*(){try{let r;return".db"===s.substring(s.length-3)&&(yield e.copyDatabase(s,t),r="db"),".zip"===s.substring(s.length-4)&&(yield e.unzipDatabase(s,t),r="zip"),e.HTTPRequestEnded.emit({message:r}),Promise.resolve()}catch(r){return Promise.reject(`GetFromHTTPRequest: ${r.message}`)}})()}_isDatabase(s){var t=this;return(0,O.Z)(function*(){try{const r={result:yield Ne.isDBInStore(s+"SQLite.db",t.store)};return Promise.resolve(r)}catch(e){return Promise.reject(`IsDatabase: ${e.message}`)}})()}_getDatabaseList(){var s=this;return(0,O.Z)(function*(){try{const e={values:yield Ne.getDBListFromStore(s.store)};return Promise.resolve(e)}catch(t){return Promise.reject(`GetDatabaseList: ${t.message}`)}})()}_checkConnectionsConsistency(s,t){var e=this;return(0,O.Z)(function*(){const r={result:!1},n=[];s.forEach((i,o)=>{n.push(`${t[o]}_${i}`)});try{let i=new Set(Object.keys(e._dbDict));const o=new Set(n);if(0===o.size)return yield e._resetDbDict(Object.keys(e._dbDict)),Promise.resolve(r);if(i.size<o.size)return yield e._resetDbDict(Object.keys(e._dbDict)),Promise.resolve(r);if(i.size>o.size){const u={};for(const f of i)if(!Array.from(o.keys()).includes(f)){let c=!1;"RO_"===f.substring(0,3)&&(c=!0),u.database=f.substring(3),u.readonly=c,yield e._closeConnection(u.database,u.readonly)}}return i=new Set(Object.keys(e._dbDict)),i.size===o.size&&0===(yield e.symmetricDifference(i,o)).size?(r.result=!0,Promise.resolve(r)):(yield e._resetDbDict(Object.keys(e._dbDict)),Promise.resolve(r))}catch(i){return Promise.reject(`CheckConnectionsConsistency: ${i.message}`)}})()}_resetDbDict(s){var t=this;return(0,O.Z)(function*(){try{for(const e of s){const r={};let n=!1;"RO_"===e.substring(0,3)&&(n=!0),r.database=e.substring(3),r.readonly=n,yield t._closeConnection(r.database,r.readonly)}}catch(e){return Promise.reject(`ResetDbDict: ${e.message}`)}})()}symmetricDifference(s,t){return(0,O.Z)(function*(){let e=new Set;s.forEach(n=>{e.add(n.substring(3))});let r=new Set;t.forEach(n=>{r.add(n.substring(3))});for(const n of r)e.has(n)?e.delete(n):e.add(n);return e})()}unzipDatabase(s,t){var e=this;return(0,O.Z)(function*(){return new Promise((r,n)=>{var i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType="arraybuffer",i.onerror=()=>{n(new Error("unzipDatabase: failed"))},i.onload=()=>{ys.loadAsync(i.response).then(function(){var o=(0,O.Z)(function*(u){const f=Object.keys(u.files);try{for(const c of f)yield e.retrieveDBFromZip(u.files,c,t);r()}catch(c){n(new Error(`unzipDatabase Error: ${c.message}`))}});return function(u){return o.apply(this,arguments)}}())},i.send()})})()}retrieveDBFromZip(s,t,e){var r=this;return(0,O.Z)(function*(){return new Promise((n,i)=>{s[t].async("nodebuffer").then(function(){var o=(0,O.Z)(function*(u){try{const f=new Uint8Array(u),c=r.setPathSuffix(t);(yield Ne.isDBInStore(c,r.store))?e?(yield Ne.removeDBFromStore(c,r.store),yield Ne.saveDBToStore(c,f,r.store)):i(new Error(`retrieveDBFromZip: cannot overwrite ${c}`)):yield Ne.saveDBToStore(c,f,r.store),n()}catch(f){i(new Error(`retrieveDBFromZip:: ${f.message}`))}});return function(u){return o.apply(this,arguments)}}())})})()}copyDatabase(s,t){var e=this;return(0,O.Z)(function*(){return new Promise((r,n)=>{var o,i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType="arraybuffer",i.onerror=()=>{n(new Error("CopyDatabase: failed"))},i.onload=()=>{o=new Uint8Array(i.response)},i.onloadend=(0,O.Z)(function*(){const u=e.setPathSuffix(s);(yield Ne.isDBInStore(u,e.store))?t?(yield Ne.removeDBFromStore(u,e.store),yield Ne.saveDBToStore(u,o,e.store)):n(new Error(`CopyDatabase Error: cannot overwrite ${u}`)):yield Ne.saveDBToStore(u,o,e.store),r()}),i.send()})})()}loadJSON(s){return(0,O.Z)(function*(){return new Promise((t,e)=>{var r=new XMLHttpRequest;r.overrideMimeType("application/json"),r.open("GET",s,!0),r.onerror=()=>{e(new Error("LoadJSON: failed"))},r.onreadystatechange=function(){404==r.status&&t(null),4==r.readyState&&200==r.status&&t(r.responseText)},r.send(null)})})()}openStore(s,t){var e=this;return(0,O.Z)(function*(){let r=!1;const n=e.setConfig(s,t);return e.store=Vn.createInstance(n),null!=e.store&&(e.storeName=s,r=!0),r})()}setConfig(s,t){return{name:s,storeName:t,driver:[Vn.INDEXEDDB],version:1}}removePathSuffix(s){return s.includes("SQLite.db")?s.split("SQLite.db")[0]:".db"===s.substring(s.length-3)?s.slice(0,s.lastIndexOf(".")):s}setPathSuffix(s){let t=s.slice(s.lastIndexOf("/")+1);return".db"===s.substring(s.length-3)&&(s.includes("SQLite.db")||(t=s.slice(s.lastIndexOf("/")+1,-3)+"SQLite.db")),t}blob2uint(s){return(0,O.Z)(function*(){return new Response(s).arrayBuffer().then(t=>new Uint8Array(t))})()}uint2blob(s){return(0,O.Z)(function*(){const t=new Blob([s.buffer]);return Promise.resolve(t)})()}render(){}static get assetsDirs(){return["assets"]}get el(){return(0,Mt.g)(this)}static get watchers(){return{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}};Kn.style=":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}"}}]);